(self.webpackChunk_koko_libs=self.webpackChunk_koko_libs||[]).push([[509],{65129:function(){(function(){"use strict";function se(){var Me=function(m){return Math.log(m)/Math.log(10)};function we(m){return new Int8Array(m)}function pe(m){return new Int16Array(m)}function w0(m){return new Int32Array(m)}function K(m){return new Float32Array(m)}function t0(m){return new Float64Array(m)}function T0(m){if(m.length==1)return K(m[0]);var V=m[0];m=m.slice(1);for(var Z=[],k=0;k<V;k++)Z.push(T0(m));return Z}function X0(m){if(m.length==1)return w0(m[0]);var V=m[0];m=m.slice(1);for(var Z=[],k=0;k<V;k++)Z.push(X0(m));return Z}function Z0(m){if(m.length==1)return pe(m[0]);var V=m[0];m=m.slice(1);for(var Z=[],k=0;k<V;k++)Z.push(Z0(m));return Z}function V0(m){if(m.length==1)return new Array(m[0]);var V=m[0];m=m.slice(1);for(var Z=[],k=0;k<V;k++)Z.push(V0(m));return Z}var G0={};G0.fill=function(m,V,Z,k){if(arguments.length==2)for(var i0=0;i0<m.length;i0++)m[i0]=arguments[1];else for(var i0=V;i0<Z;i0++)m[i0]=k};var k0={};k0.arraycopy=function(m,V,Z,k,i0){for(var N=V+i0;V<N;)Z[k++]=m[V++]};var c0={};c0.SQRT2=1.4142135623730951,c0.FAST_LOG10=function(m){return Me(m)},c0.FAST_LOG10_X=function(m,V){return Me(m)*V};function C0(m){this.ordinal=m}C0.short_block_allowed=new C0(0),C0.short_block_coupled=new C0(1),C0.short_block_dispensed=new C0(2),C0.short_block_forced=new C0(3);var F0={};F0.MAX_VALUE=34028235e31;function m0(m){this.ordinal=m}m0.vbr_off=new m0(0),m0.vbr_mt=new m0(1),m0.vbr_rh=new m0(2),m0.vbr_abr=new m0(3),m0.vbr_mtrh=new m0(4),m0.vbr_default=m0.vbr_mtrh;var Be=function(m){},de={System:k0,VbrMode:m0,Float:F0,ShortBlock:C0,Util:c0,Arrays:G0,new_array_n:V0,new_byte:we,new_double:t0,new_float:K,new_float_n:T0,new_int:w0,new_int_n:X0,new_short:pe,new_short_n:Z0,assert:Be};function $0(m){var V=m;this.ordinal=function(){return V}}$0.STEREO=new $0(0),$0.JOINT_STEREO=new $0(1),$0.DUAL_CHANNEL=new $0(2),$0.MONO=new $0(3),$0.NOT_SET=new $0(4);function Ve(){var m="http://www.mp3dev.org/",V=3,Z=98,k=4,i0=0,N=93;this.getLameVersion=function(){return V+"."+Z+"."+k},this.getLameShortVersion=function(){return V+"."+Z+"."+k},this.getLameVeryShortVersion=function(){return"LAME"+V+"."+Z+"r"},this.getPsyVersion=function(){return i0+"."+N},this.getLameUrl=function(){return m},this.getLameOsBitness=function(){return"32bits"}}function Oe(){var m=null;this.qupvt=null,this.setModules=function(n){this.qupvt=n,m=n};function V(n){this.bits=0|n}var Z=[[0,0],[0,0],[0,0],[0,0],[0,0],[0,1],[1,1],[1,1],[1,2],[2,2],[2,3],[2,3],[3,4],[3,4],[3,4],[4,5],[4,5],[4,6],[5,6],[5,6],[5,7],[6,7],[6,7]];function k(n,e,i,v,f,d){var b=.5946/e;for(n=n>>1;n--!=0;)f[d++]=b>i[v++]?0:1,f[d++]=b>i[v++]?0:1}function i0(n,e,i,v,f,d){n=n>>1;var b=n%2;for(n=n>>1;n--!=0;){var z,I,U,_0,r,s,g,a0;z=i[v++]*e,I=i[v++]*e,r=0|z,U=i[v++]*e,s=0|I,_0=i[v++]*e,g=0|U,z+=m.adj43[r],a0=0|_0,I+=m.adj43[s],f[d++]=0|z,U+=m.adj43[g],f[d++]=0|I,_0+=m.adj43[a0],f[d++]=0|U,f[d++]=0|_0}if(b!=0){var z,I,r,s;z=i[v++]*e,I=i[v++]*e,r=0|z,s=0|I,z+=m.adj43[r],I+=m.adj43[s],f[d++]=0|z,f[d++]=0|I}}function N(n,e,i,v,f){var d,b,z=0,I,U=0,_0=0,r=0,s=e,g=0,a0=s,u0=0,A0=n,R0=0;for(I=f!=null&&v.global_gain==f.global_gain,v.block_type==l.SHORT_TYPE?b=38:b=21,d=0;d<=b;d++){var E0=-1;if((I||v.block_type==l.NORM_TYPE)&&(E0=v.global_gain-(v.scalefac[d]+(v.preflag!=0?m.pretab[d]:0)<<v.scalefac_scale+1)-v.subblock_gain[v.window[d]]*8),I&&f.step[d]==E0)U!=0&&(i0(U,i,A0,R0,a0,u0),U=0),_0!=0&&(k(_0,i,A0,R0,a0,u0),_0=0);else{var D0=v.width[d];if(z+v.width[d]>v.max_nonzero_coeff){var I0;I0=v.max_nonzero_coeff-z+1,G0.fill(e,v.max_nonzero_coeff,576,0),D0=I0,D0<0&&(D0=0),d=b+1}if(U==0&&_0==0&&(a0=s,u0=g,A0=n,R0=r),f!=null&&f.sfb_count1>0&&d>=f.sfb_count1&&f.step[d]>0&&E0>=f.step[d]?(U!=0&&(i0(U,i,A0,R0,a0,u0),U=0,a0=s,u0=g,A0=n,R0=r),_0+=D0):(_0!=0&&(k(_0,i,A0,R0,a0,u0),_0=0,a0=s,u0=g,A0=n,R0=r),U+=D0),D0<=0){_0!=0&&(k(_0,i,A0,R0,a0,u0),_0=0),U!=0&&(i0(U,i,A0,R0,a0,u0),U=0);break}}d<=b&&(g+=v.width[d],r+=v.width[d],z+=v.width[d])}U!=0&&(i0(U,i,A0,R0,a0,u0),U=0),_0!=0&&(k(_0,i,A0,R0,a0,u0),_0=0)}function J(n,e,i){var v=0,f=0;do{var d=n[e++],b=n[e++];v<d&&(v=d),f<b&&(f=b)}while(e<i);return v<f&&(v=f),v}function s0(n,e,i,v,f,d){var b=j.ht[v].xlen*65536+j.ht[f].xlen,z=0,I;do{var U=n[e++],_0=n[e++];U!=0&&(U>14&&(U=15,z+=b),U*=16),_0!=0&&(_0>14&&(_0=15,z+=b),U+=_0),z+=j.largetbl[U]}while(e<i);return I=z&65535,z>>=16,z>I&&(z=I,v=f),d.bits+=z,v}function v0(n,e,i,v){var f=0,d=j.ht[1].hlen;do{var b=n[e+0]*2+n[e+1];e+=2,f+=d[b]}while(e<i);return v.bits+=f,1}function w(n,e,i,v,f){var d=0,b,z=j.ht[v].xlen,I;v==2?I=j.table23:I=j.table56;do{var U=n[e+0]*z+n[e+1];e+=2,d+=I[U]}while(e<i);return b=d&65535,d>>=16,d>b&&(d=b,v++),f.bits+=d,v}function C(n,e,i,v,f){var d=0,b=0,z=0,I=j.ht[v].xlen,U=j.ht[v].hlen,_0=j.ht[v+1].hlen,r=j.ht[v+2].hlen;do{var s=n[e+0]*I+n[e+1];e+=2,d+=U[s],b+=_0[s],z+=r[s]}while(e<i);var g=v;return d>b&&(d=b,g++),d>z&&(d=z,g=v+2),f.bits+=d,g}var G=[1,2,5,7,7,10,10,13,13,13,13,13,13,13,13];function E(n,e,i,v){var f=J(n,e,i);switch(f){case 0:return f;case 1:return v0(n,e,i,v);case 2:case 3:return w(n,e,i,G[f-1],v);case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:return C(n,e,i,G[f-1],v);default:if(f>x0.IXMAX_VAL)return v.bits=x0.LARGE_BITS,-1;f-=15;var d;for(d=24;d<32&&!(j.ht[d].linmax>=f);d++);var b;for(b=d-8;b<24&&!(j.ht[b].linmax>=f);b++);return s0(n,e,i,b,d,v)}}this.noquant_count_bits=function(n,e,i){var v=e.l3_enc,f=Math.min(576,e.max_nonzero_coeff+2>>1<<1);for(i!=null&&(i.sfb_count1=0);f>1&&!(v[f-1]|v[f-2]);f-=2);e.count1=f;for(var d=0,b=0;f>3;f-=4){var z;if(((v[f-1]|v[f-2]|v[f-3]|v[f-4])&2147483647)>1)break;z=((v[f-4]*2+v[f-3])*2+v[f-2])*2+v[f-1],d+=j.t32l[z],b+=j.t33l[z]}var I=d;if(e.count1table_select=0,d>b&&(I=b,e.count1table_select=1),e.count1bits=I,e.big_values=f,f==0)return I;if(e.block_type==l.SHORT_TYPE)d=3*n.scalefac_band.s[3],d>e.big_values&&(d=e.big_values),b=e.big_values;else if(e.block_type==l.NORM_TYPE){if(d=e.region0_count=n.bv_scf[f-2],b=e.region1_count=n.bv_scf[f-1],b=n.scalefac_band.l[d+b+2],d=n.scalefac_band.l[d+1],b<f){var U=new V(I);e.table_select[2]=E(v,b,f,U),I=U.bits}}else e.region0_count=7,e.region1_count=l.SBMAX_l-1-7-1,d=n.scalefac_band.l[7+1],b=f,d>b&&(d=b);if(d=Math.min(d,f),b=Math.min(b,f),0<d){var U=new V(I);e.table_select[0]=E(v,0,d,U),I=U.bits}if(d<b){var U=new V(I);e.table_select[1]=E(v,d,b,U),I=U.bits}if(n.use_best_huffman==2&&(e.part2_3_length=I,best_huffman_divide(n,e),I=e.part2_3_length),i!=null&&e.block_type==l.NORM_TYPE){for(var _0=0;n.scalefac_band.l[_0]<e.big_values;)_0++;i.sfb_count1=_0}return I},this.count_bits=function(n,e,i,v){var f=i.l3_enc,d=x0.IXMAX_VAL/m.IPOW20(i.global_gain);if(i.xrpow_max>d)return x0.LARGE_BITS;if(N(e,f,m.IPOW20(i.global_gain),i,v),n.substep_shaping&2)for(var b=0,z=i.global_gain+i.scalefac_scale,I=.634521682242439/m.IPOW20(z),U=0;U<i.sfbmax;U++){var _0=i.width[U];if(n.pseudohalf[U]==0)b+=_0;else{var r;for(r=b,b+=_0;r<b;++r)f[r]=e[r]>=I?f[r]:0}}return this.noquant_count_bits(n,i,v)};function L(n,e,i,v,f,d,b){for(var z=e.big_values,I=0;I<=7+15;I++)v[I]=x0.LARGE_BITS;for(var I=0;I<16;I++){var U=n.scalefac_band.l[I+1];if(U>=z)break;var _0=0,r=new V(_0),s=E(i,0,U,r);_0=r.bits;for(var g=0;g<8;g++){var a0=n.scalefac_band.l[I+g+2];if(a0>=z)break;var u0=_0;r=new V(u0);var A0=E(i,U,a0,r);u0=r.bits,v[I+g]>u0&&(v[I+g]=u0,f[I+g]=I,d[I+g]=s,b[I+g]=A0)}}}function a(n,e,i,v,f,d,b,z){for(var I=e.big_values,U=2;U<l.SBMAX_l+1;U++){var _0=n.scalefac_band.l[U];if(_0>=I)break;var r=f[U-2]+e.count1bits;if(i.part2_3_length<=r)break;var s=new V(r),g=E(v,_0,I,s);r=s.bits,!(i.part2_3_length<=r)&&(i.assign(e),i.part2_3_length=r,i.region0_count=d[U-2],i.region1_count=U-2-d[U-2],i.table_select[0]=b[U-2],i.table_select[1]=z[U-2],i.table_select[2]=g)}}this.best_huffman_divide=function(n,e){var i=new g0,v=e.l3_enc,f=w0(7+15+1),d=w0(7+15+1),b=w0(7+15+1),z=w0(7+15+1);if(!(e.block_type==l.SHORT_TYPE&&n.mode_gr==1)){i.assign(e),e.block_type==l.NORM_TYPE&&(L(n,e,v,f,d,b,z),a(n,i,e,v,f,d,b,z));var I=i.big_values;if(!(I==0||(v[I-2]|v[I-1])>1)&&(I=e.count1+2,!(I>576))){i.assign(e),i.count1=I;for(var U=0,_0=0;I>i.big_values;I-=4){var r=((v[I-4]*2+v[I-3])*2+v[I-2])*2+v[I-1];U+=j.t32l[r],_0+=j.t33l[r]}if(i.big_values=I,i.count1table_select=0,U>_0&&(U=_0,i.count1table_select=1),i.count1bits=U,i.block_type==l.NORM_TYPE)a(n,i,e,v,f,d,b,z);else{if(i.part2_3_length=U,U=n.scalefac_band.l[7+1],U>I&&(U=I),U>0){var s=new V(i.part2_3_length);i.table_select[0]=E(v,0,U,s),i.part2_3_length=s.bits}if(I>U){var s=new V(i.part2_3_length);i.table_select[1]=E(v,U,I,s),i.part2_3_length=s.bits}e.part2_3_length>i.part2_3_length&&e.assign(i)}}}};var M=[1,1,1,1,8,2,2,2,4,4,4,8,8,8,16,16],X=[1,2,4,8,1,2,4,8,2,4,8,2,4,8,4,8],B=[0,0,0,0,3,1,1,1,2,2,2,3,3,3,4,4],_=[0,1,2,3,0,1,2,3,1,2,3,1,2,3,2,3];Oe.slen1_tab=B,Oe.slen2_tab=_;function S(n,e){for(var i,v=e.tt[1][n],f=e.tt[0][n],d=0;d<j.scfsi_band.length-1;d++){for(i=j.scfsi_band[d];i<j.scfsi_band[d+1]&&!(f.scalefac[i]!=v.scalefac[i]&&v.scalefac[i]>=0);i++);if(i==j.scfsi_band[d+1]){for(i=j.scfsi_band[d];i<j.scfsi_band[d+1];i++)v.scalefac[i]=-1;e.scfsi[n][d]=1}}var b=0,z=0;for(i=0;i<11;i++)v.scalefac[i]!=-1&&(z++,b<v.scalefac[i]&&(b=v.scalefac[i]));for(var I=0,U=0;i<l.SBPSY_l;i++)v.scalefac[i]!=-1&&(U++,I<v.scalefac[i]&&(I=v.scalefac[i]));for(var d=0;d<16;d++)if(b<M[d]&&I<X[d]){var _0=B[d]*z+_[d]*U;v.part2_length>_0&&(v.part2_length=_0,v.scalefac_compress=d)}}this.best_scalefac_store=function(n,e,i,v){var f=v.tt[e][i],d,b,z,I,U=0;for(z=0,d=0;d<f.sfbmax;d++){var _0=f.width[d];for(z+=_0,I=-_0;I<0&&f.l3_enc[I+z]==0;I++);I==0&&(f.scalefac[d]=U=-2)}if(f.scalefac_scale==0&&f.preflag==0){var r=0;for(d=0;d<f.sfbmax;d++)f.scalefac[d]>0&&(r|=f.scalefac[d]);if(!(r&1)&&r!=0){for(d=0;d<f.sfbmax;d++)f.scalefac[d]>0&&(f.scalefac[d]>>=1);f.scalefac_scale=U=1}}if(f.preflag==0&&f.block_type!=l.SHORT_TYPE&&n.mode_gr==2){for(d=11;d<l.SBPSY_l&&!(f.scalefac[d]<m.pretab[d]&&f.scalefac[d]!=-2);d++);if(d==l.SBPSY_l){for(d=11;d<l.SBPSY_l;d++)f.scalefac[d]>0&&(f.scalefac[d]-=m.pretab[d]);f.preflag=U=1}}for(b=0;b<4;b++)v.scfsi[i][b]=0;for(n.mode_gr==2&&e==1&&v.tt[0][i].block_type!=l.SHORT_TYPE&&v.tt[1][i].block_type!=l.SHORT_TYPE&&(S(i,v),U=0),d=0;d<f.sfbmax;d++)f.scalefac[d]==-2&&(f.scalefac[d]=0);U!=0&&(n.mode_gr==2?this.scale_bitcount(f):this.scale_bitcount_lsf(n,f))};function u(n,e){for(var i=0;i<e;++i)if(n[i]<0)return!1;return!0}var x=[0,18,36,54,54,36,54,72,54,72,90,72,90,108,108,126],R=[0,18,36,54,51,35,53,71,52,70,88,69,87,105,104,122],t=[0,10,20,30,33,21,31,41,32,42,52,43,53,63,64,74];this.scale_bitcount=function(n){var e,i,v=0,f=0,d,b=n.scalefac;if(n.block_type==l.SHORT_TYPE)d=x,n.mixed_block_flag!=0&&(d=R);else if(d=t,n.preflag==0){for(i=11;i<l.SBPSY_l&&!(b[i]<m.pretab[i]);i++);if(i==l.SBPSY_l)for(n.preflag=1,i=11;i<l.SBPSY_l;i++)b[i]-=m.pretab[i]}for(i=0;i<n.sfbdivide;i++)v<b[i]&&(v=b[i]);for(;i<n.sfbmax;i++)f<b[i]&&(f=b[i]);for(n.part2_length=x0.LARGE_BITS,e=0;e<16;e++)v<M[e]&&f<X[e]&&n.part2_length>d[e]&&(n.part2_length=d[e],n.scalefac_compress=e);return n.part2_length==x0.LARGE_BITS};var y=[[15,15,7,7],[15,15,7,0],[7,3,0,0],[15,31,31,0],[7,7,7,0],[3,3,0,0]];this.scale_bitcount_lsf=function(n,e){var i,v,f,d,b,z,I,U,_0=w0(4),r=e.scalefac;for(e.preflag!=0?i=2:i=0,I=0;I<4;I++)_0[I]=0;if(e.block_type==l.SHORT_TYPE){v=1;var s=m.nr_of_sfb_block[i][v];for(U=0,f=0;f<4;f++)for(d=s[f]/3,I=0;I<d;I++,U++)for(b=0;b<3;b++)r[U*3+b]>_0[f]&&(_0[f]=r[U*3+b])}else{v=0;var s=m.nr_of_sfb_block[i][v];for(U=0,f=0;f<4;f++)for(d=s[f],I=0;I<d;I++,U++)r[U]>_0[f]&&(_0[f]=r[U])}for(z=!1,f=0;f<4;f++)_0[f]>y[i][f]&&(z=!0);if(!z){var g,a0,u0,A0;for(e.sfb_partition_table=m.nr_of_sfb_block[i][v],f=0;f<4;f++)e.slen[f]=o[_0[f]];switch(g=e.slen[0],a0=e.slen[1],u0=e.slen[2],A0=e.slen[3],i){case 0:e.scalefac_compress=(g*5+a0<<4)+(u0<<2)+A0;break;case 1:e.scalefac_compress=400+(g*5+a0<<2)+u0;break;case 2:e.scalefac_compress=500+g*3+a0;break;default:k0.err.printf(`intensity stereo not implemented yet
`);break}}if(!z)for(e.part2_length=0,f=0;f<4;f++)e.part2_length+=e.slen[f]*e.sfb_partition_table[f];return z};var o=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4];this.huffman_init=function(n){for(var e=2;e<=576;e+=2){for(var i=0,v;n.scalefac_band.l[++i]<e;);for(v=Z[i][0];n.scalefac_band.l[v+1]>e;)v--;for(v<0&&(v=Z[i][0]),n.bv_scf[e-2]=v,v=Z[i][1];n.scalefac_band.l[v+n.bv_scf[e-2]+2]>e;)v--;v<0&&(v=Z[i][1]),n.bv_scf[e-1]=v}}}K0.STEPS_per_dB=100,K0.MAX_dB=120,K0.GAIN_NOT_ENOUGH_SAMPLES=-24601,K0.GAIN_ANALYSIS_ERROR=0,K0.GAIN_ANALYSIS_OK=1,K0.INIT_GAIN_ANALYSIS_ERROR=0,K0.INIT_GAIN_ANALYSIS_OK=1,K0.YULE_ORDER=10,K0.MAX_ORDER=K0.YULE_ORDER,K0.MAX_SAMP_FREQ=48e3,K0.RMS_WINDOW_TIME_NUMERATOR=1,K0.RMS_WINDOW_TIME_DENOMINATOR=20,K0.MAX_SAMPLES_PER_WINDOW=K0.MAX_SAMP_FREQ*K0.RMS_WINDOW_TIME_NUMERATOR/K0.RMS_WINDOW_TIME_DENOMINATOR+1;function K0(){}function Ke(){function m(w,C,G,E,L,a,M,X,B,_,S,u,x,R,t){this.vbr_q=w,this.quant_comp=C,this.quant_comp_s=G,this.expY=E,this.st_lrm=L,this.st_s=a,this.masking_adj=M,this.masking_adj_short=X,this.ath_lower=B,this.ath_curve=_,this.ath_sensitivity=S,this.interch=u,this.safejoint=x,this.sfb21mod=R,this.msfix=t}function V(w,C,G,E,L,a,M,X,B,_,S,u,x,R){this.quant_comp=C,this.quant_comp_s=G,this.safejoint=E,this.nsmsfix=L,this.st_lrm=a,this.st_s=M,this.nsbass=X,this.scale=B,this.masking_adj=_,this.ath_lower=S,this.ath_curve=u,this.interch=x,this.sfscale=R}var Z;this.setModules=function(w){Z=w};var k=[new m(0,9,9,0,5.2,125,-4.2,-6.3,4.8,1,0,0,2,21,.97),new m(1,9,9,0,5.3,125,-3.6,-5.6,4.5,1.5,0,0,2,21,1.35),new m(2,9,9,0,5.6,125,-2.2,-3.5,2.8,2,0,0,2,21,1.49),new m(3,9,9,1,5.8,130,-1.8,-2.8,2.6,3,-4,0,2,20,1.64),new m(4,9,9,1,6,135,-.7,-1.1,1.1,3.5,-8,0,2,0,1.79),new m(5,9,9,1,6.4,140,.5,.4,-7.5,4,-12,2e-4,0,0,1.95),new m(6,9,9,1,6.6,145,.67,.65,-14.7,6.5,-19,4e-4,0,0,2.3),new m(7,9,9,1,6.6,145,.8,.75,-19.7,8,-22,6e-4,0,0,2.7),new m(8,9,9,1,6.6,145,1.2,1.15,-27.5,10,-23,7e-4,0,0,0),new m(9,9,9,1,6.6,145,1.6,1.6,-36,11,-25,8e-4,0,0,0),new m(10,9,9,1,6.6,145,2,2,-36,12,-25,8e-4,0,0,0)],i0=[new m(0,9,9,0,4.2,25,-7,-4,7.5,1,0,0,2,26,.97),new m(1,9,9,0,4.2,25,-5.6,-3.6,4.5,1.5,0,0,2,21,1.35),new m(2,9,9,0,4.2,25,-4.4,-1.8,2,2,0,0,2,18,1.49),new m(3,9,9,1,4.2,25,-3.4,-1.25,1.1,3,-4,0,2,15,1.64),new m(4,9,9,1,4.2,25,-2.2,.1,0,3.5,-8,0,2,0,1.79),new m(5,9,9,1,4.2,25,-1,1.65,-7.7,4,-12,2e-4,0,0,1.95),new m(6,9,9,1,4.2,25,-0,2.47,-7.7,6.5,-19,4e-4,0,0,2),new m(7,9,9,1,4.2,25,.5,2,-14.5,8,-22,6e-4,0,0,2),new m(8,9,9,1,4.2,25,1,2.4,-22,10,-23,7e-4,0,0,2),new m(9,9,9,1,4.2,25,1.5,2.95,-30,11,-25,8e-4,0,0,2),new m(10,9,9,1,4.2,25,2,2.95,-36,12,-30,8e-4,0,0,2)];function N(w,C,G){var E=w.VBR==m0.vbr_rh?k:i0,L=w.VBR_q_frac,a=E[C],M=E[C+1],X=a;a.st_lrm=a.st_lrm+L*(M.st_lrm-a.st_lrm),a.st_s=a.st_s+L*(M.st_s-a.st_s),a.masking_adj=a.masking_adj+L*(M.masking_adj-a.masking_adj),a.masking_adj_short=a.masking_adj_short+L*(M.masking_adj_short-a.masking_adj_short),a.ath_lower=a.ath_lower+L*(M.ath_lower-a.ath_lower),a.ath_curve=a.ath_curve+L*(M.ath_curve-a.ath_curve),a.ath_sensitivity=a.ath_sensitivity+L*(M.ath_sensitivity-a.ath_sensitivity),a.interch=a.interch+L*(M.interch-a.interch),a.msfix=a.msfix+L*(M.msfix-a.msfix),v0(w,X.vbr_q),G!=0?w.quant_comp=X.quant_comp:Math.abs(w.quant_comp- -1)>0||(w.quant_comp=X.quant_comp),G!=0?w.quant_comp_short=X.quant_comp_s:Math.abs(w.quant_comp_short- -1)>0||(w.quant_comp_short=X.quant_comp_s),X.expY!=0&&(w.experimentalY=X.expY!=0),G!=0?w.internal_flags.nsPsy.attackthre=X.st_lrm:Math.abs(w.internal_flags.nsPsy.attackthre- -1)>0||(w.internal_flags.nsPsy.attackthre=X.st_lrm),G!=0?w.internal_flags.nsPsy.attackthre_s=X.st_s:Math.abs(w.internal_flags.nsPsy.attackthre_s- -1)>0||(w.internal_flags.nsPsy.attackthre_s=X.st_s),G!=0?w.maskingadjust=X.masking_adj:Math.abs(w.maskingadjust-0)>0||(w.maskingadjust=X.masking_adj),G!=0?w.maskingadjust_short=X.masking_adj_short:Math.abs(w.maskingadjust_short-0)>0||(w.maskingadjust_short=X.masking_adj_short),G!=0?w.ATHlower=-X.ath_lower/10:Math.abs(-w.ATHlower*10-0)>0||(w.ATHlower=-X.ath_lower/10),G!=0?w.ATHcurve=X.ath_curve:Math.abs(w.ATHcurve- -1)>0||(w.ATHcurve=X.ath_curve),G!=0?w.athaa_sensitivity=X.ath_sensitivity:Math.abs(w.athaa_sensitivity- -1)>0||(w.athaa_sensitivity=X.ath_sensitivity),X.interch>0&&(G!=0?w.interChRatio=X.interch:Math.abs(w.interChRatio- -1)>0||(w.interChRatio=X.interch)),X.safejoint>0&&(w.exp_nspsytune=w.exp_nspsytune|X.safejoint),X.sfb21mod>0&&(w.exp_nspsytune=w.exp_nspsytune|X.sfb21mod<<20),G!=0?w.msfix=X.msfix:Math.abs(w.msfix- -1)>0||(w.msfix=X.msfix),G==0&&(w.VBR_q=C,w.VBR_q_frac=L)}var J=[new V(8,9,9,0,0,6.6,145,0,.95,0,-30,11,.0012,1),new V(16,9,9,0,0,6.6,145,0,.95,0,-25,11,.001,1),new V(24,9,9,0,0,6.6,145,0,.95,0,-20,11,.001,1),new V(32,9,9,0,0,6.6,145,0,.95,0,-15,11,.001,1),new V(40,9,9,0,0,6.6,145,0,.95,0,-10,11,9e-4,1),new V(48,9,9,0,0,6.6,145,0,.95,0,-10,11,9e-4,1),new V(56,9,9,0,0,6.6,145,0,.95,0,-6,11,8e-4,1),new V(64,9,9,0,0,6.6,145,0,.95,0,-2,11,8e-4,1),new V(80,9,9,0,0,6.6,145,0,.95,0,0,8,7e-4,1),new V(96,9,9,0,2.5,6.6,145,0,.95,0,1,5.5,6e-4,1),new V(112,9,9,0,2.25,6.6,145,0,.95,0,2,4.5,5e-4,1),new V(128,9,9,0,1.95,6.4,140,0,.95,0,3,4,2e-4,1),new V(160,9,9,1,1.79,6,135,0,.95,-2,5,3.5,0,1),new V(192,9,9,1,1.49,5.6,125,0,.97,-4,7,3,0,0),new V(224,9,9,1,1.25,5.2,125,0,.98,-6,9,2,0,0),new V(256,9,9,1,.97,5.2,125,0,1,-8,10,1,0,0),new V(320,9,9,1,.9,5.2,125,0,1,-10,12,0,0,0)];function s0(w,C,G){var E=C,L=Z.nearestBitrateFullIndex(C);if(w.VBR=m0.vbr_abr,w.VBR_mean_bitrate_kbps=E,w.VBR_mean_bitrate_kbps=Math.min(w.VBR_mean_bitrate_kbps,320),w.VBR_mean_bitrate_kbps=Math.max(w.VBR_mean_bitrate_kbps,8),w.brate=w.VBR_mean_bitrate_kbps,w.VBR_mean_bitrate_kbps>320&&(w.disable_reservoir=!0),J[L].safejoint>0&&(w.exp_nspsytune=w.exp_nspsytune|2),J[L].sfscale>0&&(w.internal_flags.noise_shaping=2),Math.abs(J[L].nsbass)>0){var a=int(J[L].nsbass*4);a<0&&(a+=64),w.exp_nspsytune=w.exp_nspsytune|a<<2}return G!=0?w.quant_comp=J[L].quant_comp:Math.abs(w.quant_comp- -1)>0||(w.quant_comp=J[L].quant_comp),G!=0?w.quant_comp_short=J[L].quant_comp_s:Math.abs(w.quant_comp_short- -1)>0||(w.quant_comp_short=J[L].quant_comp_s),G!=0?w.msfix=J[L].nsmsfix:Math.abs(w.msfix- -1)>0||(w.msfix=J[L].nsmsfix),G!=0?w.internal_flags.nsPsy.attackthre=J[L].st_lrm:Math.abs(w.internal_flags.nsPsy.attackthre- -1)>0||(w.internal_flags.nsPsy.attackthre=J[L].st_lrm),G!=0?w.internal_flags.nsPsy.attackthre_s=J[L].st_s:Math.abs(w.internal_flags.nsPsy.attackthre_s- -1)>0||(w.internal_flags.nsPsy.attackthre_s=J[L].st_s),G!=0?w.scale=J[L].scale:Math.abs(w.scale- -1)>0||(w.scale=J[L].scale),G!=0?w.maskingadjust=J[L].masking_adj:Math.abs(w.maskingadjust-0)>0||(w.maskingadjust=J[L].masking_adj),J[L].masking_adj>0?G!=0?w.maskingadjust_short=J[L].masking_adj*.9:Math.abs(w.maskingadjust_short-0)>0||(w.maskingadjust_short=J[L].masking_adj*.9):G!=0?w.maskingadjust_short=J[L].masking_adj*1.1:Math.abs(w.maskingadjust_short-0)>0||(w.maskingadjust_short=J[L].masking_adj*1.1),G!=0?w.ATHlower=-J[L].ath_lower/10:Math.abs(-w.ATHlower*10-0)>0||(w.ATHlower=-J[L].ath_lower/10),G!=0?w.ATHcurve=J[L].ath_curve:Math.abs(w.ATHcurve- -1)>0||(w.ATHcurve=J[L].ath_curve),G!=0?w.interChRatio=J[L].interch:Math.abs(w.interChRatio- -1)>0||(w.interChRatio=J[L].interch),C}this.apply_preset=function(w,C,G){switch(C){case S0.R3MIX:{C=S0.V3,w.VBR=m0.vbr_mtrh;break}case S0.MEDIUM:{C=S0.V4,w.VBR=m0.vbr_rh;break}case S0.MEDIUM_FAST:{C=S0.V4,w.VBR=m0.vbr_mtrh;break}case S0.STANDARD:{C=S0.V2,w.VBR=m0.vbr_rh;break}case S0.STANDARD_FAST:{C=S0.V2,w.VBR=m0.vbr_mtrh;break}case S0.EXTREME:{C=S0.V0,w.VBR=m0.vbr_rh;break}case S0.EXTREME_FAST:{C=S0.V0,w.VBR=m0.vbr_mtrh;break}case S0.INSANE:return C=320,w.preset=C,s0(w,C,G),w.VBR=m0.vbr_off,C}switch(w.preset=C,C){case S0.V9:return N(w,9,G),C;case S0.V8:return N(w,8,G),C;case S0.V7:return N(w,7,G),C;case S0.V6:return N(w,6,G),C;case S0.V5:return N(w,5,G),C;case S0.V4:return N(w,4,G),C;case S0.V3:return N(w,3,G),C;case S0.V2:return N(w,2,G),C;case S0.V1:return N(w,1,G),C;case S0.V0:return N(w,0,G),C;default:break}return 8<=C&&C<=320?s0(w,C,G):(w.preset=0,C)};function v0(w,C){var G=0;return 0>C&&(G=-1,C=0),9<C&&(G=-1,C=9),w.VBR_q=C,w.VBR_q_frac=0,G}}function a1(){var m;this.setModules=function(V){m=V},this.ResvFrameBegin=function(V,Z){var k=V.internal_flags,i0,N=k.l3_side,J=m.getframebits(V);Z.bits=(J-k.sideinfo_len*8)/k.mode_gr;var s0=8*256*k.mode_gr-8;V.brate>320?i0=8*int(V.brate*1e3/(V.out_samplerate/1152)/8+.5):(i0=8*1440,V.strict_ISO&&(i0=8*int(32e4/(V.out_samplerate/1152)/8+.5))),k.ResvMax=i0-J,k.ResvMax>s0&&(k.ResvMax=s0),(k.ResvMax<0||V.disable_reservoir)&&(k.ResvMax=0);var v0=Z.bits*k.mode_gr+Math.min(k.ResvSize,k.ResvMax);return v0>i0&&(v0=i0),N.resvDrain_pre=0,k.pinfo!=null&&(k.pinfo.mean_bits=Z.bits/2,k.pinfo.resvsize=k.ResvSize),v0},this.ResvMaxBits=function(V,Z,k,i0){var N=V.internal_flags,J,s0=N.ResvSize,v0=N.ResvMax;i0!=0&&(s0+=Z),N.substep_shaping&1&&(v0*=.9),k.bits=Z,s0*10>v0*9?(J=s0-v0*9/10,k.bits+=J,N.substep_shaping|=128):(J=0,N.substep_shaping&=127,!V.disable_reservoir&&!(N.substep_shaping&1)&&(k.bits-=.1*Z));var w=s0<N.ResvMax*6/10?s0:N.ResvMax*6/10;return w-=J,w<0&&(w=0),w},this.ResvAdjust=function(V,Z){V.ResvSize-=Z.part2_3_length+Z.part2_length},this.ResvFrameEnd=function(V,Z){var k,i0=V.l3_side;V.ResvSize+=Z*V.mode_gr;var N=0;i0.resvDrain_post=0,i0.resvDrain_pre=0,(k=V.ResvSize%8)!=0&&(N+=k),k=V.ResvSize-N-V.ResvMax,k>0&&(N+=k);{var J=Math.min(i0.main_data_begin*8,N)/8;i0.resvDrain_pre+=8*J,N-=8*J,V.ResvSize-=8*J,i0.main_data_begin-=J}i0.resvDrain_post+=N,V.ResvSize-=N}}Ue.NUMTOCENTRIES=100,Ue.MAXFRAMESIZE=2880;function Ue(){var m,V,Z;this.setModules=function(N,J,s0){m=N,V=J,Z=s0};var k=[0,49345,49537,320,49921,960,640,49729,50689,1728,1920,51009,1280,50625,50305,1088,52225,3264,3456,52545,3840,53185,52865,3648,2560,51905,52097,2880,51457,2496,2176,51265,55297,6336,6528,55617,6912,56257,55937,6720,7680,57025,57217,8e3,56577,7616,7296,56385,5120,54465,54657,5440,55041,6080,5760,54849,53761,4800,4992,54081,4352,53697,53377,4160,61441,12480,12672,61761,13056,62401,62081,12864,13824,63169,63361,14144,62721,13760,13440,62529,15360,64705,64897,15680,65281,16320,16e3,65089,64001,15040,15232,64321,14592,63937,63617,14400,10240,59585,59777,10560,60161,11200,10880,59969,60929,11968,12160,61249,11520,60865,60545,11328,58369,9408,9600,58689,9984,59329,59009,9792,8704,58049,58241,9024,57601,8640,8320,57409,40961,24768,24960,41281,25344,41921,41601,25152,26112,42689,42881,26432,42241,26048,25728,42049,27648,44225,44417,27968,44801,28608,28288,44609,43521,27328,27520,43841,26880,43457,43137,26688,30720,47297,47489,31040,47873,31680,31360,47681,48641,32448,32640,48961,32e3,48577,48257,31808,46081,29888,30080,46401,30464,47041,46721,30272,29184,45761,45953,29504,45313,29120,28800,45121,20480,37057,37249,20800,37633,21440,21120,37441,38401,22208,22400,38721,21760,38337,38017,21568,39937,23744,23936,40257,24320,40897,40577,24128,23040,39617,39809,23360,39169,22976,22656,38977,34817,18624,18816,35137,19200,35777,35457,19008,19968,36545,36737,20288,36097,19904,19584,35905,17408,33985,34177,17728,34561,18368,18048,34369,33281,17088,17280,33601,16640,33217,32897,16448];function i0(N,J){var s0=J^N;return J=J>>8^k[s0&255],J}this.updateMusicCRC=function(N,J,s0,v0){for(var w=0;w<v0;++w)N[0]=i0(J[s0+w],N[0])}}be.EQ=function(m,V){return Math.abs(m)>Math.abs(V)?Math.abs(m-V)<=Math.abs(m)*1e-6:Math.abs(m-V)<=Math.abs(V)*1e-6},be.NEQ=function(m,V){return!be.EQ(m,V)};function be(){var m=this,V=32773,Z=32,k=null,i0=null,N=null,J=null;this.setModules=function(o,n,e,i){k=o,i0=n,N=e,J=i};var s0=null,v0=0,w=0,C=0;this.getframebits=function(o){var n=o.internal_flags,e;n.bitrate_index!=0?e=j.bitrate_table[o.version][n.bitrate_index]:e=o.brate;var i=0|(o.version+1)*72e3*e/o.out_samplerate+n.padding;return 8*i};function G(o){k0.arraycopy(o.header[o.w_ptr].buf,0,s0,w,o.sideinfo_len),w+=o.sideinfo_len,v0+=o.sideinfo_len*8,o.w_ptr=o.w_ptr+1&y0.MAX_HEADER_BUF-1}function E(o,n,e){for(;e>0;){var i;C==0&&(C=8,w++,o.header[o.w_ptr].write_timing==v0&&G(o),s0[w]=0),i=Math.min(e,C),e-=i,C-=i,s0[w]|=n>>e<<C,v0+=i}}function L(o,n,e){for(;e>0;){var i;C==0&&(C=8,w++,s0[w]=0),i=Math.min(e,C),e-=i,C-=i,s0[w]|=n>>e<<C,v0+=i}}function a(o,n){var e=o.internal_flags,i;if(n>=8&&(E(e,76,8),n-=8),n>=8&&(E(e,65,8),n-=8),n>=8&&(E(e,77,8),n-=8),n>=8&&(E(e,69,8),n-=8),n>=32){var v=N.getLameShortVersion();if(n>=32)for(i=0;i<v.length&&n>=8;++i)n-=8,E(e,v.charCodeAt(i),8)}for(;n>=1;n-=1)E(e,e.ancillary_flag,1),e.ancillary_flag^=o.disable_reservoir?0:1}function M(o,n,e){for(var i=o.header[o.h_ptr].ptr;e>0;){var v=Math.min(e,8-(i&7));e-=v,o.header[o.h_ptr].buf[i>>3]|=n>>e<<8-(i&7)-v,i+=v}o.header[o.h_ptr].ptr=i}function X(o,n){o<<=8;for(var e=0;e<8;e++)o<<=1,n<<=1,(n^o)&65536&&(n^=V);return n}this.CRC_writeheader=function(o,n){var e=65535;e=X(n[2]&255,e),e=X(n[3]&255,e);for(var i=6;i<o.sideinfo_len;i++)e=X(n[i]&255,e);n[4]=byte(e>>8),n[5]=byte(e&255)};function B(o,n){var e=o.internal_flags,i,v,f;if(i=e.l3_side,e.header[e.h_ptr].ptr=0,G0.fill(e.header[e.h_ptr].buf,0,e.sideinfo_len,0),o.out_samplerate<16e3?M(e,4094,12):M(e,4095,12),M(e,o.version,1),M(e,4-3,2),M(e,o.error_protection?0:1,1),M(e,e.bitrate_index,4),M(e,e.samplerate_index,2),M(e,e.padding,1),M(e,o.extension,1),M(e,o.mode.ordinal(),2),M(e,e.mode_ext,2),M(e,o.copyright,1),M(e,o.original,1),M(e,o.emphasis,2),o.error_protection&&M(e,0,16),o.version==1){for(M(e,i.main_data_begin,9),e.channels_out==2?M(e,i.private_bits,3):M(e,i.private_bits,5),f=0;f<e.channels_out;f++){var d;for(d=0;d<4;d++)M(e,i.scfsi[f][d],1)}for(v=0;v<2;v++)for(f=0;f<e.channels_out;f++){var b=i.tt[v][f];M(e,b.part2_3_length+b.part2_length,12),M(e,b.big_values/2,9),M(e,b.global_gain,8),M(e,b.scalefac_compress,4),b.block_type!=l.NORM_TYPE?(M(e,1,1),M(e,b.block_type,2),M(e,b.mixed_block_flag,1),b.table_select[0]==14&&(b.table_select[0]=16),M(e,b.table_select[0],5),b.table_select[1]==14&&(b.table_select[1]=16),M(e,b.table_select[1],5),M(e,b.subblock_gain[0],3),M(e,b.subblock_gain[1],3),M(e,b.subblock_gain[2],3)):(M(e,0,1),b.table_select[0]==14&&(b.table_select[0]=16),M(e,b.table_select[0],5),b.table_select[1]==14&&(b.table_select[1]=16),M(e,b.table_select[1],5),b.table_select[2]==14&&(b.table_select[2]=16),M(e,b.table_select[2],5),M(e,b.region0_count,4),M(e,b.region1_count,3)),M(e,b.preflag,1),M(e,b.scalefac_scale,1),M(e,b.count1table_select,1)}}else for(M(e,i.main_data_begin,8),M(e,i.private_bits,e.channels_out),v=0,f=0;f<e.channels_out;f++){var b=i.tt[v][f];M(e,b.part2_3_length+b.part2_length,12),M(e,b.big_values/2,9),M(e,b.global_gain,8),M(e,b.scalefac_compress,9),b.block_type!=l.NORM_TYPE?(M(e,1,1),M(e,b.block_type,2),M(e,b.mixed_block_flag,1),b.table_select[0]==14&&(b.table_select[0]=16),M(e,b.table_select[0],5),b.table_select[1]==14&&(b.table_select[1]=16),M(e,b.table_select[1],5),M(e,b.subblock_gain[0],3),M(e,b.subblock_gain[1],3),M(e,b.subblock_gain[2],3)):(M(e,0,1),b.table_select[0]==14&&(b.table_select[0]=16),M(e,b.table_select[0],5),b.table_select[1]==14&&(b.table_select[1]=16),M(e,b.table_select[1],5),b.table_select[2]==14&&(b.table_select[2]=16),M(e,b.table_select[2],5),M(e,b.region0_count,4),M(e,b.region1_count,3)),M(e,b.scalefac_scale,1),M(e,b.count1table_select,1)}o.error_protection&&CRC_writeheader(e,e.header[e.h_ptr].buf);{var z=e.h_ptr;e.h_ptr=z+1&y0.MAX_HEADER_BUF-1,e.header[e.h_ptr].write_timing=e.header[z].write_timing+n,e.h_ptr==e.w_ptr&&k0.err.println(`Error: MAX_HEADER_BUF too small in bitstream.c 
`)}}function _(o,n){var e=j.ht[n.count1table_select+32],i,v=0,f=n.big_values,d=n.big_values;for(i=(n.count1-n.big_values)/4;i>0;--i){var b=0,z=0,I;I=n.l3_enc[f+0],I!=0&&(z+=8,n.xr[d+0]<0&&b++),I=n.l3_enc[f+1],I!=0&&(z+=4,b*=2,n.xr[d+1]<0&&b++),I=n.l3_enc[f+2],I!=0&&(z+=2,b*=2,n.xr[d+2]<0&&b++),I=n.l3_enc[f+3],I!=0&&(z++,b*=2,n.xr[d+3]<0&&b++),f+=4,d+=4,E(o,b+e.table[z],e.hlen[z]),v+=e.hlen[z]}return v}function S(o,n,e,i,v){var f=j.ht[n],d=0;if(n==0)return d;for(var b=e;b<i;b+=2){var z=0,I=0,U=f.xlen,_0=f.xlen,r=0,s=v.l3_enc[b],g=v.l3_enc[b+1];if(s!=0&&(v.xr[b]<0&&r++,z--),n>15){if(s>14){var a0=s-15;r|=a0<<1,I=U,s=15}if(g>14){var u0=g-15;r<<=U,r|=u0,I+=U,g=15}_0=16}g!=0&&(r<<=1,v.xr[b+1]<0&&r++,z--),s=s*_0+g,I-=z,z+=f.hlen[s],E(o,f.table[s],z),E(o,r,I),d+=z+I}return d}function u(o,n){var e=3*o.scalefac_band.s[3];e>n.big_values&&(e=n.big_values);var i=S(o,n.table_select[0],0,e,n);return i+=S(o,n.table_select[1],e,n.big_values,n),i}function x(o,n){var e,i,v,f;e=n.big_values;var d=n.region0_count+1;return v=o.scalefac_band.l[d],d+=n.region1_count+1,f=o.scalefac_band.l[d],v>e&&(v=e),f>e&&(f=e),i=S(o,n.table_select[0],0,v,n),i+=S(o,n.table_select[1],v,f,n),i+=S(o,n.table_select[2],f,e,n),i}function R(o){var n,e,i,v,f=0,d=o.internal_flags,b=d.l3_side;if(o.version==1)for(n=0;n<2;n++)for(e=0;e<d.channels_out;e++){var z=b.tt[n][e],I=Oe.slen1_tab[z.scalefac_compress],U=Oe.slen2_tab[z.scalefac_compress];for(v=0,i=0;i<z.sfbdivide;i++)z.scalefac[i]!=-1&&(E(d,z.scalefac[i],I),v+=I);for(;i<z.sfbmax;i++)z.scalefac[i]!=-1&&(E(d,z.scalefac[i],U),v+=U);z.block_type==l.SHORT_TYPE?v+=u(d,z):v+=x(d,z),v+=_(d,z),f+=v}else for(n=0,e=0;e<d.channels_out;e++){var z=b.tt[n][e],_0,r,s=0;if(v=0,i=0,r=0,z.block_type==l.SHORT_TYPE){for(;r<4;r++){var g=z.sfb_partition_table[r]/3,a0=z.slen[r];for(_0=0;_0<g;_0++,i++)E(d,Math.max(z.scalefac[i*3+0],0),a0),E(d,Math.max(z.scalefac[i*3+1],0),a0),E(d,Math.max(z.scalefac[i*3+2],0),a0),s+=3*a0}v+=u(d,z)}else{for(;r<4;r++){var g=z.sfb_partition_table[r],a0=z.slen[r];for(_0=0;_0<g;_0++,i++)E(d,Math.max(z.scalefac[i],0),a0),s+=a0}v+=x(d,z)}v+=_(d,z),f+=s+v}return f}function t(){this.total=0}function y(o,n){var e=o.internal_flags,i,v,f,d,b;return b=e.w_ptr,d=e.h_ptr-1,d==-1&&(d=y0.MAX_HEADER_BUF-1),i=e.header[d].write_timing-v0,n.total=i,i>=0&&(v=1+d-b,d<b&&(v=1+d-b+y0.MAX_HEADER_BUF),i-=v*8*e.sideinfo_len),f=m.getframebits(o),i+=f,n.total+=f,n.total%8!=0?n.total=1+n.total/8:n.total=n.total/8,n.total+=w+1,i<0&&k0.err.println(`strange error flushing buffer ... 
`),i}this.flush_bitstream=function(o){var n=o.internal_flags,e,i,v=n.h_ptr-1;if(v==-1&&(v=y0.MAX_HEADER_BUF-1),e=n.l3_side,!((i=y(o,new t))<0)){if(a(o,i),n.ResvSize=0,e.main_data_begin=0,n.findReplayGain){var f=k.GetTitleGain(n.rgdata);n.RadioGain=Math.floor(f*10+.5)|0}n.findPeakSample&&(n.noclipGainChange=Math.ceil(Me(n.PeakSample/32767)*20*10)|0,n.noclipGainChange>0&&(EQ(o.scale,1)||EQ(o.scale,0))?n.noclipScale=Math.floor(32767/n.PeakSample*100)/100:n.noclipScale=-1)}},this.add_dummy_byte=function(o,n,e){for(var i=o.internal_flags,v;e-- >0;)for(L(i,n,8),v=0;v<y0.MAX_HEADER_BUF;++v)i.header[v].write_timing+=8},this.format_bitstream=function(o){var n=o.internal_flags,e;e=n.l3_side;var i=this.getframebits(o);a(o,e.resvDrain_pre),B(o,i);var v=8*n.sideinfo_len;if(v+=R(o),a(o,e.resvDrain_post),v+=e.resvDrain_post,e.main_data_begin+=(i-v)/8,y(o,new t)!=n.ResvSize&&k0.err.println("Internal buffer inconsistency. flushbits <> ResvSize"),e.main_data_begin*8!=n.ResvSize&&(k0.err.printf(`bit reservoir error: 
l3_side.main_data_begin: %d 
Resvoir size:             %d 
resv drain (post)         %d 
resv drain (pre)          %d 
header and sideinfo:      %d 
data bits:                %d 
total bits:               %d (remainder: %d) 
bitsperframe:             %d 
`,8*e.main_data_begin,n.ResvSize,e.resvDrain_post,e.resvDrain_pre,8*n.sideinfo_len,v-e.resvDrain_post-8*n.sideinfo_len,v,v%8,i),k0.err.println("This is a fatal error.  It has several possible causes:"),k0.err.println("90%%  LAME compiled with buggy version of gcc using advanced optimizations"),k0.err.println(" 9%%  Your system is overclocked"),k0.err.println(" 1%%  bug in LAME encoding library"),n.ResvSize=e.main_data_begin*8),v0>1e9){var f;for(f=0;f<y0.MAX_HEADER_BUF;++f)n.header[f].write_timing-=v0;v0=0}return 0},this.copy_buffer=function(o,n,e,i,v){var f=w+1;if(f<=0)return 0;if(i!=0&&f>i)return-1;if(k0.arraycopy(s0,0,n,e,f),w=-1,C=0,v!=0){var d=w0(1);if(d[0]=o.nMusicCRC,J.updateMusicCRC(d,n,e,f),o.nMusicCRC=d[0],f>0&&(o.VBR_seek_table.nBytesWritten+=f),o.decode_on_the_fly){for(var b=T0([2,1152]),z=f,I=-1,U;I!=0;)if(I=i0.hip_decode1_unclipped(o.hip,n,e,z,b[0],b[1]),z=0,I==-1&&(I=0),I>0){if(o.findPeakSample){for(U=0;U<I;U++)b[0][U]>o.PeakSample?o.PeakSample=b[0][U]:-b[0][U]>o.PeakSample&&(o.PeakSample=-b[0][U]);if(o.channels_out>1)for(U=0;U<I;U++)b[1][U]>o.PeakSample?o.PeakSample=b[1][U]:-b[1][U]>o.PeakSample&&(o.PeakSample=-b[1][U])}if(o.findReplayGain&&k.AnalyzeSamples(o.rgdata,b[0],0,b[1],0,I,o.channels_out)==K0.GAIN_ANALYSIS_ERROR)return-6}}}return f},this.init_bit_stream_w=function(o){s0=we(S0.LAME_MAXMP3BUFFER),o.h_ptr=o.w_ptr=0,o.header[o.h_ptr].write_timing=0,w=-1,C=0,v0=0}}function P0(m,V,Z,k){this.xlen=m,this.linmax=V,this.table=Z,this.hlen=k}var j={};j.t1HB=[1,1,1,0],j.t2HB=[1,2,1,3,1,1,3,2,0],j.t3HB=[3,2,1,1,1,1,3,2,0],j.t5HB=[1,2,6,5,3,1,4,4,7,5,7,1,6,1,1,0],j.t6HB=[7,3,5,1,6,2,3,2,5,4,4,1,3,3,2,0],j.t7HB=[1,2,10,19,16,10,3,3,7,10,5,3,11,4,13,17,8,4,12,11,18,15,11,2,7,6,9,14,3,1,6,4,5,3,2,0],j.t8HB=[3,4,6,18,12,5,5,1,2,16,9,3,7,3,5,14,7,3,19,17,15,13,10,4,13,5,8,11,5,1,12,4,4,1,1,0],j.t9HB=[7,5,9,14,15,7,6,4,5,5,6,7,7,6,8,8,8,5,15,6,9,10,5,1,11,7,9,6,4,1,14,4,6,2,6,0],j.t10HB=[1,2,10,23,35,30,12,17,3,3,8,12,18,21,12,7,11,9,15,21,32,40,19,6,14,13,22,34,46,23,18,7,20,19,33,47,27,22,9,3,31,22,41,26,21,20,5,3,14,13,10,11,16,6,5,1,9,8,7,8,4,4,2,0],j.t11HB=[3,4,10,24,34,33,21,15,5,3,4,10,32,17,11,10,11,7,13,18,30,31,20,5,25,11,19,59,27,18,12,5,35,33,31,58,30,16,7,5,28,26,32,19,17,15,8,14,14,12,9,13,14,9,4,1,11,4,6,6,6,3,2,0],j.t12HB=[9,6,16,33,41,39,38,26,7,5,6,9,23,16,26,11,17,7,11,14,21,30,10,7,17,10,15,12,18,28,14,5,32,13,22,19,18,16,9,5,40,17,31,29,17,13,4,2,27,12,11,15,10,7,4,1,27,12,8,12,6,3,1,0],j.t13HB=[1,5,14,21,34,51,46,71,42,52,68,52,67,44,43,19,3,4,12,19,31,26,44,33,31,24,32,24,31,35,22,14,15,13,23,36,59,49,77,65,29,40,30,40,27,33,42,16,22,20,37,61,56,79,73,64,43,76,56,37,26,31,25,14,35,16,60,57,97,75,114,91,54,73,55,41,48,53,23,24,58,27,50,96,76,70,93,84,77,58,79,29,74,49,41,17,47,45,78,74,115,94,90,79,69,83,71,50,59,38,36,15,72,34,56,95,92,85,91,90,86,73,77,65,51,44,43,42,43,20,30,44,55,78,72,87,78,61,46,54,37,30,20,16,53,25,41,37,44,59,54,81,66,76,57,54,37,18,39,11,35,33,31,57,42,82,72,80,47,58,55,21,22,26,38,22,53,25,23,38,70,60,51,36,55,26,34,23,27,14,9,7,34,32,28,39,49,75,30,52,48,40,52,28,18,17,9,5,45,21,34,64,56,50,49,45,31,19,12,15,10,7,6,3,48,23,20,39,36,35,53,21,16,23,13,10,6,1,4,2,16,15,17,27,25,20,29,11,17,12,16,8,1,1,0,1],j.t15HB=[7,12,18,53,47,76,124,108,89,123,108,119,107,81,122,63,13,5,16,27,46,36,61,51,42,70,52,83,65,41,59,36,19,17,15,24,41,34,59,48,40,64,50,78,62,80,56,33,29,28,25,43,39,63,55,93,76,59,93,72,54,75,50,29,52,22,42,40,67,57,95,79,72,57,89,69,49,66,46,27,77,37,35,66,58,52,91,74,62,48,79,63,90,62,40,38,125,32,60,56,50,92,78,65,55,87,71,51,73,51,70,30,109,53,49,94,88,75,66,122,91,73,56,42,64,44,21,25,90,43,41,77,73,63,56,92,77,66,47,67,48,53,36,20,71,34,67,60,58,49,88,76,67,106,71,54,38,39,23,15,109,53,51,47,90,82,58,57,48,72,57,41,23,27,62,9,86,42,40,37,70,64,52,43,70,55,42,25,29,18,11,11,118,68,30,55,50,46,74,65,49,39,24,16,22,13,14,7,91,44,39,38,34,63,52,45,31,52,28,19,14,8,9,3,123,60,58,53,47,43,32,22,37,24,17,12,15,10,2,1,71,37,34,30,28,20,17,26,21,16,10,6,8,6,2,0],j.t16HB=[1,5,14,44,74,63,110,93,172,149,138,242,225,195,376,17,3,4,12,20,35,62,53,47,83,75,68,119,201,107,207,9,15,13,23,38,67,58,103,90,161,72,127,117,110,209,206,16,45,21,39,69,64,114,99,87,158,140,252,212,199,387,365,26,75,36,68,65,115,101,179,164,155,264,246,226,395,382,362,9,66,30,59,56,102,185,173,265,142,253,232,400,388,378,445,16,111,54,52,100,184,178,160,133,257,244,228,217,385,366,715,10,98,48,91,88,165,157,148,261,248,407,397,372,380,889,884,8,85,84,81,159,156,143,260,249,427,401,392,383,727,713,708,7,154,76,73,141,131,256,245,426,406,394,384,735,359,710,352,11,139,129,67,125,247,233,229,219,393,743,737,720,885,882,439,4,243,120,118,115,227,223,396,746,742,736,721,712,706,223,436,6,202,224,222,218,216,389,386,381,364,888,443,707,440,437,1728,4,747,211,210,208,370,379,734,723,714,1735,883,877,876,3459,865,2,377,369,102,187,726,722,358,711,709,866,1734,871,3458,870,434,0,12,10,7,11,10,17,11,9,13,12,10,7,5,3,1,3],j.t24HB=[15,13,46,80,146,262,248,434,426,669,653,649,621,517,1032,88,14,12,21,38,71,130,122,216,209,198,327,345,319,297,279,42,47,22,41,74,68,128,120,221,207,194,182,340,315,295,541,18,81,39,75,70,134,125,116,220,204,190,178,325,311,293,271,16,147,72,69,135,127,118,112,210,200,188,352,323,306,285,540,14,263,66,129,126,119,114,214,202,192,180,341,317,301,281,262,12,249,123,121,117,113,215,206,195,185,347,330,308,291,272,520,10,435,115,111,109,211,203,196,187,353,332,313,298,283,531,381,17,427,212,208,205,201,193,186,177,169,320,303,286,268,514,377,16,335,199,197,191,189,181,174,333,321,305,289,275,521,379,371,11,668,184,183,179,175,344,331,314,304,290,277,530,383,373,366,10,652,346,171,168,164,318,309,299,287,276,263,513,375,368,362,6,648,322,316,312,307,302,292,284,269,261,512,376,370,364,359,4,620,300,296,294,288,282,273,266,515,380,374,369,365,361,357,2,1033,280,278,274,267,264,259,382,378,372,367,363,360,358,356,0,43,20,19,17,15,13,11,9,7,6,4,7,5,3,1,3],j.t32HB=[1,10,8,20,12,20,16,32,14,12,24,0,28,16,24,16],j.t33HB=[15,28,26,48,22,40,36,64,14,24,20,32,12,16,8,0],j.t1l=[1,4,3,5],j.t2l=[1,4,7,4,5,7,6,7,8],j.t3l=[2,3,7,4,4,7,6,7,8],j.t5l=[1,4,7,8,4,5,8,9,7,8,9,10,8,8,9,10],j.t6l=[3,4,6,8,4,4,6,7,5,6,7,8,7,7,8,9],j.t7l=[1,4,7,9,9,10,4,6,8,9,9,10,7,7,9,10,10,11,8,9,10,11,11,11,8,9,10,11,11,12,9,10,11,12,12,12],j.t8l=[2,4,7,9,9,10,4,4,6,10,10,10,7,6,8,10,10,11,9,10,10,11,11,12,9,9,10,11,12,12,10,10,11,11,13,13],j.t9l=[3,4,6,7,9,10,4,5,6,7,8,10,5,6,7,8,9,10,7,7,8,9,9,10,8,8,9,9,10,11,9,9,10,10,11,11],j.t10l=[1,4,7,9,10,10,10,11,4,6,8,9,10,11,10,10,7,8,9,10,11,12,11,11,8,9,10,11,12,12,11,12,9,10,11,12,12,12,12,12,10,11,12,12,13,13,12,13,9,10,11,12,12,12,13,13,10,10,11,12,12,13,13,13],j.t11l=[2,4,6,8,9,10,9,10,4,5,6,8,10,10,9,10,6,7,8,9,10,11,10,10,8,8,9,11,10,12,10,11,9,10,10,11,11,12,11,12,9,10,11,12,12,13,12,13,9,9,9,10,11,12,12,12,9,9,10,11,12,12,12,12],j.t12l=[4,4,6,8,9,10,10,10,4,5,6,7,9,9,10,10,6,6,7,8,9,10,9,10,7,7,8,8,9,10,10,10,8,8,9,9,10,10,10,11,9,9,10,10,10,11,10,11,9,9,9,10,10,11,11,12,10,10,10,11,11,11,11,12],j.t13l=[1,5,7,8,9,10,10,11,10,11,12,12,13,13,14,14,4,6,8,9,10,10,11,11,11,11,12,12,13,14,14,14,7,8,9,10,11,11,12,12,11,12,12,13,13,14,15,15,8,9,10,11,11,12,12,12,12,13,13,13,13,14,15,15,9,9,11,11,12,12,13,13,12,13,13,14,14,15,15,16,10,10,11,12,12,12,13,13,13,13,14,13,15,15,16,16,10,11,12,12,13,13,13,13,13,14,14,14,15,15,16,16,11,11,12,13,13,13,14,14,14,14,15,15,15,16,18,18,10,10,11,12,12,13,13,14,14,14,14,15,15,16,17,17,11,11,12,12,13,13,13,15,14,15,15,16,16,16,18,17,11,12,12,13,13,14,14,15,14,15,16,15,16,17,18,19,12,12,12,13,14,14,14,14,15,15,15,16,17,17,17,18,12,13,13,14,14,15,14,15,16,16,17,17,17,18,18,18,13,13,14,15,15,15,16,16,16,16,16,17,18,17,18,18,14,14,14,15,15,15,17,16,16,19,17,17,17,19,18,18,13,14,15,16,16,16,17,16,17,17,18,18,21,20,21,18],j.t15l=[3,5,6,8,8,9,10,10,10,11,11,12,12,12,13,14,5,5,7,8,9,9,10,10,10,11,11,12,12,12,13,13,6,7,7,8,9,9,10,10,10,11,11,12,12,13,13,13,7,8,8,9,9,10,10,11,11,11,12,12,12,13,13,13,8,8,9,9,10,10,11,11,11,11,12,12,12,13,13,13,9,9,9,10,10,10,11,11,11,11,12,12,13,13,13,14,10,9,10,10,10,11,11,11,11,12,12,12,13,13,14,14,10,10,10,11,11,11,11,12,12,12,12,12,13,13,13,14,10,10,10,11,11,11,11,12,12,12,12,13,13,14,14,14,10,10,11,11,11,11,12,12,12,13,13,13,13,14,14,14,11,11,11,11,12,12,12,12,12,13,13,13,13,14,15,14,11,11,11,11,12,12,12,12,13,13,13,13,14,14,14,15,12,12,11,12,12,12,13,13,13,13,13,13,14,14,15,15,12,12,12,12,12,13,13,13,13,14,14,14,14,14,15,15,13,13,13,13,13,13,13,13,14,14,14,14,15,15,14,15,13,13,13,13,13,13,13,14,14,14,14,14,15,15,15,15],j.t16_5l=[1,5,7,9,10,10,11,11,12,12,12,13,13,13,14,11,4,6,8,9,10,11,11,11,12,12,12,13,14,13,14,11,7,8,9,10,11,11,12,12,13,12,13,13,13,14,14,12,9,9,10,11,11,12,12,12,13,13,14,14,14,15,15,13,10,10,11,11,12,12,13,13,13,14,14,14,15,15,15,12,10,10,11,11,12,13,13,14,13,14,14,15,15,15,16,13,11,11,11,12,13,13,13,13,14,14,14,14,15,15,16,13,11,11,12,12,13,13,13,14,14,15,15,15,15,17,17,13,11,12,12,13,13,13,14,14,15,15,15,15,16,16,16,13,12,12,12,13,13,14,14,15,15,15,15,16,15,16,15,14,12,13,12,13,14,14,14,14,15,16,16,16,17,17,16,13,13,13,13,13,14,14,15,16,16,16,16,16,16,15,16,14,13,14,14,14,14,15,15,15,15,17,16,16,16,16,18,14,15,14,14,14,15,15,16,16,16,18,17,17,17,19,17,14,14,15,13,14,16,16,15,16,16,17,18,17,19,17,16,14,11,11,11,12,12,13,13,13,14,14,14,14,14,14,14,12],j.t16l=[1,5,7,9,10,10,11,11,12,12,12,13,13,13,14,10,4,6,8,9,10,11,11,11,12,12,12,13,14,13,14,10,7,8,9,10,11,11,12,12,13,12,13,13,13,14,14,11,9,9,10,11,11,12,12,12,13,13,14,14,14,15,15,12,10,10,11,11,12,12,13,13,13,14,14,14,15,15,15,11,10,10,11,11,12,13,13,14,13,14,14,15,15,15,16,12,11,11,11,12,13,13,13,13,14,14,14,14,15,15,16,12,11,11,12,12,13,13,13,14,14,15,15,15,15,17,17,12,11,12,12,13,13,13,14,14,15,15,15,15,16,16,16,12,12,12,12,13,13,14,14,15,15,15,15,16,15,16,15,13,12,13,12,13,14,14,14,14,15,16,16,16,17,17,16,12,13,13,13,13,14,14,15,16,16,16,16,16,16,15,16,13,13,14,14,14,14,15,15,15,15,17,16,16,16,16,18,13,15,14,14,14,15,15,16,16,16,18,17,17,17,19,17,13,14,15,13,14,16,16,15,16,16,17,18,17,19,17,16,13,10,10,10,11,11,12,12,12,13,13,13,13,13,13,13,10],j.t24l=[4,5,7,8,9,10,10,11,11,12,12,12,12,12,13,10,5,6,7,8,9,10,10,11,11,11,12,12,12,12,12,10,7,7,8,9,9,10,10,11,11,11,11,12,12,12,13,9,8,8,9,9,10,10,10,11,11,11,11,12,12,12,12,9,9,9,9,10,10,10,10,11,11,11,12,12,12,12,13,9,10,9,10,10,10,10,11,11,11,11,12,12,12,12,12,9,10,10,10,10,10,11,11,11,11,12,12,12,12,12,13,9,11,10,10,10,11,11,11,11,12,12,12,12,12,13,13,10,11,11,11,11,11,11,11,11,11,12,12,12,12,13,13,10,11,11,11,11,11,11,11,12,12,12,12,12,13,13,13,10,12,11,11,11,11,12,12,12,12,12,12,13,13,13,13,10,12,12,11,11,11,12,12,12,12,12,12,13,13,13,13,10,12,12,12,12,12,12,12,12,12,12,13,13,13,13,13,10,12,12,12,12,12,12,12,12,13,13,13,13,13,13,13,10,13,12,12,12,12,12,12,13,13,13,13,13,13,13,13,10,9,9,9,9,9,9,9,9,9,9,9,10,10,10,10,6],j.t32l=[1+0,4+1,4+1,5+2,4+1,6+2,5+2,6+3,4+1,5+2,5+2,6+3,5+2,6+3,6+3,6+4],j.t33l=[4+0,4+1,4+1,4+2,4+1,4+2,4+2,4+3,4+1,4+2,4+2,4+3,4+2,4+3,4+3,4+4],j.ht=[new P0(0,0,null,null),new P0(2,0,j.t1HB,j.t1l),new P0(3,0,j.t2HB,j.t2l),new P0(3,0,j.t3HB,j.t3l),new P0(0,0,null,null),new P0(4,0,j.t5HB,j.t5l),new P0(4,0,j.t6HB,j.t6l),new P0(6,0,j.t7HB,j.t7l),new P0(6,0,j.t8HB,j.t8l),new P0(6,0,j.t9HB,j.t9l),new P0(8,0,j.t10HB,j.t10l),new P0(8,0,j.t11HB,j.t11l),new P0(8,0,j.t12HB,j.t12l),new P0(16,0,j.t13HB,j.t13l),new P0(0,0,null,j.t16_5l),new P0(16,0,j.t15HB,j.t15l),new P0(1,1,j.t16HB,j.t16l),new P0(2,3,j.t16HB,j.t16l),new P0(3,7,j.t16HB,j.t16l),new P0(4,15,j.t16HB,j.t16l),new P0(6,63,j.t16HB,j.t16l),new P0(8,255,j.t16HB,j.t16l),new P0(10,1023,j.t16HB,j.t16l),new P0(13,8191,j.t16HB,j.t16l),new P0(4,15,j.t24HB,j.t24l),new P0(5,31,j.t24HB,j.t24l),new P0(6,63,j.t24HB,j.t24l),new P0(7,127,j.t24HB,j.t24l),new P0(8,255,j.t24HB,j.t24l),new P0(9,511,j.t24HB,j.t24l),new P0(11,2047,j.t24HB,j.t24l),new P0(13,8191,j.t24HB,j.t24l),new P0(0,0,j.t32HB,j.t32l),new P0(0,0,j.t33HB,j.t33l)],j.largetbl=[65540,327685,458759,589832,655369,655370,720906,720907,786443,786444,786444,851980,851980,851980,917517,655370,262149,393222,524295,589832,655369,720906,720906,720907,786443,786443,786444,851980,917516,851980,917516,655370,458759,524295,589832,655369,720905,720906,786442,786443,851979,786443,851979,851980,851980,917516,917517,720905,589832,589832,655369,720905,720906,786442,786442,786443,851979,851979,917515,917516,917516,983052,983052,786441,655369,655369,720905,720906,786442,786442,851978,851979,851979,917515,917516,917516,983052,983052,983053,720905,655370,655369,720906,720906,786442,851978,851979,917515,851979,917515,917516,983052,983052,983052,1048588,786441,720906,720906,720906,786442,851978,851979,851979,851979,917515,917516,917516,917516,983052,983052,1048589,786441,720907,720906,786442,786442,851979,851979,851979,917515,917516,983052,983052,983052,983052,1114125,1114125,786442,720907,786443,786443,851979,851979,851979,917515,917515,983051,983052,983052,983052,1048588,1048589,1048589,786442,786443,786443,786443,851979,851979,917515,917515,983052,983052,983052,983052,1048588,983053,1048589,983053,851978,786444,851979,786443,851979,917515,917516,917516,917516,983052,1048588,1048588,1048589,1114125,1114125,1048589,786442,851980,851980,851979,851979,917515,917516,983052,1048588,1048588,1048588,1048588,1048589,1048589,983053,1048589,851978,851980,917516,917516,917516,917516,983052,983052,983052,983052,1114124,1048589,1048589,1048589,1048589,1179661,851978,983052,917516,917516,917516,983052,983052,1048588,1048588,1048589,1179661,1114125,1114125,1114125,1245197,1114125,851978,917517,983052,851980,917516,1048588,1048588,983052,1048589,1048589,1114125,1179661,1114125,1245197,1114125,1048589,851978,655369,655369,655369,720905,720905,786441,786441,786441,851977,851977,851977,851978,851978,851978,851978,655366],j.table23=[65538,262147,458759,262148,327684,458759,393222,458759,524296],j.table56=[65539,262148,458758,524296,262148,327684,524294,589831,458757,524294,589831,655368,524295,524295,589832,655369],j.bitrate_table=[[0,8,16,24,32,40,48,56,64,80,96,112,128,144,160,-1],[0,32,40,48,56,64,80,96,112,128,160,192,224,256,320,-1],[0,8,16,24,32,40,48,56,64,-1,-1,-1,-1,-1,-1,-1]],j.samplerate_table=[[22050,24e3,16e3,-1],[44100,48e3,32e3,-1],[11025,12e3,8e3,-1]],j.scfsi_band=[0,6,11,16,21];function ye(m){this.bits=m}function Fe(){this.over_noise=0,this.tot_noise=0,this.max_noise=0,this.over_count=0,this.over_SSD=0,this.bits=0}function s1(){var m,V;this.setModules=function(Z,k){m=Z,V=k}}function Y(){this.useAdjust=0,this.aaSensitivityP=0,this.adjust=0,this.adjustLimit=0,this.decay=0,this.floor=0,this.l=K(l.SBMAX_l),this.s=K(l.SBMAX_s),this.psfb21=K(l.PSFB21),this.psfb12=K(l.PSFB12),this.cb_l=K(l.CBANDS),this.cb_s=K(l.CBANDS),this.eql_w=K(l.BLKSIZE/2)}function Q(){this.class_id=0,this.num_samples=0,this.num_channels=0,this.in_samplerate=0,this.out_samplerate=0,this.scale=0,this.scale_left=0,this.scale_right=0,this.analysis=!1,this.bWriteVbrTag=!1,this.decode_only=!1,this.quality=0,this.mode=$0.STEREO,this.force_ms=!1,this.free_format=!1,this.findReplayGain=!1,this.decode_on_the_fly=!1,this.write_id3tag_automatic=!1,this.brate=0,this.compression_ratio=0,this.copyright=0,this.original=0,this.extension=0,this.emphasis=0,this.error_protection=0,this.strict_ISO=!1,this.disable_reservoir=!1,this.quant_comp=0,this.quant_comp_short=0,this.experimentalY=!1,this.experimentalZ=0,this.exp_nspsytune=0,this.preset=0,this.VBR=null,this.VBR_q_frac=0,this.VBR_q=0,this.VBR_mean_bitrate_kbps=0,this.VBR_min_bitrate_kbps=0,this.VBR_max_bitrate_kbps=0,this.VBR_hard_min=0,this.lowpassfreq=0,this.highpassfreq=0,this.lowpasswidth=0,this.highpasswidth=0,this.maskingadjust=0,this.maskingadjust_short=0,this.ATHonly=!1,this.ATHshort=!1,this.noATH=!1,this.ATHtype=0,this.ATHcurve=0,this.ATHlower=0,this.athaa_type=0,this.athaa_loudapprox=0,this.athaa_sensitivity=0,this.short_blocks=null,this.useTemporal=!1,this.interChRatio=0,this.msfix=0,this.tune=!1,this.tune_value_a=0,this.version=0,this.encoder_delay=0,this.encoder_padding=0,this.framesize=0,this.frameNum=0,this.lame_allocated_gfp=0,this.internal_flags=null}function O(m){var V=m;this.quantize=V,this.iteration_loop=function(Z,k,i0,N){var J=Z.internal_flags,s0=K(M0.SFBMAX),v0=K(576),w=w0(2),C=0,G,E=J.l3_side,L=new ye(C);this.quantize.rv.ResvFrameBegin(Z,L),C=L.bits;for(var a=0;a<J.mode_gr;a++){G=this.quantize.qupvt.on_pe(Z,k,w,C,a,a),J.mode_ext==l.MPG_MD_MS_LR&&(this.quantize.ms_convert(J.l3_side,a),this.quantize.qupvt.reduce_side(w,i0[a],C,G));for(var M=0;M<J.channels_out;M++){var X,B,_=E.tt[a][M];_.block_type!=l.SHORT_TYPE?(X=0,B=J.PSY.mask_adjust-X):(X=0,B=J.PSY.mask_adjust_short-X),J.masking_lower=Math.pow(10,B*.1),this.quantize.init_outer_loop(J,_),this.quantize.init_xrpow(J,_,v0)&&(this.quantize.qupvt.calc_xmin(Z,N[a][M],_,s0),this.quantize.outer_loop(Z,_,s0,v0,M,w[M])),this.quantize.iteration_finish_one(J,a,M)}}this.quantize.rv.ResvFrameEnd(J,C)}}function W(){}function f0(m,V,Z,k){this.l=w0(1+l.SBMAX_l),this.s=w0(1+l.SBMAX_s),this.psfb21=w0(1+l.PSFB21),this.psfb12=w0(1+l.PSFB12);var i0=this.l,N=this.s;arguments.length==4&&(this.arrL=arguments[0],this.arrS=arguments[1],this.arr21=arguments[2],this.arr12=arguments[3],k0.arraycopy(this.arrL,0,i0,0,Math.min(this.arrL.length,this.l.length)),k0.arraycopy(this.arrS,0,N,0,Math.min(this.arrS.length,this.s.length)),k0.arraycopy(this.arr21,0,this.psfb21,0,Math.min(this.arr21.length,this.psfb21.length)),k0.arraycopy(this.arr12,0,this.psfb12,0,Math.min(this.arr12.length,this.psfb12.length)))}x0.Q_MAX=256+1,x0.Q_MAX2=116,x0.LARGE_BITS=1e5,x0.IXMAX_VAL=8206;function x0(){var m=null,V=null,Z=null;this.setModules=function(u,x,R){m=u,V=x,Z=R};function k(u){return E[u+x0.Q_MAX2]}this.IPOW20=function(u){return L[u]};var i0=2220446049250313e-31,N=x0.IXMAX_VAL,J=N+2,s0=x0.Q_MAX,v0=x0.Q_MAX2,w=x0.LARGE_BITS,C=100;this.nr_of_sfb_block=[[[6,5,5,5],[9,9,9,9],[6,9,9,9]],[[6,5,7,3],[9,9,12,6],[6,9,12,6]],[[11,10,0,0],[18,18,0,0],[15,18,0,0]],[[7,7,7,0],[12,12,12,0],[6,15,12,0]],[[6,6,6,3],[12,9,9,6],[6,12,9,6]],[[8,8,5,0],[15,12,9,0],[6,18,9,0]]];var G=[0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,2,2,3,3,3,2,0];this.pretab=G,this.sfBandIndex=[new f0([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0,4,8,12,18,24,32,42,56,74,100,132,174,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new f0([0,6,12,18,24,30,36,44,54,66,80,96,114,136,162,194,232,278,332,394,464,540,576],[0,4,8,12,18,26,36,48,62,80,104,136,180,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new f0([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0,4,8,12,18,26,36,48,62,80,104,134,174,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new f0([0,4,8,12,16,20,24,30,36,44,52,62,74,90,110,134,162,196,238,288,342,418,576],[0,4,8,12,16,22,30,40,52,66,84,106,136,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new f0([0,4,8,12,16,20,24,30,36,42,50,60,72,88,106,128,156,190,230,276,330,384,576],[0,4,8,12,16,22,28,38,50,64,80,100,126,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new f0([0,4,8,12,16,20,24,30,36,44,54,66,82,102,126,156,194,240,296,364,448,550,576],[0,4,8,12,16,22,30,42,58,78,104,138,180,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new f0([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0/3,12/3,24/3,36/3,54/3,78/3,108/3,144/3,186/3,240/3,312/3,402/3,522/3,576/3],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new f0([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0/3,12/3,24/3,36/3,54/3,78/3,108/3,144/3,186/3,240/3,312/3,402/3,522/3,576/3],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new f0([0,12,24,36,48,60,72,88,108,132,160,192,232,280,336,400,476,566,568,570,572,574,576],[0/3,24/3,48/3,72/3,108/3,156/3,216/3,288/3,372/3,480/3,486/3,492/3,498/3,576/3],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0])];var E=K(s0+v0+1),L=K(s0),a=K(J),M=K(J);this.adj43=M;function X(u,x){var R=Z.ATHformula(x,u);return R-=C,R=Math.pow(10,R/10+u.ATHlower),R}function B(u){for(var x=u.internal_flags.ATH.l,R=u.internal_flags.ATH.psfb21,t=u.internal_flags.ATH.s,y=u.internal_flags.ATH.psfb12,o=u.internal_flags,n=u.out_samplerate,e=0;e<l.SBMAX_l;e++){var i=o.scalefac_band.l[e],v=o.scalefac_band.l[e+1];x[e]=F0.MAX_VALUE;for(var f=i;f<v;f++){var d=f*n/1152,b=X(u,d);x[e]=Math.min(x[e],b)}}for(var e=0;e<l.PSFB21;e++){var i=o.scalefac_band.psfb21[e],v=o.scalefac_band.psfb21[e+1];R[e]=F0.MAX_VALUE;for(var f=i;f<v;f++){var d=f*n/1152,b=X(u,d);R[e]=Math.min(R[e],b)}}for(var e=0;e<l.SBMAX_s;e++){var i=o.scalefac_band.s[e],v=o.scalefac_band.s[e+1];t[e]=F0.MAX_VALUE;for(var f=i;f<v;f++){var d=f*n/384,b=X(u,d);t[e]=Math.min(t[e],b)}t[e]*=o.scalefac_band.s[e+1]-o.scalefac_band.s[e]}for(var e=0;e<l.PSFB12;e++){var i=o.scalefac_band.psfb12[e],v=o.scalefac_band.psfb12[e+1];y[e]=F0.MAX_VALUE;for(var f=i;f<v;f++){var d=f*n/384,b=X(u,d);y[e]=Math.min(y[e],b)}y[e]*=o.scalefac_band.s[13]-o.scalefac_band.s[12]}if(u.noATH){for(var e=0;e<l.SBMAX_l;e++)x[e]=1e-20;for(var e=0;e<l.PSFB21;e++)R[e]=1e-20;for(var e=0;e<l.SBMAX_s;e++)t[e]=1e-20;for(var e=0;e<l.PSFB12;e++)y[e]=1e-20}o.ATH.floor=10*Me(X(u,-1))}this.iteration_init=function(u){var x=u.internal_flags,R=x.l3_side,t;if(x.iteration_init_init==0){for(x.iteration_init_init=1,R.main_data_begin=0,B(u),a[0]=0,t=1;t<J;t++)a[t]=Math.pow(t,4/3);for(t=0;t<J-1;t++)M[t]=t+1-Math.pow(.5*(a[t]+a[t+1]),.75);for(M[t]=.5,t=0;t<s0;t++)L[t]=Math.pow(2,(t-210)*-.1875);for(t=0;t<=s0+v0;t++)E[t]=Math.pow(2,(t-210-v0)*.25);m.huffman_init(x);{var y,o,n,e;for(t=u.exp_nspsytune>>2&63,t>=32&&(t-=64),y=Math.pow(10,t/4/10),t=u.exp_nspsytune>>8&63,t>=32&&(t-=64),o=Math.pow(10,t/4/10),t=u.exp_nspsytune>>14&63,t>=32&&(t-=64),n=Math.pow(10,t/4/10),t=u.exp_nspsytune>>20&63,t>=32&&(t-=64),e=n*Math.pow(10,t/4/10),t=0;t<l.SBMAX_l;t++){var i;t<=6?i=y:t<=13?i=o:t<=20?i=n:i=e,x.nsPsy.longfact[t]=i}for(t=0;t<l.SBMAX_s;t++){var i;t<=5?i=y:t<=10?i=o:t<=11?i=n:i=e,x.nsPsy.shortfact[t]=i}}}},this.on_pe=function(u,x,R,t,y,o){var n=u.internal_flags,e=0,i,v=w0(2),f,d=new ye(e),b=V.ResvMaxBits(u,t,d,o);e=d.bits;var z=e+b;for(z>y0.MAX_BITS_PER_GRANULE&&(z=y0.MAX_BITS_PER_GRANULE),i=0,f=0;f<n.channels_out;++f)R[f]=Math.min(y0.MAX_BITS_PER_CHANNEL,e/n.channels_out),v[f]=0|R[f]*x[y][f]/700-R[f],v[f]>t*3/4&&(v[f]=t*3/4),v[f]<0&&(v[f]=0),v[f]+R[f]>y0.MAX_BITS_PER_CHANNEL&&(v[f]=Math.max(0,y0.MAX_BITS_PER_CHANNEL-R[f])),i+=v[f];if(i>b)for(f=0;f<n.channels_out;++f)v[f]=b*v[f]/i;for(f=0;f<n.channels_out;++f)R[f]+=v[f],b-=v[f];for(i=0,f=0;f<n.channels_out;++f)i+=R[f];if(i>y0.MAX_BITS_PER_GRANULE){var I=0;for(f=0;f<n.channels_out;++f)R[f]*=y0.MAX_BITS_PER_GRANULE,R[f]/=i,I+=R[f]}return z},this.reduce_side=function(u,x,R,t){var y=.33*(.5-x)/.5;y<0&&(y=0),y>.5&&(y=.5);var o=0|y*.5*(u[0]+u[1]);o>y0.MAX_BITS_PER_CHANNEL-u[0]&&(o=y0.MAX_BITS_PER_CHANNEL-u[0]),o<0&&(o=0),u[1]>=125&&(u[1]-o>125?(u[0]<R&&(u[0]+=o),u[1]-=o):(u[0]+=u[1]-125,u[1]=125)),o=u[0]+u[1],o>t&&(u[0]=t*u[0]/o,u[1]=t*u[1]/o)},this.athAdjust=function(u,x,R){var t=90.30873362,y=94.82444863,o=c0.FAST_LOG10_X(x,10),n=u*u,e=0;return o-=R,n>1e-20&&(e=1+c0.FAST_LOG10_X(n,10/t)),e<0&&(e=0),o*=e,o+=R+t-y,Math.pow(10,.1*o)},this.calc_xmin=function(u,x,R,t){var y=0,o=u.internal_flags,n,e=0,i=0,v=o.ATH,f=R.xr,d=u.VBR==m0.vbr_mtrh?1:0,b=o.masking_lower;for((u.VBR==m0.vbr_mtrh||u.VBR==m0.vbr_mt)&&(b=1),n=0;n<R.psy_lmax;n++){var z,I,U,_0,r,s;u.VBR==m0.vbr_rh||u.VBR==m0.vbr_mtrh?I=athAdjust(v.adjust,v.l[n],v.floor):I=v.adjust*v.l[n],r=R.width[n],U=I/r,_0=i0,s=r>>1,z=0;do{var g,a0;g=f[e]*f[e],z+=g,_0+=g<U?g:U,e++,a0=f[e]*f[e],z+=a0,_0+=a0<U?a0:U,e++}while(--s>0);if(z>I&&i++,n==l.SBPSY_l){var u0=I*o.nsPsy.longfact[n];_0<u0&&(_0=u0)}if(d!=0&&(I=_0),!u.ATHonly){var A0=x.en.l[n];if(A0>0){var u0;u0=z*x.thm.l[n]*b/A0,d!=0&&(u0*=o.nsPsy.longfact[n]),I<u0&&(I=u0)}}d!=0?t[y++]=I:t[y++]=I*o.nsPsy.longfact[n]}var R0=575;if(R.block_type!=l.SHORT_TYPE)for(var E0=576;E0--!=0&&be.EQ(f[E0],0);)R0=E0;R.max_nonzero_coeff=R0;for(var D0=R.sfb_smin;n<R.psymax;D0++,n+=3){var r,I0,h0;for(u.VBR==m0.vbr_rh||u.VBR==m0.vbr_mtrh?h0=athAdjust(v.adjust,v.s[D0],v.floor):h0=v.adjust*v.s[D0],r=R.width[n],I0=0;I0<3;I0++){var z=0,I,U,_0,s=r>>1;U=h0/r,_0=i0;do{var g,a0;g=f[e]*f[e],z+=g,_0+=g<U?g:U,e++,a0=f[e]*f[e],z+=a0,_0+=a0<U?a0:U,e++}while(--s>0);if(z>h0&&i++,D0==l.SBPSY_s){var u0=h0*o.nsPsy.shortfact[D0];_0<u0&&(_0=u0)}if(d!=0?I=_0:I=h0,!u.ATHonly&&!u.ATHshort){var A0=x.en.s[D0][I0];if(A0>0){var u0;u0=z*x.thm.s[D0][I0]*b/A0,d!=0&&(u0*=o.nsPsy.shortfact[D0]),I<u0&&(I=u0)}}d!=0?t[y++]=I:t[y++]=I*o.nsPsy.shortfact[D0]}u.useTemporal&&(t[y-3]>t[y-3+1]&&(t[y-3+1]+=(t[y-3]-t[y-3+1])*o.decay),t[y-3+1]>t[y-3+2]&&(t[y-3+2]+=(t[y-3+1]-t[y-3+2])*o.decay))}return i};function _(u){this.s=u}this.calc_noise_core=function(u,x,R,t){var y=0,o=x.s,n=u.l3_enc;if(o>u.count1)for(;R--!=0;){var e;e=u.xr[o],o++,y+=e*e,e=u.xr[o],o++,y+=e*e}else if(o>u.big_values){var i=K(2);for(i[0]=0,i[1]=t;R--!=0;){var e;e=Math.abs(u.xr[o])-i[n[o]],o++,y+=e*e,e=Math.abs(u.xr[o])-i[n[o]],o++,y+=e*e}}else for(;R--!=0;){var e;e=Math.abs(u.xr[o])-a[n[o]]*t,o++,y+=e*e,e=Math.abs(u.xr[o])-a[n[o]]*t,o++,y+=e*e}return x.s=o,y},this.calc_noise=function(u,x,R,t,y){var o=0,n=0,e,i,v=0,f=0,d=0,b=-20,z=0,I=u.scalefac,U=0;for(t.over_SSD=0,e=0;e<u.psymax;e++){var _0=u.global_gain-(I[U++]+(u.preflag!=0?G[e]:0)<<u.scalefac_scale+1)-u.subblock_gain[u.window[e]]*8,r=0;if(y!=null&&y.step[e]==_0)r=y.noise[e],z+=u.width[e],R[o++]=r/x[n++],r=y.noise_log[e];else{var s=k(_0);if(i=u.width[e]>>1,z+u.width[e]>u.max_nonzero_coeff){var g;g=u.max_nonzero_coeff-z+1,g>0?i=g>>1:i=0}var a0=new _(z);r=this.calc_noise_core(u,a0,i,s),z=a0.s,y!=null&&(y.step[e]=_0,y.noise[e]=r),r=R[o++]=r/x[n++],r=c0.FAST_LOG10(Math.max(r,1e-20)),y!=null&&(y.noise_log[e]=r)}if(y!=null&&(y.global_gain=u.global_gain),d+=r,r>0){var u0;u0=Math.max(0|r*10+.5,1),t.over_SSD+=u0*u0,v++,f+=r}b=Math.max(b,r)}return t.over_count=v,t.tot_noise=d,t.over_noise=f,t.max_noise=b,v},this.set_pinfo=function(u,x,R,t,y){var o=u.internal_flags,n,e,i,v,f,d=x.scalefac_scale==0?.5:1,b=x.scalefac,z=K(M0.SFBMAX),I=K(M0.SFBMAX),U=new Fe;calc_xmin(u,R,x,z),calc_noise(x,z,I,U,null);var _0=0;for(e=x.sfb_lmax,x.block_type!=l.SHORT_TYPE&&x.mixed_block_flag==0&&(e=22),n=0;n<e;n++){var r=o.scalefac_band.l[n],s=o.scalefac_band.l[n+1],g=s-r;for(v=0;_0<s;_0++)v+=x.xr[_0]*x.xr[_0];v/=g,f=1e15,o.pinfo.en[t][y][n]=f*v,o.pinfo.xfsf[t][y][n]=f*z[n]*I[n]/g,R.en.l[n]>0&&!u.ATHonly?v=v/R.en.l[n]:v=0,o.pinfo.thr[t][y][n]=f*Math.max(v*R.thm.l[n],o.ATH.l[n]),o.pinfo.LAMEsfb[t][y][n]=0,x.preflag!=0&&n>=11&&(o.pinfo.LAMEsfb[t][y][n]=-d*G[n]),n<l.SBPSY_l&&(o.pinfo.LAMEsfb[t][y][n]-=d*b[n])}if(x.block_type==l.SHORT_TYPE)for(e=n,n=x.sfb_smin;n<l.SBMAX_s;n++)for(var r=o.scalefac_band.s[n],s=o.scalefac_band.s[n+1],g=s-r,a0=0;a0<3;a0++){for(v=0,i=r;i<s;i++)v+=x.xr[_0]*x.xr[_0],_0++;v=Math.max(v/g,1e-20),f=1e15,o.pinfo.en_s[t][y][3*n+a0]=f*v,o.pinfo.xfsf_s[t][y][3*n+a0]=f*z[e]*I[e]/g,R.en.s[n][a0]>0?v=v/R.en.s[n][a0]:v=0,(u.ATHonly||u.ATHshort)&&(v=0),o.pinfo.thr_s[t][y][3*n+a0]=f*Math.max(v*R.thm.s[n][a0],o.ATH.s[n]),o.pinfo.LAMEsfb_s[t][y][3*n+a0]=-2*x.subblock_gain[a0],n<l.SBPSY_s&&(o.pinfo.LAMEsfb_s[t][y][3*n+a0]-=d*b[e]),e++}o.pinfo.LAMEqss[t][y]=x.global_gain,o.pinfo.LAMEmainbits[t][y]=x.part2_3_length+x.part2_length,o.pinfo.LAMEsfbits[t][y]=x.part2_length,o.pinfo.over[t][y]=U.over_count,o.pinfo.max_noise[t][y]=U.max_noise*10,o.pinfo.over_noise[t][y]=U.over_noise*10,o.pinfo.tot_noise[t][y]=U.tot_noise*10,o.pinfo.over_SSD[t][y]=U.over_SSD};function S(u,x){var R=u.internal_flags;R.masking_lower=1;for(var t=0;t<R.mode_gr;t++)for(var y=0;y<R.channels_out;y++){var o=R.l3_side.tt[t][y],n=w0(M0.SFBMAX);if(k0.arraycopy(o.scalefac,0,n,0,n.length),t==1){var e;for(e=0;e<o.sfb_lmax;e++)o.scalefac[e]<0&&(o.scalefac[e]=R.l3_side.tt[0][y].scalefac[e])}set_pinfo(u,o,x[t][y],t,y),k0.arraycopy(n,0,o.scalefac,0,n.length)}}}function L0(){this.global_gain=0,this.sfb_count1=0,this.step=w0(39),this.noise=K(39),this.noise_log=K(39)}function g0(){this.xr=K(576),this.l3_enc=w0(576),this.scalefac=w0(M0.SFBMAX),this.xrpow_max=0,this.part2_3_length=0,this.big_values=0,this.count1=0,this.global_gain=0,this.scalefac_compress=0,this.block_type=0,this.mixed_block_flag=0,this.table_select=w0(3),this.subblock_gain=w0(3+1),this.region0_count=0,this.region1_count=0,this.preflag=0,this.scalefac_scale=0,this.count1table_select=0,this.part2_length=0,this.sfb_lmax=0,this.sfb_smin=0,this.psy_lmax=0,this.sfbmax=0,this.psymax=0,this.sfbdivide=0,this.width=w0(M0.SFBMAX),this.window=w0(M0.SFBMAX),this.count1bits=0,this.sfb_partition_table=null,this.slen=w0(4),this.max_nonzero_coeff=0;var m=this;function V(k){return new Int32Array(k)}function Z(k){return new Float32Array(k)}this.assign=function(k){m.xr=Z(k.xr),m.l3_enc=V(k.l3_enc),m.scalefac=V(k.scalefac),m.xrpow_max=k.xrpow_max,m.part2_3_length=k.part2_3_length,m.big_values=k.big_values,m.count1=k.count1,m.global_gain=k.global_gain,m.scalefac_compress=k.scalefac_compress,m.block_type=k.block_type,m.mixed_block_flag=k.mixed_block_flag,m.table_select=V(k.table_select),m.subblock_gain=V(k.subblock_gain),m.region0_count=k.region0_count,m.region1_count=k.region1_count,m.preflag=k.preflag,m.scalefac_scale=k.scalefac_scale,m.count1table_select=k.count1table_select,m.part2_length=k.part2_length,m.sfb_lmax=k.sfb_lmax,m.sfb_smin=k.sfb_smin,m.psy_lmax=k.psy_lmax,m.sfbmax=k.sfbmax,m.psymax=k.psymax,m.sfbdivide=k.sfbdivide,m.width=V(k.width),m.window=V(k.window),m.count1bits=k.count1bits,m.sfb_partition_table=k.sfb_partition_table.slice(0),m.slen=V(k.slen),m.max_nonzero_coeff=k.max_nonzero_coeff}}var M0={};M0.SFBMAX=l.SBMAX_s*3;function Q0(){var m;this.rv=null;var V;this.qupvt=null;var Z,k=new s1,i0;this.setModules=function(B,_,S,u){m=B,V=_,this.rv=_,Z=S,this.qupvt=S,i0=u,k.setModules(Z,i0)},this.ms_convert=function(B,_){for(var S=0;S<576;++S){var u=B.tt[_][0].xr[S],x=B.tt[_][1].xr[S];B.tt[_][0].xr[S]=(u+x)*(c0.SQRT2*.5),B.tt[_][1].xr[S]=(u-x)*(c0.SQRT2*.5)}};function N(B,_,S,u){u=0;for(var x=0;x<=S;++x){var R=Math.abs(B.xr[x]);u+=R,_[x]=Math.sqrt(R*Math.sqrt(R)),_[x]>B.xrpow_max&&(B.xrpow_max=_[x])}return u}this.init_xrpow=function(B,_,S){var u=0,x=0|_.max_nonzero_coeff;if(_.xrpow_max=0,G0.fill(S,x,576,0),u=N(_,S,x,u),u>1e-20){var R=0;B.substep_shaping&2&&(R=1);for(var t=0;t<_.psymax;t++)B.pseudohalf[t]=R;return!0}return G0.fill(_.l3_enc,0,576,0),!1};function J(B,_){var S=B.ATH,u=_.xr;if(_.block_type!=l.SHORT_TYPE)for(var x=!1,R=l.PSFB21-1;R>=0&&!x;R--){var t=B.scalefac_band.psfb21[R],y=B.scalefac_band.psfb21[R+1],o=Z.athAdjust(S.adjust,S.psfb21[R],S.floor);B.nsPsy.longfact[21]>1e-12&&(o*=B.nsPsy.longfact[21]);for(var n=y-1;n>=t;n--)if(Math.abs(u[n])<o)u[n]=0;else{x=!0;break}}else for(var e=0;e<3;e++)for(var x=!1,R=l.PSFB12-1;R>=0&&!x;R--){var t=B.scalefac_band.s[12]*3+(B.scalefac_band.s[13]-B.scalefac_band.s[12])*e+(B.scalefac_band.psfb12[R]-B.scalefac_band.psfb12[0]),y=t+(B.scalefac_band.psfb12[R+1]-B.scalefac_band.psfb12[R]),i=Z.athAdjust(S.adjust,S.psfb12[R],S.floor);B.nsPsy.shortfact[12]>1e-12&&(i*=B.nsPsy.shortfact[12]);for(var n=y-1;n>=t;n--)if(Math.abs(u[n])<i)u[n]=0;else{x=!0;break}}}this.init_outer_loop=function(B,_){_.part2_3_length=0,_.big_values=0,_.count1=0,_.global_gain=210,_.scalefac_compress=0,_.table_select[0]=0,_.table_select[1]=0,_.table_select[2]=0,_.subblock_gain[0]=0,_.subblock_gain[1]=0,_.subblock_gain[2]=0,_.subblock_gain[3]=0,_.region0_count=0,_.region1_count=0,_.preflag=0,_.scalefac_scale=0,_.count1table_select=0,_.part2_length=0,_.sfb_lmax=l.SBPSY_l,_.sfb_smin=l.SBPSY_s,_.psy_lmax=B.sfb21_extra?l.SBMAX_l:l.SBPSY_l,_.psymax=_.psy_lmax,_.sfbmax=_.sfb_lmax,_.sfbdivide=11;for(var S=0;S<l.SBMAX_l;S++)_.width[S]=B.scalefac_band.l[S+1]-B.scalefac_band.l[S],_.window[S]=3;if(_.block_type==l.SHORT_TYPE){var u=K(576);_.sfb_smin=0,_.sfb_lmax=0,_.mixed_block_flag!=0&&(_.sfb_smin=3,_.sfb_lmax=B.mode_gr*2+4),_.psymax=_.sfb_lmax+3*((B.sfb21_extra?l.SBMAX_s:l.SBPSY_s)-_.sfb_smin),_.sfbmax=_.sfb_lmax+3*(l.SBPSY_s-_.sfb_smin),_.sfbdivide=_.sfbmax-18,_.psy_lmax=_.sfb_lmax;var x=B.scalefac_band.l[_.sfb_lmax];k0.arraycopy(_.xr,0,u,0,576);for(var S=_.sfb_smin;S<l.SBMAX_s;S++)for(var R=B.scalefac_band.s[S],t=B.scalefac_band.s[S+1],y=0;y<3;y++)for(var o=R;o<t;o++)_.xr[x++]=u[3*o+y];for(var n=_.sfb_lmax,S=_.sfb_smin;S<l.SBMAX_s;S++)_.width[n]=_.width[n+1]=_.width[n+2]=B.scalefac_band.s[S+1]-B.scalefac_band.s[S],_.window[n]=0,_.window[n+1]=1,_.window[n+2]=2,n+=3}_.count1bits=0,_.sfb_partition_table=Z.nr_of_sfb_block[0][0],_.slen[0]=0,_.slen[1]=0,_.slen[2]=0,_.slen[3]=0,_.max_nonzero_coeff=575,G0.fill(_.scalefac,0),J(B,_)};function s0(B){this.ordinal=B}s0.BINSEARCH_NONE=new s0(0),s0.BINSEARCH_UP=new s0(1),s0.BINSEARCH_DOWN=new s0(2);function v0(B,_,S,u,x){var R,t=B.CurrentStep[u],y=!1,o=B.OldValue[u],n=s0.BINSEARCH_NONE;for(_.global_gain=o,S-=_.part2_length;;){var e;if(R=i0.count_bits(B,x,_,null),t==1||R==S)break;R>S?(n==s0.BINSEARCH_DOWN&&(y=!0),y&&(t/=2),n=s0.BINSEARCH_UP,e=t):(n==s0.BINSEARCH_UP&&(y=!0),y&&(t/=2),n=s0.BINSEARCH_DOWN,e=-t),_.global_gain+=e,_.global_gain<0&&(_.global_gain=0,y=!0),_.global_gain>255&&(_.global_gain=255,y=!0)}for(;R>S&&_.global_gain<255;)_.global_gain++,R=i0.count_bits(B,x,_,null);return B.CurrentStep[u]=o-_.global_gain>=4?4:2,B.OldValue[u]=_.global_gain,_.part2_3_length=R,R}this.trancate_smallspectrums=function(B,_,S,u){var x=K(M0.SFBMAX);if(!(!(B.substep_shaping&4)&&_.block_type==l.SHORT_TYPE||B.substep_shaping&128)){Z.calc_noise(_,S,x,new Fe,null);for(var t=0;t<576;t++){var R=0;_.l3_enc[t]!=0&&(R=Math.abs(_.xr[t])),u[t]=R}var t=0,y=8;_.block_type==l.SHORT_TYPE&&(y=6);do{var o,n,e,i,v=_.width[y];if(t+=v,!(x[y]>=1)&&(G0.sort(u,t-v,v),!be.EQ(u[t-1],0))){o=(1-x[y])*S[y],n=0,i=0;do{var f;for(e=1;i+e<v&&!be.NEQ(u[i+t-v],u[i+t+e-v]);e++);if(f=u[i+t-v]*u[i+t-v]*e,o<f){i!=0&&(n=u[i+t-v-1]);break}o-=f,i+=e}while(i<v);if(!be.EQ(n,0))do Math.abs(_.xr[t-v])<=n&&(_.l3_enc[t-v]=0);while(--v>0)}}while(++y<_.psymax);_.part2_3_length=i0.noquant_count_bits(B,_,null)}};function w(B){for(var _=0;_<B.sfbmax;_++)if(B.scalefac[_]+B.subblock_gain[B.window[_]]==0)return!1;return!0}function C(B){return c0.FAST_LOG10(.368+.632*B*B*B)}function G(B,_){for(var S=1e-37,u=0;u<_.psymax;u++)S+=C(B[u]);return Math.max(1e-20,S)}function E(B,_,S,u,x){var R;switch(B){default:case 9:{_.over_count>0?(R=S.over_SSD<=_.over_SSD,S.over_SSD==_.over_SSD&&(R=S.bits<_.bits)):R=S.max_noise<0&&S.max_noise*10+S.bits<=_.max_noise*10+_.bits;break}case 0:R=S.over_count<_.over_count||S.over_count==_.over_count&&S.over_noise<_.over_noise||S.over_count==_.over_count&&be.EQ(S.over_noise,_.over_noise)&&S.tot_noise<_.tot_noise;break;case 8:S.max_noise=G(x,u);case 1:R=S.max_noise<_.max_noise;break;case 2:R=S.tot_noise<_.tot_noise;break;case 3:R=S.tot_noise<_.tot_noise&&S.max_noise<_.max_noise;break;case 4:R=S.max_noise<=0&&_.max_noise>.2||S.max_noise<=0&&_.max_noise<0&&_.max_noise>S.max_noise-.2&&S.tot_noise<_.tot_noise||S.max_noise<=0&&_.max_noise>0&&_.max_noise>S.max_noise-.2&&S.tot_noise<_.tot_noise+_.over_noise||S.max_noise>0&&_.max_noise>-.05&&_.max_noise>S.max_noise-.1&&S.tot_noise+S.over_noise<_.tot_noise+_.over_noise||S.max_noise>0&&_.max_noise>-.1&&_.max_noise>S.max_noise-.15&&S.tot_noise+S.over_noise+S.over_noise<_.tot_noise+_.over_noise+_.over_noise;break;case 5:R=S.over_noise<_.over_noise||be.EQ(S.over_noise,_.over_noise)&&S.tot_noise<_.tot_noise;break;case 6:R=S.over_noise<_.over_noise||be.EQ(S.over_noise,_.over_noise)&&(S.max_noise<_.max_noise||be.EQ(S.max_noise,_.max_noise)&&S.tot_noise<=_.tot_noise);break;case 7:R=S.over_count<_.over_count||S.over_noise<_.over_noise;break}return _.over_count==0&&(R=R&&S.bits<_.bits),R}function L(B,_,S,u,x){var R=B.internal_flags,t;_.scalefac_scale==0?t=1.2968395546510096:t=1.6817928305074292;for(var y=0,o=0;o<_.sfbmax;o++)y<S[o]&&(y=S[o]);var n=R.noise_shaping_amp;switch(n==3&&(x?n=2:n=1),n){case 2:break;case 1:y>1?y=Math.pow(y,.5):y*=.95;break;case 0:default:y>1?y=1:y*=.95;break}for(var e=0,o=0;o<_.sfbmax;o++){var i=_.width[o],v;if(e+=i,!(S[o]<y)){if(R.substep_shaping&2&&(R.pseudohalf[o]=R.pseudohalf[o]==0?1:0,R.pseudohalf[o]==0&&R.noise_shaping_amp==2))return;for(_.scalefac[o]++,v=-i;v<0;v++)u[e+v]*=t,u[e+v]>_.xrpow_max&&(_.xrpow_max=u[e+v]);if(R.noise_shaping_amp==2)return}}}function a(B,_){for(var S=1.2968395546510096,u=0,x=0;x<B.sfbmax;x++){var R=B.width[x],t=B.scalefac[x];if(B.preflag!=0&&(t+=Z.pretab[x]),u+=R,t&1){t++;for(var y=-R;y<0;y++)_[u+y]*=S,_[u+y]>B.xrpow_max&&(B.xrpow_max=_[u+y])}B.scalefac[x]=t>>1}B.preflag=0,B.scalefac_scale=1}function M(B,_,S){var u,x=_.scalefac;for(u=0;u<_.sfb_lmax;u++)if(x[u]>=16)return!0;for(var R=0;R<3;R++){var t=0,y=0;for(u=_.sfb_lmax+R;u<_.sfbdivide;u+=3)t<x[u]&&(t=x[u]);for(;u<_.sfbmax;u+=3)y<x[u]&&(y=x[u]);if(!(t<16&&y<8)){if(_.subblock_gain[R]>=7)return!0;_.subblock_gain[R]++;var o=B.scalefac_band.l[_.sfb_lmax];for(u=_.sfb_lmax+R;u<_.sfbmax;u+=3){var n,e=_.width[u],i=x[u];if(i=i-(4>>_.scalefac_scale),i>=0){x[u]=i,o+=e*3;continue}x[u]=0;{var v=210+(i<<_.scalefac_scale+1);n=Z.IPOW20(v)}o+=e*(R+1);for(var f=-e;f<0;f++)S[o+f]*=n,S[o+f]>_.xrpow_max&&(_.xrpow_max=S[o+f]);o+=e*(3-R-1)}{var n=Z.IPOW20(202);o+=_.width[u]*(R+1);for(var f=-_.width[u];f<0;f++)S[o+f]*=n,S[o+f]>_.xrpow_max&&(_.xrpow_max=S[o+f])}}}return!1}function X(B,_,S,u,x){var R=B.internal_flags;L(B,_,S,u,x);var t=w(_);return t?!1:(R.mode_gr==2?t=i0.scale_bitcount(_):t=i0.scale_bitcount_lsf(R,_),t?(R.noise_shaping>1&&(G0.fill(R.pseudohalf,0),_.scalefac_scale==0?(a(_,u),t=!1):_.block_type==l.SHORT_TYPE&&R.subblock_gain>0&&(t=M(R,_,u)||w(_))),t||(R.mode_gr==2?t=i0.scale_bitcount(_):t=i0.scale_bitcount_lsf(R,_)),!t):!0)}this.outer_loop=function(B,_,S,u,x,R){var t=B.internal_flags,y=new g0,o=K(576),n=K(M0.SFBMAX),e=new Fe,i,v=new L0,f=9999999,d=!1,b=!1,z=0;if(v0(t,_,R,x,u),t.noise_shaping==0)return 100;Z.calc_noise(_,S,n,e,v),e.bits=_.part2_3_length,y.assign(_);var I=0;for(k0.arraycopy(u,0,o,0,576);!d;){do{var U=new Fe,_0,r=255;if(t.substep_shaping&2?_0=20:_0=3,t.sfb21_extra&&(n[y.sfbmax]>1||y.block_type==l.SHORT_TYPE&&(n[y.sfbmax+1]>1||n[y.sfbmax+2]>1))||!X(B,y,n,u,b))break;y.scalefac_scale!=0&&(r=254);var s=R-y.part2_length;if(s<=0)break;for(;(y.part2_3_length=i0.count_bits(t,u,y,v))>s&&y.global_gain<=r;)y.global_gain++;if(y.global_gain>r)break;if(e.over_count==0){for(;(y.part2_3_length=i0.count_bits(t,u,y,v))>f&&y.global_gain<=r;)y.global_gain++;if(y.global_gain>r)break}if(Z.calc_noise(y,S,n,U,v),U.bits=y.part2_3_length,_.block_type!=l.SHORT_TYPE?i=B.quant_comp:i=B.quant_comp_short,i=E(i,e,U,y,n)?1:0,i!=0)f=_.part2_3_length,e=U,_.assign(y),I=0,k0.arraycopy(u,0,o,0,576);else if(t.full_outer_loop==0&&(++I>_0&&e.over_count==0||t.noise_shaping_amp==3&&b&&I>30||t.noise_shaping_amp==3&&b&&y.global_gain-z>15))break}while(y.global_gain+y.scalefac_scale<255);t.noise_shaping_amp==3?b?d=!0:(y.assign(_),k0.arraycopy(o,0,u,0,576),I=0,z=y.global_gain,b=!0):d=!0}return B.VBR==m0.vbr_rh||B.VBR==m0.vbr_mtrh?k0.arraycopy(o,0,u,0,576):t.substep_shaping&1&&trancate_smallspectrums(t,_,S,u),e.over_count},this.iteration_finish_one=function(B,_,S){var u=B.l3_side,x=u.tt[_][S];i0.best_scalefac_store(B,_,S,u),B.use_best_huffman==1&&i0.best_huffman_divide(B,x),V.ResvAdjust(B,x)},this.VBR_encode_granule=function(B,_,S,u,x,R,t){var y=B.internal_flags,o=new g0,n=K(576),e=t,i=t+1,v=(t+R)/2,f,d,b=0,z=y.sfb21_extra;G0.fill(o.l3_enc,0);do v>e-42?y.sfb21_extra=!1:y.sfb21_extra=z,d=outer_loop(B,_,S,u,x,v),d<=0?(b=1,i=_.part2_3_length,o.assign(_),k0.arraycopy(u,0,n,0,576),t=i-32,f=t-R,v=(t+R)/2):(R=v+32,f=t-R,v=(t+R)/2,b!=0&&(b=2,_.assign(o),k0.arraycopy(n,0,u,0,576)));while(f>12);y.sfb21_extra=z,b==2&&k0.arraycopy(o.l3_enc,0,_.l3_enc,0,576)},this.get_framebits=function(B,_){var S=B.internal_flags;S.bitrate_index=S.VBR_min_bitrate;var u=m.getframebits(B);S.bitrate_index=1,u=m.getframebits(B);for(var x=1;x<=S.VBR_max_bitrate;x++){S.bitrate_index=x;var R=new ye(u);_[x]=V.ResvFrameBegin(B,R),u=R.bits}},this.VBR_old_prepare=function(B,_,S,u,x,R,t,y,o){var n=B.internal_flags,e,i=0,v=1,f=0;n.bitrate_index=n.VBR_max_bitrate;var d=V.ResvFrameBegin(B,new ye(0))/n.mode_gr;get_framebits(B,R);for(var b=0;b<n.mode_gr;b++){var z=Z.on_pe(B,_,y[b],d,b,0);n.mode_ext==l.MPG_MD_MS_LR&&(ms_convert(n.l3_side,b),Z.reduce_side(y[b],S[b],d,z));for(var I=0;I<n.channels_out;++I){var U=n.l3_side.tt[b][I];U.block_type!=l.SHORT_TYPE?(i=1.28/(1+Math.exp(3.5-_[b][I]/300))-.05,e=n.PSY.mask_adjust-i):(i=2.56/(1+Math.exp(3.5-_[b][I]/300))-.14,e=n.PSY.mask_adjust_short-i),n.masking_lower=Math.pow(10,e*.1),init_outer_loop(n,U),o[b][I]=Z.calc_xmin(B,u[b][I],U,x[b][I]),o[b][I]!=0&&(v=0),t[b][I]=126,f+=y[b][I]}}for(var b=0;b<n.mode_gr;b++)for(var I=0;I<n.channels_out;I++)f>R[n.VBR_max_bitrate]&&(y[b][I]*=R[n.VBR_max_bitrate],y[b][I]/=f),t[b][I]>y[b][I]&&(t[b][I]=y[b][I]);return v},this.bitpressure_strategy=function(B,_,S,u){for(var x=0;x<B.mode_gr;x++)for(var R=0;R<B.channels_out;R++){for(var t=B.l3_side.tt[x][R],y=_[x][R],o=0,n=0;n<t.psy_lmax;n++)y[o++]*=1+.029*n*n/l.SBMAX_l/l.SBMAX_l;if(t.block_type==l.SHORT_TYPE)for(var n=t.sfb_smin;n<l.SBMAX_s;n++)y[o++]*=1+.029*n*n/l.SBMAX_s/l.SBMAX_s,y[o++]*=1+.029*n*n/l.SBMAX_s/l.SBMAX_s,y[o++]*=1+.029*n*n/l.SBMAX_s/l.SBMAX_s;u[x][R]=0|Math.max(S[x][R],.9*u[x][R])}},this.VBR_new_prepare=function(B,_,S,u,x,R){var t=B.internal_flags,y=1,o=0,n=0,e;if(B.free_format){t.bitrate_index=0;var i=new ye(o);e=V.ResvFrameBegin(B,i),o=i.bits,x[0]=e}else{t.bitrate_index=t.VBR_max_bitrate;var i=new ye(o);V.ResvFrameBegin(B,i),o=i.bits,get_framebits(B,x),e=x[t.VBR_max_bitrate]}for(var v=0;v<t.mode_gr;v++){Z.on_pe(B,_,R[v],o,v,0),t.mode_ext==l.MPG_MD_MS_LR&&ms_convert(t.l3_side,v);for(var f=0;f<t.channels_out;++f){var d=t.l3_side.tt[v][f];t.masking_lower=Math.pow(10,t.PSY.mask_adjust*.1),init_outer_loop(t,d),Z.calc_xmin(B,S[v][f],d,u[v][f])!=0&&(y=0),n+=R[v][f]}}for(var v=0;v<t.mode_gr;v++)for(var f=0;f<t.channels_out;f++)n>e&&(R[v][f]*=e,R[v][f]/=n);return y},this.calc_target_bits=function(B,_,S,u,x,R){var t=B.internal_flags,y=t.l3_side,o,n,e,i,v=0;t.bitrate_index=t.VBR_max_bitrate;var f=new ye(v);for(R[0]=V.ResvFrameBegin(B,f),v=f.bits,t.bitrate_index=1,v=m.getframebits(B)-t.sideinfo_len*8,x[0]=v/(t.mode_gr*t.channels_out),v=B.VBR_mean_bitrate_kbps*B.framesize*1e3,t.substep_shaping&1&&(v*=1.09),v/=B.out_samplerate,v-=t.sideinfo_len*8,v/=t.mode_gr*t.channels_out,o=.93+.07*(11-B.compression_ratio)/(11-5.5),o<.9&&(o=.9),o>1&&(o=1),n=0;n<t.mode_gr;n++){var d=0;for(e=0;e<t.channels_out;e++){if(u[n][e]=int(o*v),_[n][e]>700){var b=int((_[n][e]-700)/1.4),z=y.tt[n][e];u[n][e]=int(o*v),z.block_type==l.SHORT_TYPE&&b<v/2&&(b=v/2),b>v*3/2?b=v*3/2:b<0&&(b=0),u[n][e]+=b}u[n][e]>y0.MAX_BITS_PER_CHANNEL&&(u[n][e]=y0.MAX_BITS_PER_CHANNEL),d+=u[n][e]}if(d>y0.MAX_BITS_PER_GRANULE)for(e=0;e<t.channels_out;++e)u[n][e]*=y0.MAX_BITS_PER_GRANULE,u[n][e]/=d}if(t.mode_ext==l.MPG_MD_MS_LR)for(n=0;n<t.mode_gr;n++)Z.reduce_side(u[n],S[n],v*t.channels_out,y0.MAX_BITS_PER_GRANULE);for(i=0,n=0;n<t.mode_gr;n++)for(e=0;e<t.channels_out;e++)u[n][e]>y0.MAX_BITS_PER_CHANNEL&&(u[n][e]=y0.MAX_BITS_PER_CHANNEL),i+=u[n][e];if(i>R[0])for(n=0;n<t.mode_gr;n++)for(e=0;e<t.channels_out;e++)u[n][e]*=R[0],u[n][e]/=i}}function ve(){var m=[-.1482523854003001,32.308141959636465,296.40344946382766,883.1344870032432,11113.947376231741,1057.2713659324597,305.7402417275812,30.825928907280012,3.8533188138216365,59.42900443849514,709.5899960123345,5281.91112291017,-5829.66483675846,-817.6293103748613,-76.91656988279972,-4.594269939176596,.9063471690191471,.1960342806591213,-.15466694054279598,34.324387823855965,301.8067566458425,817.599602898885,11573.795901679885,1181.2520595540152,321.59731579894424,31.232021761053772,3.7107095756221318,53.650946155329365,684.167428119626,5224.56624370173,-6366.391851890084,-908.9766368219582,-89.83068876699639,-5.411397422890401,.8206787908286602,.3901806440322567,-.16070888947830023,36.147034243915876,304.11815768187864,732.7429163887613,11989.60988270091,1300.012278487897,335.28490093152146,31.48816102859945,3.373875931311736,47.232241542899175,652.7371796173471,5132.414255594984,-6909.087078780055,-1001.9990371107289,-103.62185754286375,-6.104916304710272,.7416505462720353,.5805693545089249,-.16636367662261495,37.751650073343995,303.01103387567713,627.9747488785183,12358.763425278165,1412.2779918482834,346.7496836825721,31.598286663170416,3.1598635433980946,40.57878626349686,616.1671130880391,5007.833007176154,-7454.040671756168,-1095.7960341867115,-118.24411666465777,-6.818469345853504,.6681786379192989,.7653668647301797,-.1716176790982088,39.11551877123304,298.3413246578966,503.5259106886539,12679.589408408976,1516.5821921214542,355.9850766329023,31.395241710249053,2.9164211881972335,33.79716964664243,574.8943997801362,4853.234992253242,-7997.57021486075,-1189.7624067269965,-133.6444792601766,-7.7202770609839915,.5993769336819237,.9427934736519954,-.17645823955292173,40.21879108166477,289.9982036694474,359.3226160751053,12950.259102786438,1612.1013903507662,362.85067106591504,31.045922092242872,2.822222032597987,26.988862316190684,529.8996541764288,4671.371946949588,-8535.899136645805,-1282.5898586244496,-149.58553632943463,-8.643494270763135,.5345111359507916,1.111140466039205,-.36174739330527045,41.04429910497807,277.5463268268618,195.6386023135583,13169.43812144731,1697.6433561479398,367.40983966190305,30.557037410382826,2.531473372857427,20.070154905927314,481.50208566532336,4464.970341588308,-9065.36882077239,-1373.62841526722,-166.1660487028118,-9.58289321133207,.4729647758913199,1.268786568327291,-.36970682634889585,41.393213350082036,261.2935935556502,12.935476055240873,13336.131683328815,1772.508612059496,369.76534388639965,29.751323653701338,2.4023193045459172,13.304795348228817,430.5615775526625,4237.0568611071185,-9581.931701634761,-1461.6913552409758,-183.12733958476446,-10.718010163869403,.41421356237309503,1.414213562373095,-.37677560326535325,41.619486213528496,241.05423794991074,-187.94665032361226,13450.063605744153,1836.153896465782,369.4908799925761,29.001847876923147,2.0714759319987186,6.779591200894186,377.7767837205709,3990.386575512536,-10081.709459700915,-1545.947424837898,-200.3762958015653,-11.864482073055006,.3578057213145241,1.546020906725474,-.3829366947518991,41.1516456456653,216.47684307105183,-406.1569483347166,13511.136535077321,1887.8076599260432,367.3025214564151,28.136213436723654,1.913880671464418,.3829366947518991,323.85365704338597,3728.1472257487526,-10561.233882199509,-1625.2025997821418,-217.62525175416,-13.015432208941645,.3033466836073424,1.66293922460509,-.5822628872992417,40.35639251440489,188.20071124269245,-640.2706748618148,13519.21490106562,1927.6022433578062,362.8197642637487,26.968821921868447,1.7463817695935329,-5.62650678237171,269.3016715297017,3453.386536448852,-11016.145278780888,-1698.6569643425091,-234.7658734267683,-14.16351421663124,.2504869601913055,1.76384252869671,-.5887180101749253,39.23429103868072,155.76096234403798,-889.2492977967378,13475.470561874661,1955.0535223723712,356.4450994756727,25.894952980042156,1.5695032905781554,-11.181939564328772,214.80884394039484,3169.1640829158237,-11443.321309975563,-1765.1588461316153,-251.68908574481912,-15.49755935939164,.198912367379658,1.847759065022573,-.7912582233652842,37.39369355329111,119.699486012458,-1151.0956593239027,13380.446257078214,1970.3952110853447,348.01959814116185,24.731487364283044,1.3850130831637748,-16.421408865300393,161.05030052864092,2878.3322807850063,-11838.991423510031,-1823.985884688674,-268.2854986386903,-16.81724543849939,.1483359875383474,1.913880671464418,-.7960642926861912,35.2322109610459,80.01928065061526,-1424.0212633405113,13235.794061869668,1973.804052543835,337.9908651258184,23.289159354463873,1.3934255946442087,-21.099669467133474,108.48348407242611,2583.700758091299,-12199.726194855148,-1874.2780658979746,-284.2467154529415,-18.11369784385905,.09849140335716425,1.961570560806461,-.998795456205172,32.56307803611191,36.958364584370486,-1706.075448829146,13043.287458812016,1965.3831106103316,326.43182772364605,22.175018750622293,1.198638339011324,-25.371248002043963,57.53505923036915,2288.41886619975,-12522.674544337233,-1914.8400385312243,-299.26241273417224,-19.37805630698734,.04912684976946725,1.990369453344394,.035780907*c0.SQRT2*.5/2384e-9,.017876148*c0.SQRT2*.5/2384e-9,.003134727*c0.SQRT2*.5/2384e-9,.002457142*c0.SQRT2*.5/2384e-9,971317e-9*c0.SQRT2*.5/2384e-9,218868e-9*c0.SQRT2*.5/2384e-9,101566e-9*c0.SQRT2*.5/2384e-9,13828e-9*c0.SQRT2*.5/2384e-9,12804.797818791945,1945.5515939597317,313.4244966442953,20.801593959731544,1995.1556208053692,9.000838926174497,-29.20218120805369],V=12,Z=36,k=[[2382191739347913e-28,6423305872147834e-28,9400849094049688e-28,1122435026096556e-27,1183840321267481e-27,1122435026096556e-27,940084909404969e-27,6423305872147839e-28,2382191739347918e-28,5456116108943412e-27,4878985199565852e-27,4240448995017367e-27,3559909094758252e-27,2858043359288075e-27,2156177623817898e-27,1475637723558783e-27,8371015190102974e-28,2599706096327376e-28,-5456116108943412e-27,-4878985199565852e-27,-4240448995017367e-27,-3559909094758252e-27,-2858043359288076e-27,-2156177623817898e-27,-1475637723558783e-27,-8371015190102975e-28,-2599706096327376e-28,-2382191739347923e-28,-6423305872147843e-28,-9400849094049696e-28,-1122435026096556e-27,-1183840321267481e-27,-1122435026096556e-27,-9400849094049694e-28,-642330587214784e-27,-2382191739347918e-28],[2382191739347913e-28,6423305872147834e-28,9400849094049688e-28,1122435026096556e-27,1183840321267481e-27,1122435026096556e-27,9400849094049688e-28,6423305872147841e-28,2382191739347918e-28,5456116108943413e-27,4878985199565852e-27,4240448995017367e-27,3559909094758253e-27,2858043359288075e-27,2156177623817898e-27,1475637723558782e-27,8371015190102975e-28,2599706096327376e-28,-5461314069809755e-27,-4921085770524055e-27,-4343405037091838e-27,-3732668368707687e-27,-3093523840190885e-27,-2430835727329465e-27,-1734679010007751e-27,-974825365660928e-27,-2797435120168326e-28,0,0,0,0,0,0,-2283748241799531e-28,-4037858874020686e-28,-2146547464825323e-28],[.1316524975873958,.414213562373095,.7673269879789602,1.091308501069271,1.303225372841206,1.56968557711749,1.920982126971166,2.414213562373094,3.171594802363212,4.510708503662055,7.595754112725146,22.90376554843115,.984807753012208,.6427876096865394,.3420201433256688,.9396926207859084,-.1736481776669303,-.7660444431189779,.8660254037844387,.5,-.5144957554275265,-.4717319685649723,-.3133774542039019,-.1819131996109812,-.09457419252642064,-.04096558288530405,-.01419856857247115,-.003699974673760037,.8574929257125442,.8817419973177052,.9496286491027329,.9833145924917901,.9955178160675857,.9991605581781475,.999899195244447,.9999931550702802],[0,0,0,0,0,0,2283748241799531e-28,4037858874020686e-28,2146547464825323e-28,5461314069809755e-27,4921085770524055e-27,4343405037091838e-27,3732668368707687e-27,3093523840190885e-27,2430835727329466e-27,1734679010007751e-27,974825365660928e-27,2797435120168326e-28,-5456116108943413e-27,-4878985199565852e-27,-4240448995017367e-27,-3559909094758253e-27,-2858043359288075e-27,-2156177623817898e-27,-1475637723558782e-27,-8371015190102975e-28,-2599706096327376e-28,-2382191739347913e-28,-6423305872147834e-28,-9400849094049688e-28,-1122435026096556e-27,-1183840321267481e-27,-1122435026096556e-27,-9400849094049688e-28,-6423305872147841e-28,-2382191739347918e-28]],i0=k[l.SHORT_TYPE],N=k[l.SHORT_TYPE],J=k[l.SHORT_TYPE],s0=k[l.SHORT_TYPE],v0=[0,1,16,17,8,9,24,25,4,5,20,21,12,13,28,29,2,3,18,19,10,11,26,27,6,7,22,23,14,15,30,31];function w(E,L,a){for(var M=10,X=L+238-14-286,B=-15;B<0;B++){var _,S,u;_=m[M+-10],S=E[X+-224]*_,u=E[L+224]*_,_=m[M+-9],S+=E[X+-160]*_,u+=E[L+160]*_,_=m[M+-8],S+=E[X+-96]*_,u+=E[L+96]*_,_=m[M+-7],S+=E[X+-32]*_,u+=E[L+32]*_,_=m[M+-6],S+=E[X+32]*_,u+=E[L+-32]*_,_=m[M+-5],S+=E[X+96]*_,u+=E[L+-96]*_,_=m[M+-4],S+=E[X+160]*_,u+=E[L+-160]*_,_=m[M+-3],S+=E[X+224]*_,u+=E[L+-224]*_,_=m[M+-2],S+=E[L+-256]*_,u-=E[X+256]*_,_=m[M+-1],S+=E[L+-192]*_,u-=E[X+192]*_,_=m[M+0],S+=E[L+-128]*_,u-=E[X+128]*_,_=m[M+1],S+=E[L+-64]*_,u-=E[X+64]*_,_=m[M+2],S+=E[L+0]*_,u-=E[X+0]*_,_=m[M+3],S+=E[L+64]*_,u-=E[X+-64]*_,_=m[M+4],S+=E[L+128]*_,u-=E[X+-128]*_,_=m[M+5],S+=E[L+192]*_,u-=E[X+-192]*_,S*=m[M+6],_=u-S,a[30+B*2]=u+S,a[31+B*2]=m[M+7]*_,M+=18,L--,X++}{var S,u,x,R;u=E[L+-16]*m[M+-10],S=E[L+-32]*m[M+-2],u+=(E[L+-48]-E[L+16])*m[M+-9],S+=E[L+-96]*m[M+-1],u+=(E[L+-80]+E[L+48])*m[M+-8],S+=E[L+-160]*m[M+0],u+=(E[L+-112]-E[L+80])*m[M+-7],S+=E[L+-224]*m[M+1],u+=(E[L+-144]+E[L+112])*m[M+-6],S-=E[L+32]*m[M+2],u+=(E[L+-176]-E[L+144])*m[M+-5],S-=E[L+96]*m[M+3],u+=(E[L+-208]+E[L+176])*m[M+-4],S-=E[L+160]*m[M+4],u+=(E[L+-240]-E[L+208])*m[M+-3],S-=E[L+224],x=S-u,R=S+u,u=a[14],S=a[15]-u,a[31]=R+u,a[30]=x+S,a[15]=x-S,a[14]=R-u}{var t;t=a[28]-a[0],a[0]+=a[28],a[28]=t*m[M+-2*18+7],t=a[29]-a[1],a[1]+=a[29],a[29]=t*m[M+-2*18+7],t=a[26]-a[2],a[2]+=a[26],a[26]=t*m[M+-4*18+7],t=a[27]-a[3],a[3]+=a[27],a[27]=t*m[M+-4*18+7],t=a[24]-a[4],a[4]+=a[24],a[24]=t*m[M+-6*18+7],t=a[25]-a[5],a[5]+=a[25],a[25]=t*m[M+-6*18+7],t=a[22]-a[6],a[6]+=a[22],a[22]=t*c0.SQRT2,t=a[23]-a[7],a[7]+=a[23],a[23]=t*c0.SQRT2-a[7],a[7]-=a[6],a[22]-=a[7],a[23]-=a[22],t=a[6],a[6]=a[31]-t,a[31]=a[31]+t,t=a[7],a[7]=a[30]-t,a[30]=a[30]+t,t=a[22],a[22]=a[15]-t,a[15]=a[15]+t,t=a[23],a[23]=a[14]-t,a[14]=a[14]+t,t=a[20]-a[8],a[8]+=a[20],a[20]=t*m[M+-10*18+7],t=a[21]-a[9],a[9]+=a[21],a[21]=t*m[M+-10*18+7],t=a[18]-a[10],a[10]+=a[18],a[18]=t*m[M+-12*18+7],t=a[19]-a[11],a[11]+=a[19],a[19]=t*m[M+-12*18+7],t=a[16]-a[12],a[12]+=a[16],a[16]=t*m[M+-14*18+7],t=a[17]-a[13],a[13]+=a[17],a[17]=t*m[M+-14*18+7],t=-a[20]+a[24],a[20]+=a[24],a[24]=t*m[M+-12*18+7],t=-a[21]+a[25],a[21]+=a[25],a[25]=t*m[M+-12*18+7],t=a[4]-a[8],a[4]+=a[8],a[8]=t*m[M+-12*18+7],t=a[5]-a[9],a[5]+=a[9],a[9]=t*m[M+-12*18+7],t=a[0]-a[12],a[0]+=a[12],a[12]=t*m[M+-4*18+7],t=a[1]-a[13],a[1]+=a[13],a[13]=t*m[M+-4*18+7],t=a[16]-a[28],a[16]+=a[28],a[28]=t*m[M+-4*18+7],t=-a[17]+a[29],a[17]+=a[29],a[29]=t*m[M+-4*18+7],t=c0.SQRT2*(a[2]-a[10]),a[2]+=a[10],a[10]=t,t=c0.SQRT2*(a[3]-a[11]),a[3]+=a[11],a[11]=t,t=c0.SQRT2*(-a[18]+a[26]),a[18]+=a[26],a[26]=t-a[18],t=c0.SQRT2*(-a[19]+a[27]),a[19]+=a[27],a[27]=t-a[19],t=a[2],a[19]-=a[3],a[3]-=t,a[2]=a[31]-t,a[31]+=t,t=a[3],a[11]-=a[19],a[18]-=t,a[3]=a[30]-t,a[30]+=t,t=a[18],a[27]-=a[11],a[19]-=t,a[18]=a[15]-t,a[15]+=t,t=a[19],a[10]-=t,a[19]=a[14]-t,a[14]+=t,t=a[10],a[11]-=t,a[10]=a[23]-t,a[23]+=t,t=a[11],a[26]-=t,a[11]=a[22]-t,a[22]+=t,t=a[26],a[27]-=t,a[26]=a[7]-t,a[7]+=t,t=a[27],a[27]=a[6]-t,a[6]+=t,t=c0.SQRT2*(a[0]-a[4]),a[0]+=a[4],a[4]=t,t=c0.SQRT2*(a[1]-a[5]),a[1]+=a[5],a[5]=t,t=c0.SQRT2*(a[16]-a[20]),a[16]+=a[20],a[20]=t,t=c0.SQRT2*(a[17]-a[21]),a[17]+=a[21],a[21]=t,t=-c0.SQRT2*(a[8]-a[12]),a[8]+=a[12],a[12]=t-a[8],t=-c0.SQRT2*(a[9]-a[13]),a[9]+=a[13],a[13]=t-a[9],t=-c0.SQRT2*(a[25]-a[29]),a[25]+=a[29],a[29]=t-a[25],t=-c0.SQRT2*(a[24]+a[28]),a[24]-=a[28],a[28]=t-a[24],t=a[24]-a[16],a[24]=t,t=a[20]-t,a[20]=t,t=a[28]-t,a[28]=t,t=a[25]-a[17],a[25]=t,t=a[21]-t,a[21]=t,t=a[29]-t,a[29]=t,t=a[17]-a[1],a[17]=t,t=a[9]-t,a[9]=t,t=a[25]-t,a[25]=t,t=a[5]-t,a[5]=t,t=a[21]-t,a[21]=t,t=a[13]-t,a[13]=t,t=a[29]-t,a[29]=t,t=a[1]-a[0],a[1]=t,t=a[16]-t,a[16]=t,t=a[17]-t,a[17]=t,t=a[8]-t,a[8]=t,t=a[9]-t,a[9]=t,t=a[24]-t,a[24]=t,t=a[25]-t,a[25]=t,t=a[4]-t,a[4]=t,t=a[5]-t,a[5]=t,t=a[20]-t,a[20]=t,t=a[21]-t,a[21]=t,t=a[12]-t,a[12]=t,t=a[13]-t,a[13]=t,t=a[28]-t,a[28]=t,t=a[29]-t,a[29]=t,t=a[0],a[0]+=a[31],a[31]-=t,t=a[1],a[1]+=a[30],a[30]-=t,t=a[16],a[16]+=a[15],a[15]-=t,t=a[17],a[17]+=a[14],a[14]-=t,t=a[8],a[8]+=a[23],a[23]-=t,t=a[9],a[9]+=a[22],a[22]-=t,t=a[24],a[24]+=a[7],a[7]-=t,t=a[25],a[25]+=a[6],a[6]-=t,t=a[4],a[4]+=a[27],a[27]-=t,t=a[5],a[5]+=a[26],a[26]-=t,t=a[20],a[20]+=a[11],a[11]-=t,t=a[21],a[21]+=a[10],a[10]-=t,t=a[12],a[12]+=a[19],a[19]-=t,t=a[13],a[13]+=a[18],a[18]-=t,t=a[28],a[28]+=a[3],a[3]-=t,t=a[29],a[29]+=a[2],a[2]-=t}}function C(E,L){for(var a=0;a<3;a++){var M,X,B,_,S,u;_=E[L+2*3]*k[l.SHORT_TYPE][0]-E[L+5*3],M=E[L+0*3]*k[l.SHORT_TYPE][2]-E[L+3*3],X=_+M,B=_-M,_=E[L+5*3]*k[l.SHORT_TYPE][0]+E[L+2*3],M=E[L+3*3]*k[l.SHORT_TYPE][2]+E[L+0*3],S=_+M,u=-_+M,M=(E[L+1*3]*k[l.SHORT_TYPE][1]-E[L+4*3])*2069978111953089e-26,_=(E[L+4*3]*k[l.SHORT_TYPE][1]+E[L+1*3])*2069978111953089e-26,E[L+3*0]=X*190752519173728e-25+M,E[L+3*5]=-S*190752519173728e-25+_,B=B*.8660254037844387*1907525191737281e-26,S=S*.5*1907525191737281e-26+_,E[L+3*1]=B-S,E[L+3*2]=B+S,X=X*.5*1907525191737281e-26-M,u=u*.8660254037844387*1907525191737281e-26,E[L+3*3]=X+u,E[L+3*4]=X-u,L++}}function G(E,L,a){var M,X;{var B,_,S,u,x,R,t,y;B=a[17]-a[9],S=a[15]-a[11],u=a[14]-a[12],x=a[0]+a[8],R=a[1]+a[7],t=a[2]+a[6],y=a[3]+a[5],E[L+17]=x+t-y-(R-a[4]),X=(x+t-y)*N[12+7]+(R-a[4]),M=(B-S-u)*N[12+6],E[L+5]=M+X,E[L+6]=M-X,_=(a[16]-a[10])*N[12+6],R=R*N[12+7]+a[4],M=B*N[12+0]+_+S*N[12+1]+u*N[12+2],X=-x*N[12+4]+R-t*N[12+5]+y*N[12+3],E[L+1]=M+X,E[L+2]=M-X,M=B*N[12+1]-_-S*N[12+2]+u*N[12+0],X=-x*N[12+5]+R-t*N[12+3]+y*N[12+4],E[L+9]=M+X,E[L+10]=M-X,M=B*N[12+2]-_+S*N[12+0]-u*N[12+1],X=x*N[12+3]-R+t*N[12+4]-y*N[12+5],E[L+13]=M+X,E[L+14]=M-X}{var o,n,e,i,v,f,d,b;o=a[8]-a[0],e=a[6]-a[2],i=a[5]-a[3],v=a[17]+a[9],f=a[16]+a[10],d=a[15]+a[11],b=a[14]+a[12],E[L+0]=v+d+b+(f+a[13]),M=(v+d+b)*N[12+7]-(f+a[13]),X=(o-e+i)*N[12+6],E[L+11]=M+X,E[L+12]=M-X,n=(a[7]-a[1])*N[12+6],f=a[13]-f*N[12+7],M=v*N[12+3]-f+d*N[12+4]+b*N[12+5],X=o*N[12+2]+n+e*N[12+0]+i*N[12+1],E[L+3]=M+X,E[L+4]=M-X,M=-v*N[12+5]+f-d*N[12+3]-b*N[12+4],X=o*N[12+1]+n-e*N[12+2]-i*N[12+0],E[L+7]=M+X,E[L+8]=M-X,M=-v*N[12+4]+f-d*N[12+5]-b*N[12+3],X=o*N[12+0]-n+e*N[12+1]-i*N[12+2],E[L+15]=M+X,E[L+16]=M-X}}this.mdct_sub48=function(E,L,a){for(var M=L,X=286,B=0;B<E.channels_out;B++){for(var _=0;_<E.mode_gr;_++){for(var S,u=E.l3_side.tt[_][B],x=u.xr,R=0,t=E.sb_sample[B][1-_],y=0,o=0;o<18/2;o++)for(w(M,X,t[y]),w(M,X+32,t[y+1]),y+=2,X+=64,S=1;S<32;S+=2)t[y-1][S]*=-1;for(S=0;S<32;S++,R+=18){var n=u.block_type,e=E.sb_sample[B][_],i=E.sb_sample[B][1-_];if(u.mixed_block_flag!=0&&S<2&&(n=0),E.amp_filter[S]<1e-12)G0.fill(x,R+0,R+18,0);else{if(E.amp_filter[S]<1)for(var o=0;o<18;o++)i[o][v0[S]]*=E.amp_filter[S];if(n==l.SHORT_TYPE){for(var o=-V/4;o<0;o++){var v=k[l.SHORT_TYPE][o+3];x[R+o*3+9]=e[9+o][v0[S]]*v-e[8-o][v0[S]],x[R+o*3+18]=e[14-o][v0[S]]*v+e[15+o][v0[S]],x[R+o*3+10]=e[15+o][v0[S]]*v-e[14-o][v0[S]],x[R+o*3+19]=i[2-o][v0[S]]*v+i[3+o][v0[S]],x[R+o*3+11]=i[3+o][v0[S]]*v-i[2-o][v0[S]],x[R+o*3+20]=i[8-o][v0[S]]*v+i[9+o][v0[S]]}C(x,R)}else{for(var f=K(18),o=-Z/4;o<0;o++){var d,b;d=k[n][o+27]*i[o+9][v0[S]]+k[n][o+36]*i[8-o][v0[S]],b=k[n][o+9]*e[o+9][v0[S]]-k[n][o+18]*e[8-o][v0[S]],f[o+9]=d-b*i0[3+o+9],f[o+18]=d*i0[3+o+9]+b}G(x,R,f)}}if(n!=l.SHORT_TYPE&&S!=0)for(var o=7;o>=0;--o){var z,I;z=x[R+o]*J[20+o]+x[R+-1-o]*s0[28+o],I=x[R+o]*s0[28+o]-x[R+-1-o]*J[20+o],x[R+-1-o]=z,x[R+o]=I}}}if(M=a,X=286,E.mode_gr==1)for(var U=0;U<18;U++)k0.arraycopy(E.sb_sample[B][1][U],0,E.sb_sample[B][0][U],0,32)}}}function ae(){this.thm=new U0,this.en=new U0}l.ENCDELAY=576,l.POSTDELAY=1152,l.MDCTDELAY=48,l.FFTOFFSET=224+l.MDCTDELAY,l.DECDELAY=528,l.SBLIMIT=32,l.CBANDS=64,l.SBPSY_l=21,l.SBPSY_s=12,l.SBMAX_l=22,l.SBMAX_s=13,l.PSFB21=6,l.PSFB12=6,l.BLKSIZE=1024,l.HBLKSIZE=l.BLKSIZE/2+1,l.BLKSIZE_s=256,l.HBLKSIZE_s=l.BLKSIZE_s/2+1,l.NORM_TYPE=0,l.START_TYPE=1,l.SHORT_TYPE=2,l.STOP_TYPE=3,l.MPG_MD_LR_LR=0,l.MPG_MD_LR_I=1,l.MPG_MD_MS_LR=2,l.MPG_MD_MS_I=3,l.fircoef=[-.0207887*5,-.0378413*5,-.0432472*5,-.031183*5,779609e-23*5,.0467745*5,.10091*5,.151365*5,.187098*5];function l(){var m=l.FFTOFFSET,V=l.MPG_MD_MS_LR,Z=null;this.psy=null;var k=null,i0=null,N=null;this.setModules=function(C,G,E,L){Z=C,this.psy=G,k=G,i0=L,N=E};var J=new ve;function s0(C){var G,E;if(C.ATH.useAdjust==0){C.ATH.adjust=1;return}if(E=C.loudness_sq[0][0],G=C.loudness_sq[1][0],C.channels_out==2?(E+=C.loudness_sq[0][1],G+=C.loudness_sq[1][1]):(E+=E,G+=G),C.mode_gr==2&&(E=Math.max(E,G)),E*=.5,E*=C.ATH.aaSensitivityP,E>.03125)C.ATH.adjust>=1?C.ATH.adjust=1:C.ATH.adjust<C.ATH.adjustLimit&&(C.ATH.adjust=C.ATH.adjustLimit),C.ATH.adjustLimit=1;else{var L=31.98*E+625e-6;C.ATH.adjust>=L?(C.ATH.adjust*=L*.075+.925,C.ATH.adjust<L&&(C.ATH.adjust=L)):C.ATH.adjustLimit>=L?C.ATH.adjust=L:C.ATH.adjust<C.ATH.adjustLimit&&(C.ATH.adjust=C.ATH.adjustLimit),C.ATH.adjustLimit=L}}function v0(C){var G,E;for(C.bitrate_stereoMode_Hist[C.bitrate_index][4]++,C.bitrate_stereoMode_Hist[15][4]++,C.channels_out==2&&(C.bitrate_stereoMode_Hist[C.bitrate_index][C.mode_ext]++,C.bitrate_stereoMode_Hist[15][C.mode_ext]++),G=0;G<C.mode_gr;++G)for(E=0;E<C.channels_out;++E){var L=C.l3_side.tt[G][E].block_type|0;C.l3_side.tt[G][E].mixed_block_flag!=0&&(L=4),C.bitrate_blockType_Hist[C.bitrate_index][L]++,C.bitrate_blockType_Hist[C.bitrate_index][5]++,C.bitrate_blockType_Hist[15][L]++,C.bitrate_blockType_Hist[15][5]++}}function w(C,G){var E=C.internal_flags,L,a;if(E.lame_encode_frame_init==0){var M,X,B=K(2014),_=K(286+1152+576);for(E.lame_encode_frame_init=1,M=0,X=0;M<286+576*(1+E.mode_gr);++M)M<576*E.mode_gr?(B[M]=0,E.channels_out==2&&(_[M]=0)):(B[M]=G[0][X],E.channels_out==2&&(_[M]=G[1][X]),++X);for(a=0;a<E.mode_gr;a++)for(L=0;L<E.channels_out;L++)E.l3_side.tt[a][L].block_type=l.SHORT_TYPE;J.mdct_sub48(E,B,_)}}this.lame_encode_mp3_frame=function(C,G,E,L,a,M){var X,B=V0([2,2]);B[0][0]=new ae,B[0][1]=new ae,B[1][0]=new ae,B[1][1]=new ae;var _=V0([2,2]);_[0][0]=new ae,_[0][1]=new ae,_[1][0]=new ae,_[1][1]=new ae;var S,u=[null,null],x=C.internal_flags,R=T0([2,4]),t=[.5,.5],y=[[0,0],[0,0]],o=[[0,0],[0,0]],n,e,i;if(u[0]=G,u[1]=E,x.lame_encode_frame_init==0&&w(C,u),x.padding=0,(x.slot_lag-=x.frac_SpF)<0&&(x.slot_lag+=C.out_samplerate,x.padding=1),x.psymodel!=0){var v,f=[null,null],d=0,b=w0(2);for(i=0;i<x.mode_gr;i++){for(e=0;e<x.channels_out;e++)f[e]=u[e],d=576+i*576-l.FFTOFFSET;if(C.VBR==m0.vbr_mtrh||C.VBR==m0.vbr_mt?v=k.L3psycho_anal_vbr(C,f,d,i,B,_,y[i],o[i],R[i],b):v=k.L3psycho_anal_ns(C,f,d,i,B,_,y[i],o[i],R[i],b),v!=0)return-4;for(C.mode==$0.JOINT_STEREO&&(t[i]=R[i][2]+R[i][3],t[i]>0&&(t[i]=R[i][3]/t[i])),e=0;e<x.channels_out;e++){var z=x.l3_side.tt[i][e];z.block_type=b[e],z.mixed_block_flag=0}}}else for(i=0;i<x.mode_gr;i++)for(e=0;e<x.channels_out;e++)x.l3_side.tt[i][e].block_type=l.NORM_TYPE,x.l3_side.tt[i][e].mixed_block_flag=0,o[i][e]=y[i][e]=700;if(s0(x),J.mdct_sub48(x,u[0],u[1]),x.mode_ext=l.MPG_MD_LR_LR,C.force_ms)x.mode_ext=l.MPG_MD_MS_LR;else if(C.mode==$0.JOINT_STEREO){var I=0,U=0;for(i=0;i<x.mode_gr;i++)for(e=0;e<x.channels_out;e++)I+=o[i][e],U+=y[i][e];if(I<=1*U){var _0=x.l3_side.tt[0],r=x.l3_side.tt[x.mode_gr-1];_0[0].block_type==_0[1].block_type&&r[0].block_type==r[1].block_type&&(x.mode_ext=l.MPG_MD_MS_LR)}}if(x.mode_ext==V?(S=_,n=o):(S=B,n=y),C.analysis&&x.pinfo!=null)for(i=0;i<x.mode_gr;i++)for(e=0;e<x.channels_out;e++)x.pinfo.ms_ratio[i]=x.ms_ratio[i],x.pinfo.ms_ener_ratio[i]=t[i],x.pinfo.blocktype[i][e]=x.l3_side.tt[i][e].block_type,x.pinfo.pe[i][e]=n[i][e],k0.arraycopy(x.l3_side.tt[i][e].xr,0,x.pinfo.xr[i][e],0,576),x.mode_ext==V&&(x.pinfo.ers[i][e]=x.pinfo.ers[i][e+2],k0.arraycopy(x.pinfo.energy[i][e+2],0,x.pinfo.energy[i][e],0,x.pinfo.energy[i][e].length));if(C.VBR==m0.vbr_off||C.VBR==m0.vbr_abr){var s,g;for(s=0;s<18;s++)x.nsPsy.pefirbuf[s]=x.nsPsy.pefirbuf[s+1];for(g=0,i=0;i<x.mode_gr;i++)for(e=0;e<x.channels_out;e++)g+=n[i][e];for(x.nsPsy.pefirbuf[18]=g,g=x.nsPsy.pefirbuf[9],s=0;s<9;s++)g+=(x.nsPsy.pefirbuf[s]+x.nsPsy.pefirbuf[18-s])*l.fircoef[s];for(g=670*5*x.mode_gr*x.channels_out/g,i=0;i<x.mode_gr;i++)for(e=0;e<x.channels_out;e++)n[i][e]*=g}if(x.iteration_loop.iteration_loop(C,n,t,S),Z.format_bitstream(C),X=Z.copy_buffer(x,L,a,M,1),C.bWriteVbrTag&&i0.addVbrFrame(C),C.analysis&&x.pinfo!=null){for(e=0;e<x.channels_out;e++){var a0;for(a0=0;a0<m;a0++)x.pinfo.pcmdata[e][a0]=x.pinfo.pcmdata[e][a0+C.framesize];for(a0=m;a0<1600;a0++)x.pinfo.pcmdata[e][a0]=u[e][a0-m]}N.set_frame_pinfo(C,S)}return v0(x),X}}function ee(){this.sum=0,this.seen=0,this.want=0,this.pos=0,this.size=0,this.bag=null,this.nVbrNumFrames=0,this.nBytesWritten=0,this.TotalFrameSize=0}function z0(){this.tt=[[null,null],[null,null]],this.main_data_begin=0,this.private_bits=0,this.resvDrain_pre=0,this.resvDrain_post=0,this.scfsi=[w0(4),w0(4)];for(var m=0;m<2;m++)for(var V=0;V<2;V++)this.tt[m][V]=new g0}function U0(){this.l=K(l.SBMAX_l),this.s=T0([l.SBMAX_s,3]);var m=this;this.assign=function(V){k0.arraycopy(V.l,0,m.l,0,l.SBMAX_l);for(var Z=0;Z<l.SBMAX_s;Z++)for(var k=0;k<3;k++)m.s[Z][k]=V.s[Z][k]}}function te(){this.last_en_subshort=T0([4,9]),this.lastAttacks=w0(4),this.pefirbuf=K(19),this.longfact=K(l.SBMAX_l),this.shortfact=K(l.SBMAX_s),this.attackthre=0,this.attackthre_s=0}y0.MFSIZE=3*1152+l.ENCDELAY-l.MDCTDELAY,y0.MAX_HEADER_BUF=256,y0.MAX_BITS_PER_CHANNEL=4095,y0.MAX_BITS_PER_GRANULE=7680,y0.BPC=320;function y0(){var m=40;this.Class_ID=0,this.lame_encode_frame_init=0,this.iteration_init_init=0,this.fill_buffer_resample_init=0,this.mfbuf=T0([2,y0.MFSIZE]),this.mode_gr=0,this.channels_in=0,this.channels_out=0,this.resample_ratio=0,this.mf_samples_to_encode=0,this.mf_size=0,this.VBR_min_bitrate=0,this.VBR_max_bitrate=0,this.bitrate_index=0,this.samplerate_index=0,this.mode_ext=0,this.lowpass1=0,this.lowpass2=0,this.highpass1=0,this.highpass2=0,this.noise_shaping=0,this.noise_shaping_amp=0,this.substep_shaping=0,this.psymodel=0,this.noise_shaping_stop=0,this.subblock_gain=0,this.use_best_huffman=0,this.full_outer_loop=0,this.l3_side=new z0,this.ms_ratio=K(2),this.padding=0,this.frac_SpF=0,this.slot_lag=0,this.tag_spec=null,this.nMusicCRC=0,this.OldValue=w0(2),this.CurrentStep=w0(2),this.masking_lower=0,this.bv_scf=w0(576),this.pseudohalf=w0(M0.SFBMAX),this.sfb21_extra=!1,this.inbuf_old=new Array(2),this.blackfilt=new Array(2*y0.BPC+1),this.itime=t0(2),this.sideinfo_len=0,this.sb_sample=T0([2,2,18,l.SBLIMIT]),this.amp_filter=K(32);function V(){this.write_timing=0,this.ptr=0,this.buf=we(m)}this.header=new Array(y0.MAX_HEADER_BUF),this.h_ptr=0,this.w_ptr=0,this.ancillary_flag=0,this.ResvSize=0,this.ResvMax=0,this.scalefac_band=new f0,this.minval_l=K(l.CBANDS),this.minval_s=K(l.CBANDS),this.nb_1=T0([4,l.CBANDS]),this.nb_2=T0([4,l.CBANDS]),this.nb_s1=T0([4,l.CBANDS]),this.nb_s2=T0([4,l.CBANDS]),this.s3_ss=null,this.s3_ll=null,this.decay=0,this.thm=new Array(4),this.en=new Array(4),this.tot_ener=K(4),this.loudness_sq=T0([2,2]),this.loudness_sq_save=K(2),this.mld_l=K(l.SBMAX_l),this.mld_s=K(l.SBMAX_s),this.bm_l=w0(l.SBMAX_l),this.bo_l=w0(l.SBMAX_l),this.bm_s=w0(l.SBMAX_s),this.bo_s=w0(l.SBMAX_s),this.npart_l=0,this.npart_s=0,this.s3ind=X0([l.CBANDS,2]),this.s3ind_s=X0([l.CBANDS,2]),this.numlines_s=w0(l.CBANDS),this.numlines_l=w0(l.CBANDS),this.rnumlines_l=K(l.CBANDS),this.mld_cb_l=K(l.CBANDS),this.mld_cb_s=K(l.CBANDS),this.numlines_s_num1=0,this.numlines_l_num1=0,this.pe=K(4),this.ms_ratio_s_old=0,this.ms_ratio_l_old=0,this.ms_ener_ratio_old=0,this.blocktype_old=w0(2),this.nsPsy=new te,this.VBR_seek_table=new ee,this.ATH=null,this.PSY=null,this.nogap_total=0,this.nogap_current=0,this.decode_on_the_fly=!0,this.findReplayGain=!0,this.findPeakSample=!0,this.PeakSample=0,this.RadioGain=0,this.AudiophileGain=0,this.rgdata=null,this.noclipGainChange=0,this.noclipScale=0,this.bitrate_stereoMode_Hist=X0([16,4+1]),this.bitrate_blockType_Hist=X0([16,4+1+1]),this.pinfo=null,this.hip=null,this.in_buffer_nsamples=0,this.in_buffer_0=null,this.in_buffer_1=null,this.iteration_loop=null;for(var Z=0;Z<this.en.length;Z++)this.en[Z]=new U0;for(var Z=0;Z<this.thm.length;Z++)this.thm[Z]=new U0;for(var Z=0;Z<this.header.length;Z++)this.header[Z]=new V}function W0(){var m=K(l.BLKSIZE),V=K(l.BLKSIZE_s/2),Z=[.9238795325112867,.3826834323650898,.9951847266721969,.0980171403295606,.9996988186962042,.02454122852291229,.9999811752826011,.006135884649154475];function k(N,J,s0){var v0=0,w,C,G;s0<<=1;var E=J+s0;w=4;do{var L,a,M,X,B,_,S;S=w>>1,X=w,B=w<<1,_=B+X,w=B<<1,C=J,G=C+S;do{var u,x,R,t;x=N[C+0]-N[C+X],u=N[C+0]+N[C+X],t=N[C+B]-N[C+_],R=N[C+B]+N[C+_],N[C+B]=u-R,N[C+0]=u+R,N[C+_]=x-t,N[C+X]=x+t,x=N[G+0]-N[G+X],u=N[G+0]+N[G+X],t=c0.SQRT2*N[G+_],R=c0.SQRT2*N[G+B],N[G+B]=u-R,N[G+0]=u+R,N[G+_]=x-t,N[G+X]=x+t,G+=w,C+=w}while(C<E);for(a=Z[v0+0],L=Z[v0+1],M=1;M<S;M++){var y,o;y=1-2*L*L,o=2*L*a,C=J+M,G=J+X-M;do{var n,e,i,u,x,v,R,f,t,d;e=o*N[C+X]-y*N[G+X],n=y*N[C+X]+o*N[G+X],x=N[C+0]-n,u=N[C+0]+n,v=N[G+0]-e,i=N[G+0]+e,e=o*N[C+_]-y*N[G+_],n=y*N[C+_]+o*N[G+_],t=N[C+B]-n,R=N[C+B]+n,d=N[G+B]-e,f=N[G+B]+e,e=L*R-a*d,n=a*R+L*d,N[C+B]=u-n,N[C+0]=u+n,N[G+_]=v-e,N[G+X]=v+e,e=a*f-L*t,n=L*f+a*t,N[G+B]=i-n,N[G+0]=i+n,N[C+_]=x-e,N[C+X]=x+e,G+=w,C+=w}while(C<E);y=a,a=y*Z[v0+0]-L*Z[v0+1],L=y*Z[v0+1]+L*Z[v0+0]}v0+=2}while(w<s0)}var i0=[0,128,64,192,32,160,96,224,16,144,80,208,48,176,112,240,8,136,72,200,40,168,104,232,24,152,88,216,56,184,120,248,4,132,68,196,36,164,100,228,20,148,84,212,52,180,116,244,12,140,76,204,44,172,108,236,28,156,92,220,60,188,124,252,2,130,66,194,34,162,98,226,18,146,82,210,50,178,114,242,10,138,74,202,42,170,106,234,26,154,90,218,58,186,122,250,6,134,70,198,38,166,102,230,22,150,86,214,54,182,118,246,14,142,78,206,46,174,110,238,30,158,94,222,62,190,126,254];this.fft_short=function(N,J,s0,v0,w){for(var C=0;C<3;C++){var G=l.BLKSIZE_s/2,E=65535&576/3*(C+1),L=l.BLKSIZE_s/8-1;do{var a,M,X,B,_,S=i0[L<<2]&255;a=V[S]*v0[s0][w+S+E],_=V[127-S]*v0[s0][w+S+E+128],M=a-_,a=a+_,X=V[S+64]*v0[s0][w+S+E+64],_=V[63-S]*v0[s0][w+S+E+192],B=X-_,X=X+_,G-=4,J[C][G+0]=a+X,J[C][G+2]=a-X,J[C][G+1]=M+B,J[C][G+3]=M-B,a=V[S+1]*v0[s0][w+S+E+1],_=V[126-S]*v0[s0][w+S+E+129],M=a-_,a=a+_,X=V[S+65]*v0[s0][w+S+E+65],_=V[62-S]*v0[s0][w+S+E+193],B=X-_,X=X+_,J[C][G+l.BLKSIZE_s/2+0]=a+X,J[C][G+l.BLKSIZE_s/2+2]=a-X,J[C][G+l.BLKSIZE_s/2+1]=M+B,J[C][G+l.BLKSIZE_s/2+3]=M-B}while(--L>=0);k(J[C],G,l.BLKSIZE_s/2)}},this.fft_long=function(N,J,s0,v0,w){var C=l.BLKSIZE/8-1,G=l.BLKSIZE/2;do{var E,L,a,M,X,B=i0[C]&255;E=m[B]*v0[s0][w+B],X=m[B+512]*v0[s0][w+B+512],L=E-X,E=E+X,a=m[B+256]*v0[s0][w+B+256],X=m[B+768]*v0[s0][w+B+768],M=a-X,a=a+X,G-=4,J[G+0]=E+a,J[G+2]=E-a,J[G+1]=L+M,J[G+3]=L-M,E=m[B+1]*v0[s0][w+B+1],X=m[B+513]*v0[s0][w+B+513],L=E-X,E=E+X,a=m[B+257]*v0[s0][w+B+257],X=m[B+769]*v0[s0][w+B+769],M=a-X,a=a+X,J[G+l.BLKSIZE/2+0]=E+a,J[G+l.BLKSIZE/2+2]=E-a,J[G+l.BLKSIZE/2+1]=L+M,J[G+l.BLKSIZE/2+3]=L-M}while(--C>=0);k(J,G,l.BLKSIZE/2)},this.init_fft=function(N){for(var J=0;J<l.BLKSIZE;J++)m[J]=.42-.5*Math.cos(2*Math.PI*(J+.5)/l.BLKSIZE)+.08*Math.cos(4*Math.PI*(J+.5)/l.BLKSIZE);for(var J=0;J<l.BLKSIZE_s/2;J++)V[J]=.5*(1-Math.cos(2*Math.PI*(J+.5)/l.BLKSIZE_s))}}function fe(){var m=new W0,V=2.302585092994046,Z=2,k=16,i0=2,N=16,J=.34,s0=1/(14752*14752)/(l.BLKSIZE/2),v0=.01,w=.8,C=.6,G=.3,E=3.5,L=4.4,a=25,M=21,X=.2302585093;function B(h){return h}function _(h,c){for(var T=0,p=0;p<l.BLKSIZE/2;++p)T+=h[p]*c.ATH.eql_w[p];return T*=s0,T}function S(h,c,T,p,D,A,F,P,H,e0,q){var r0=h.internal_flags;if(H<2)m.fft_long(r0,p[D],H,e0,q),m.fft_short(r0,A[F],H,e0,q);else if(H==2){for(var b0=l.BLKSIZE-1;b0>=0;--b0){var O0=p[D+0][b0],n0=p[D+1][b0];p[D+0][b0]=(O0+n0)*c0.SQRT2*.5,p[D+1][b0]=(O0-n0)*c0.SQRT2*.5}for(var H0=2;H0>=0;--H0)for(var b0=l.BLKSIZE_s-1;b0>=0;--b0){var O0=A[F+0][H0][b0],n0=A[F+1][H0][b0];A[F+0][H0][b0]=(O0+n0)*c0.SQRT2*.5,A[F+1][H0][b0]=(O0-n0)*c0.SQRT2*.5}}c[0]=p[D+0][0],c[0]*=c[0];for(var b0=l.BLKSIZE/2-1;b0>=0;--b0){var $=p[D+0][l.BLKSIZE/2-b0],B0=p[D+0][l.BLKSIZE/2+b0];c[l.BLKSIZE/2-b0]=($*$+B0*B0)*.5}for(var H0=2;H0>=0;--H0){T[H0][0]=A[F+0][H0][0],T[H0][0]*=T[H0][0];for(var b0=l.BLKSIZE_s/2-1;b0>=0;--b0){var $=A[F+0][H0][l.BLKSIZE_s/2-b0],B0=A[F+0][H0][l.BLKSIZE_s/2+b0];T[H0][l.BLKSIZE_s/2-b0]=($*$+B0*B0)*.5}}{for(var j0=0,b0=11;b0<l.HBLKSIZE;b0++)j0+=c[b0];r0.tot_ener[H]=j0}if(h.analysis){for(var b0=0;b0<l.HBLKSIZE;b0++)r0.pinfo.energy[P][H][b0]=r0.pinfo.energy_save[H][b0],r0.pinfo.energy_save[H][b0]=c[b0];r0.pinfo.pe[P][H]=r0.pe[H]}h.athaa_loudapprox==2&&H<2&&(r0.loudness_sq[P][H]=r0.loudness_sq_save[H],r0.loudness_sq_save[H]=_(c,r0))}var u=8,x=23,R=15,t,y,o,n=[1,.79433,.63096,.63096,.63096,.63096,.63096,.25119,.11749];function e(){t=Math.pow(10,(u+1)/16),y=Math.pow(10,(x+1)/16),o=Math.pow(10,R/10)}var i=[3.3246*3.3246,3.23837*3.23837,3.15437*3.15437,3.00412*3.00412,2.86103*2.86103,2.65407*2.65407,2.46209*2.46209,2.284*2.284,2.11879*2.11879,1.96552*1.96552,1.82335*1.82335,1.69146*1.69146,1.56911*1.56911,1.46658*1.46658,1.37074*1.37074,1.31036*1.31036,1.25264*1.25264,1.20648*1.20648,1.16203*1.16203,1.12765*1.12765,1.09428*1.09428,1.0659*1.0659,1.03826*1.03826,1.01895*1.01895,1],v=[1.33352*1.33352,1.35879*1.35879,1.38454*1.38454,1.39497*1.39497,1.40548*1.40548,1.3537*1.3537,1.30382*1.30382,1.22321*1.22321,1.14758*1.14758,1],f=[2.35364*2.35364,2.29259*2.29259,2.23313*2.23313,2.12675*2.12675,2.02545*2.02545,1.87894*1.87894,1.74303*1.74303,1.61695*1.61695,1.49999*1.49999,1.39148*1.39148,1.29083*1.29083,1.19746*1.19746,1.11084*1.11084,1.03826*1.03826];function d(h,c,T,p,D,A){var F;if(c>h)if(c<h*y)F=c/h;else return h+c;else{if(h>=c*y)return h+c;F=h/c}if(h+=c,p+3<=3+3){if(F>=t)return h;var P=0|c0.FAST_LOG10_X(F,16);return h*v[P]}var P=0|c0.FAST_LOG10_X(F,16);if(A!=0?c=D.ATH.cb_s[T]*D.ATH.adjust:c=D.ATH.cb_l[T]*D.ATH.adjust,h<o*c){if(h>c){var H,e0;return H=1,P<=13&&(H=f[P]),e0=c0.FAST_LOG10_X(h/c,10/15),h*((i[P]-H)*e0+H)}return P>13?h:h*f[P]}return h*i[P]}var b=[1.33352*1.33352,1.35879*1.35879,1.38454*1.38454,1.39497*1.39497,1.40548*1.40548,1.3537*1.3537,1.30382*1.30382,1.22321*1.22321,1.14758*1.14758,1];function z(h,c,T){var p;if(h<0&&(h=0),c<0&&(c=0),h<=0)return c;if(c<=0)return h;if(c>h?p=c/h:p=h/c,-2<=T&&T<=2){if(p>=t)return h+c;var D=0|c0.FAST_LOG10_X(p,16);return(h+c)*b[D]}return p<y?h+c:(h<c&&(h=c),h)}function I(h,c){var T=h.internal_flags;if(T.channels_out>1){for(var p=0;p<l.SBMAX_l;p++){var D=T.thm[0].l[p],A=T.thm[1].l[p];T.thm[0].l[p]+=A*c,T.thm[1].l[p]+=D*c}for(var p=0;p<l.SBMAX_s;p++)for(var F=0;F<3;F++){var D=T.thm[0].s[p][F],A=T.thm[1].s[p][F];T.thm[0].s[p][F]+=A*c,T.thm[1].s[p][F]+=D*c}}}function U(h){for(var c=0;c<l.SBMAX_l;c++)if(!(h.thm[0].l[c]>1.58*h.thm[1].l[c]||h.thm[1].l[c]>1.58*h.thm[0].l[c])){var T=h.mld_l[c]*h.en[3].l[c],p=Math.max(h.thm[2].l[c],Math.min(h.thm[3].l[c],T));T=h.mld_l[c]*h.en[2].l[c];var D=Math.max(h.thm[3].l[c],Math.min(h.thm[2].l[c],T));h.thm[2].l[c]=p,h.thm[3].l[c]=D}for(var c=0;c<l.SBMAX_s;c++)for(var A=0;A<3;A++)if(!(h.thm[0].s[c][A]>1.58*h.thm[1].s[c][A]||h.thm[1].s[c][A]>1.58*h.thm[0].s[c][A])){var T=h.mld_s[c]*h.en[3].s[c][A],p=Math.max(h.thm[2].s[c][A],Math.min(h.thm[3].s[c][A],T));T=h.mld_s[c]*h.en[2].s[c][A];var D=Math.max(h.thm[3].s[c][A],Math.min(h.thm[2].s[c][A],T));h.thm[2].s[c][A]=p,h.thm[3].s[c][A]=D}}function _0(h,c,T){var p=c,D=Math.pow(10,T);c*=2,p*=2;for(var A=0;A<l.SBMAX_l;A++){var F,P,H,e0;if(e0=h.ATH.cb_l[h.bm_l[A]]*D,F=Math.min(Math.max(h.thm[0].l[A],e0),Math.max(h.thm[1].l[A],e0)),P=Math.max(h.thm[2].l[A],e0),H=Math.max(h.thm[3].l[A],e0),F*c<P+H){var q=F*p/(P+H);P*=q,H*=q}h.thm[2].l[A]=Math.min(P,h.thm[2].l[A]),h.thm[3].l[A]=Math.min(H,h.thm[3].l[A])}D*=l.BLKSIZE_s/l.BLKSIZE;for(var A=0;A<l.SBMAX_s;A++)for(var r0=0;r0<3;r0++){var F,P,H,e0;if(e0=h.ATH.cb_s[h.bm_s[A]]*D,F=Math.min(Math.max(h.thm[0].s[A][r0],e0),Math.max(h.thm[1].s[A][r0],e0)),P=Math.max(h.thm[2].s[A][r0],e0),H=Math.max(h.thm[3].s[A][r0],e0),F*c<P+H){var q=F*c/(P+H);P*=q,H*=q}h.thm[2].s[A][r0]=Math.min(h.thm[2].s[A][r0],P),h.thm[3].s[A][r0]=Math.min(h.thm[3].s[A][r0],H)}}function r(h,c,T,p,D){var A,F,P=0,H=0;for(A=F=0;A<l.SBMAX_s;++F,++A){for(var e0=h.bo_s[A],q=h.npart_s,r0=e0<q?e0:q;F<r0;)P+=c[F],H+=T[F],F++;if(h.en[p].s[A][D]=P,h.thm[p].s[A][D]=H,F>=q){++A;break}{var b0=h.PSY.bo_s_weight[A],O0=1-b0;P=b0*c[F],H=b0*T[F],h.en[p].s[A][D]+=P,h.thm[p].s[A][D]+=H,P=O0*c[F],H=O0*T[F]}}for(;A<l.SBMAX_s;++A)h.en[p].s[A][D]=0,h.thm[p].s[A][D]=0}function s(h,c,T,p){var D,A,F=0,P=0;for(D=A=0;D<l.SBMAX_l;++A,++D){for(var H=h.bo_l[D],e0=h.npart_l,q=H<e0?H:e0;A<q;)F+=c[A],P+=T[A],A++;if(h.en[p].l[D]=F,h.thm[p].l[D]=P,A>=e0){++D;break}{var r0=h.PSY.bo_l_weight[D],b0=1-r0;F=r0*c[A],P=r0*T[A],h.en[p].l[D]+=F,h.thm[p].l[D]+=P,F=b0*c[A],P=b0*T[A]}}for(;D<l.SBMAX_l;++D)h.en[p].l[D]=0,h.thm[p].l[D]=0}function g(h,c,T,p,D,A){var F=h.internal_flags,P,H;for(H=P=0;H<F.npart_s;++H){for(var e0=0,q=0,r0=F.numlines_s[H],b0=0;b0<r0;++b0,++P){var O0=c[A][P];e0+=O0,q<O0&&(q=O0)}T[H]=e0}for(P=H=0;H<F.npart_s;H++){var n0=F.s3ind_s[H][0],H0=F.s3_ss[P++]*T[n0];for(++n0;n0<=F.s3ind_s[H][1];)H0+=F.s3_ss[P]*T[n0],++P,++n0;{var $=i0*F.nb_s1[D][H];p[H]=Math.min(H0,$)}if(F.blocktype_old[D&1]==l.SHORT_TYPE){var $=N*F.nb_s2[D][H],B0=p[H];p[H]=Math.min($,B0)}F.nb_s2[D][H]=F.nb_s1[D][H],F.nb_s1[D][H]=H0}for(;H<=l.CBANDS;++H)T[H]=0,p[H]=0}function a0(h,c,T,p){var D=h.internal_flags;h.short_blocks==C0.short_block_coupled&&!(c[0]!=0&&c[1]!=0)&&(c[0]=c[1]=0);for(var A=0;A<D.channels_out;A++)p[A]=l.NORM_TYPE,h.short_blocks==C0.short_block_dispensed&&(c[A]=1),h.short_blocks==C0.short_block_forced&&(c[A]=0),c[A]!=0?D.blocktype_old[A]==l.SHORT_TYPE&&(p[A]=l.STOP_TYPE):(p[A]=l.SHORT_TYPE,D.blocktype_old[A]==l.NORM_TYPE&&(D.blocktype_old[A]=l.START_TYPE),D.blocktype_old[A]==l.STOP_TYPE&&(D.blocktype_old[A]=l.SHORT_TYPE)),T[A]=D.blocktype_old[A],D.blocktype_old[A]=p[A]}function u0(h,c,T){return T>=1?h:T<=0?c:c>0?Math.pow(h/c,T)*c:0}var A0=[11.8,13.6,17.2,32,46.5,51.3,57.5,67.1,71.5,84.6,97.6,130];function R0(h,c){for(var T=309.07,p=0;p<l.SBMAX_s-1;p++)for(var D=0;D<3;D++){var A=h.thm.s[p][D];if(A>0){var F=A*c,P=h.en.s[p][D];P>F&&(P>F*1e10?T+=A0[p]*(10*V):T+=A0[p]*c0.FAST_LOG10(P/F))}}return T}var E0=[6.8,5.8,5.8,6.4,6.5,9.9,12.1,14.4,15,18.9,21.6,26.9,34.2,40.2,46.8,56.5,60.7,73.9,85.7,93.4,126.1];function D0(h,c){for(var T=281.0575,p=0;p<l.SBMAX_l-1;p++){var D=h.thm.l[p];if(D>0){var A=D*c,F=h.en.l[p];F>A&&(F>A*1e10?T+=E0[p]*(10*V):T+=E0[p]*c0.FAST_LOG10(F/A))}}return T}function I0(h,c,T,p,D){var A,F;for(A=F=0;A<h.npart_l;++A){var P=0,H=0,e0;for(e0=0;e0<h.numlines_l[A];++e0,++F){var q=c[F];P+=q,H<q&&(H=q)}T[A]=P,p[A]=H,D[A]=P*h.rnumlines_l[A]}}function h0(h,c,T,p){var D=n.length-1,A=0,F=T[A]+T[A+1];if(F>0){var P=c[A];P<c[A+1]&&(P=c[A+1]),F=20*(P*2-F)/(F*(h.numlines_l[A]+h.numlines_l[A+1]-1));var H=0|F;H>D&&(H=D),p[A]=H}else p[A]=0;for(A=1;A<h.npart_l-1;A++)if(F=T[A-1]+T[A]+T[A+1],F>0){var P=c[A-1];P<c[A]&&(P=c[A]),P<c[A+1]&&(P=c[A+1]),F=20*(P*3-F)/(F*(h.numlines_l[A-1]+h.numlines_l[A]+h.numlines_l[A+1]-1));var H=0|F;H>D&&(H=D),p[A]=H}else p[A]=0;if(F=T[A-1]+T[A],F>0){var P=c[A-1];P<c[A]&&(P=c[A]),F=20*(P*2-F)/(F*(h.numlines_l[A-1]+h.numlines_l[A]-1));var H=0|F;H>D&&(H=D),p[A]=H}else p[A]=0}var le=[-865163e-23*2,-.00851586*2,-674764e-23*2,.0209036*2,-336639e-22*2,-.0438162*2,-154175e-22*2,.0931738*2,-552212e-22*2,-.313819*2];this.L3psycho_anal_ns=function(h,c,T,p,D,A,F,P,H,e0){var q=h.internal_flags,r0=T0([2,l.BLKSIZE]),b0=T0([2,3,l.BLKSIZE_s]),O0=K(l.CBANDS+1),n0=K(l.CBANDS+1),H0=K(l.CBANDS+2),$=w0(2),B0=w0(2),j0,l0,p0,o0,N0,ue,d0,q0,J0=T0([2,576]),he,He=w0(l.CBANDS+2),Se=w0(l.CBANDS+2);for(G0.fill(Se,0),j0=q.channels_out,h.mode==$0.JOINT_STEREO&&(j0=4),h.VBR==m0.vbr_off?he=q.ResvMax==0?0:q.ResvSize/q.ResvMax*.5:h.VBR==m0.vbr_rh||h.VBR==m0.vbr_mtrh||h.VBR==m0.vbr_mt?he=.6:he=1,l0=0;l0<q.channels_out;l0++){var ce=c[l0],Ie=T+576-350-M+192;for(o0=0;o0<576;o0++){var Ne,De;for(Ne=ce[Ie+o0+10],De=0,N0=0;N0<(M-1)/2-1;N0+=2)Ne+=le[N0]*(ce[Ie+o0+N0]+ce[Ie+o0+M-N0]),De+=le[N0+1]*(ce[Ie+o0+N0+1]+ce[Ie+o0+M-N0-1]);J0[l0][o0]=Ne+De}D[p][l0].en.assign(q.en[l0]),D[p][l0].thm.assign(q.thm[l0]),j0>2&&(A[p][l0].en.assign(q.en[l0+2]),A[p][l0].thm.assign(q.thm[l0+2]))}for(l0=0;l0<j0;l0++){var Xe,Pe,Le=K(12),Qe=[0,0,0,0],e1=K(12),u1=1,B1,T1=K(l.CBANDS),E1=K(l.CBANDS),me=[0,0,0,0],p1=K(l.HBLKSIZE),y1=T0([3,l.HBLKSIZE_s]);for(o0=0;o0<3;o0++)Le[o0]=q.nsPsy.last_en_subshort[l0][o0+6],e1[o0]=Le[o0]/q.nsPsy.last_en_subshort[l0][o0+4],Qe[0]+=Le[o0];if(l0==2)for(o0=0;o0<576;o0++){var h1,c1;h1=J0[0][o0],c1=J0[1][o0],J0[0][o0]=h1+c1,J0[1][o0]=h1-c1}{var w1=J0[l0&1],r1=0;for(o0=0;o0<9;o0++){for(var L1=r1+64,Ee=1;r1<L1;r1++)Ee<Math.abs(w1[r1])&&(Ee=Math.abs(w1[r1]));q.nsPsy.last_en_subshort[l0][o0]=Le[o0+3]=Ee,Qe[1+o0/3]+=Ee,Ee>Le[o0+3-2]?Ee=Ee/Le[o0+3-2]:Le[o0+3-2]>Ee*10?Ee=Le[o0+3-2]/(Ee*10):Ee=0,e1[o0+3]=Ee}}if(h.analysis){var m1=e1[0];for(o0=1;o0<12;o0++)m1<e1[o0]&&(m1=e1[o0]);q.pinfo.ers[p][l0]=q.pinfo.ers_save[l0],q.pinfo.ers_save[l0]=m1}for(B1=l0==3?q.nsPsy.attackthre_s:q.nsPsy.attackthre,o0=0;o0<12;o0++)me[o0/3]==0&&e1[o0]>B1&&(me[o0/3]=o0%3+1);for(o0=1;o0<4;o0++){var b1;Qe[o0-1]>Qe[o0]?b1=Qe[o0-1]/Qe[o0]:b1=Qe[o0]/Qe[o0-1],b1<1.7&&(me[o0]=0,o0==1&&(me[0]=0))}for(me[0]!=0&&q.nsPsy.lastAttacks[l0]!=0&&(me[0]=0),(q.nsPsy.lastAttacks[l0]==3||me[0]+me[1]+me[2]+me[3]!=0)&&(u1=0,me[1]!=0&&me[0]!=0&&(me[1]=0),me[2]!=0&&me[1]!=0&&(me[2]=0),me[3]!=0&&me[2]!=0&&(me[3]=0)),l0<2?B0[l0]=u1:u1==0&&(B0[0]=B0[1]=0),H[l0]=q.tot_ener[l0],Pe=b0,Xe=r0,S(h,p1,y1,Xe,l0&1,Pe,l0&1,p,l0,c,T),I0(q,p1,O0,T1,E1),h0(q,T1,E1,He),q0=0;q0<3;q0++){var d1,ke;for(g(h,y1,n0,H0,l0,q0),r(q,n0,H0,l0,q0),d0=0;d0<l.SBMAX_s;d0++){if(ke=q.thm[l0].s[d0][q0],ke*=w,me[q0]>=2||me[q0+1]==1){var t1=q0!=0?q0-1:2,Ee=u0(q.thm[l0].s[d0][t1],ke,C*he);ke=Math.min(ke,Ee)}if(me[q0]==1){var t1=q0!=0?q0-1:2,Ee=u0(q.thm[l0].s[d0][t1],ke,G*he);ke=Math.min(ke,Ee)}else if(q0!=0&&me[q0-1]==3||q0==0&&q.nsPsy.lastAttacks[l0]==3){var t1=q0!=2?q0+1:0,Ee=u0(q.thm[l0].s[d0][t1],ke,G*he);ke=Math.min(ke,Ee)}d1=Le[q0*3+3]+Le[q0*3+4]+Le[q0*3+5],Le[q0*3+5]*6<d1&&(ke*=.5,Le[q0*3+4]*6<d1&&(ke*=.5)),q.thm[l0].s[d0][q0]=ke}}for(q.nsPsy.lastAttacks[l0]=me[2],ue=0,p0=0;p0<q.npart_l;p0++){for(var We=q.s3ind[p0][0],S1=O0[We]*n[He[We]],Je=q.s3_ll[ue++]*S1;++We<=q.s3ind[p0][1];)S1=O0[We]*n[He[We]],Je=d(Je,q.s3_ll[ue++]*S1,We,We-p0,q,0);Je*=.158489319246111,q.blocktype_old[l0&1]==l.SHORT_TYPE?H0[p0]=Je:H0[p0]=u0(Math.min(Je,Math.min(Z*q.nb_1[l0][p0],k*q.nb_2[l0][p0])),Je,he),q.nb_2[l0][p0]=q.nb_1[l0][p0],q.nb_1[l0][p0]=Je}for(;p0<=l.CBANDS;++p0)O0[p0]=0,H0[p0]=0;s(q,O0,H0,l0)}if((h.mode==$0.STEREO||h.mode==$0.JOINT_STEREO)&&h.interChRatio>0&&I(h,h.interChRatio),h.mode==$0.JOINT_STEREO){var x1;U(q),x1=h.msfix,Math.abs(x1)>0&&_0(q,x1,h.ATHlower*q.ATH.adjust)}for(a0(h,B0,e0,$),l0=0;l0<j0;l0++){var n1,i1=0,o1,v1;l0>1?(n1=P,i1=-2,o1=l.NORM_TYPE,(e0[0]==l.SHORT_TYPE||e0[1]==l.SHORT_TYPE)&&(o1=l.SHORT_TYPE),v1=A[p][l0-2]):(n1=F,i1=0,o1=e0[l0],v1=D[p][l0]),o1==l.SHORT_TYPE?n1[i1+l0]=R0(v1,q.masking_lower):n1[i1+l0]=D0(v1,q.masking_lower),h.analysis&&(q.pinfo.pe[p][l0]=n1[i1+l0])}return 0};function Te(h,c,T,p,D,A,F,P){var H=h.internal_flags;if(p<2)m.fft_long(H,F[P],p,c,T);else if(p==2)for(var e0=l.BLKSIZE-1;e0>=0;--e0){var q=F[P+0][e0],r0=F[P+1][e0];F[P+0][e0]=(q+r0)*c0.SQRT2*.5,F[P+1][e0]=(q-r0)*c0.SQRT2*.5}A[0]=F[P+0][0],A[0]*=A[0];for(var e0=l.BLKSIZE/2-1;e0>=0;--e0){var b0=F[P+0][l.BLKSIZE/2-e0],O0=F[P+0][l.BLKSIZE/2+e0];A[l.BLKSIZE/2-e0]=(b0*b0+O0*O0)*.5}{for(var n0=0,e0=11;e0<l.HBLKSIZE;e0++)n0+=A[e0];H.tot_ener[p]=n0}if(h.analysis){for(var e0=0;e0<l.HBLKSIZE;e0++)H.pinfo.energy[D][p][e0]=H.pinfo.energy_save[p][e0],H.pinfo.energy_save[p][e0]=A[e0];H.pinfo.pe[D][p]=H.pe[p]}}function oe(h,c,T,p,D,A,F,P){var H=h.internal_flags;if(D==0&&p<2&&m.fft_short(H,F[P],p,c,T),p==2)for(var e0=l.BLKSIZE_s-1;e0>=0;--e0){var q=F[P+0][D][e0],r0=F[P+1][D][e0];F[P+0][D][e0]=(q+r0)*c0.SQRT2*.5,F[P+1][D][e0]=(q-r0)*c0.SQRT2*.5}A[D][0]=F[P+0][D][0],A[D][0]*=A[D][0];for(var e0=l.BLKSIZE_s/2-1;e0>=0;--e0){var b0=F[P+0][D][l.BLKSIZE_s/2-e0],O0=F[P+0][D][l.BLKSIZE_s/2+e0];A[D][l.BLKSIZE_s/2-e0]=(b0*b0+O0*O0)*.5}}function xe(h,c,T,p){var D=h.internal_flags;h.athaa_loudapprox==2&&T<2&&(D.loudness_sq[c][T]=D.loudness_sq_save[T],D.loudness_sq_save[T]=_(p,D))}var Ae=[-865163e-23*2,-.00851586*2,-674764e-23*2,.0209036*2,-336639e-22*2,-.0438162*2,-154175e-22*2,.0931738*2,-552212e-22*2,-.313819*2];function Re(h,c,T,p,D,A,F,P,H,e0){for(var q=T0([2,576]),r0=h.internal_flags,b0=r0.channels_out,O0=h.mode==$0.JOINT_STEREO?4:b0,n0=0;n0<b0;n0++){firbuf=c[n0];for(var H0=T+576-350-M+192,$=0;$<576;$++){var B0,j0;B0=firbuf[H0+$+10],j0=0;for(var l0=0;l0<(M-1)/2-1;l0+=2)B0+=Ae[l0]*(firbuf[H0+$+l0]+firbuf[H0+$+M-l0]),j0+=Ae[l0+1]*(firbuf[H0+$+l0+1]+firbuf[H0+$+M-l0-1]);q[n0][$]=B0+j0}D[p][n0].en.assign(r0.en[n0]),D[p][n0].thm.assign(r0.thm[n0]),O0>2&&(A[p][n0].en.assign(r0.en[n0+2]),A[p][n0].thm.assign(r0.thm[n0+2]))}for(var n0=0;n0<O0;n0++){var p0=K(12),o0=K(12),N0=[0,0,0,0],ue=q[n0&1],d0=0,q0=n0==3?r0.nsPsy.attackthre_s:r0.nsPsy.attackthre,J0=1;if(n0==2)for(var $=0,l0=576;l0>0;++$,--l0){var he=q[0][$],He=q[1][$];q[0][$]=he+He,q[1][$]=he-He}for(var $=0;$<3;$++)o0[$]=r0.nsPsy.last_en_subshort[n0][$+6],p0[$]=o0[$]/r0.nsPsy.last_en_subshort[n0][$+4],N0[0]+=o0[$];for(var $=0;$<9;$++){for(var Se=d0+64,ce=1;d0<Se;d0++)ce<Math.abs(ue[d0])&&(ce=Math.abs(ue[d0]));r0.nsPsy.last_en_subshort[n0][$]=o0[$+3]=ce,N0[1+$/3]+=ce,ce>o0[$+3-2]?ce=ce/o0[$+3-2]:o0[$+3-2]>ce*10?ce=o0[$+3-2]/(ce*10):ce=0,p0[$+3]=ce}for(var $=0;$<3;++$){var Ie=o0[$*3+3]+o0[$*3+4]+o0[$*3+5],Ne=1;o0[$*3+5]*6<Ie&&(Ne*=.5,o0[$*3+4]*6<Ie&&(Ne*=.5)),P[n0][$]=Ne}if(h.analysis){for(var De=p0[0],$=1;$<12;$++)De<p0[$]&&(De=p0[$]);r0.pinfo.ers[p][n0]=r0.pinfo.ers_save[n0],r0.pinfo.ers_save[n0]=De}for(var $=0;$<12;$++)H[n0][$/3]==0&&p0[$]>q0&&(H[n0][$/3]=$%3+1);for(var $=1;$<4;$++){var Xe=N0[$-1],Pe=N0[$],Le=Math.max(Xe,Pe);Le<4e4&&Xe<1.7*Pe&&Pe<1.7*Xe&&($==1&&H[n0][0]<=H[n0][$]&&(H[n0][0]=0),H[n0][$]=0)}H[n0][0]<=r0.nsPsy.lastAttacks[n0]&&(H[n0][0]=0),(r0.nsPsy.lastAttacks[n0]==3||H[n0][0]+H[n0][1]+H[n0][2]+H[n0][3]!=0)&&(J0=0,H[n0][1]!=0&&H[n0][0]!=0&&(H[n0][1]=0),H[n0][2]!=0&&H[n0][1]!=0&&(H[n0][2]=0),H[n0][3]!=0&&H[n0][2]!=0&&(H[n0][3]=0)),n0<2?e0[n0]=J0:J0==0&&(e0[0]=e0[1]=0),F[n0]=r0.tot_ener[n0]}}function Ce(h,c,T){if(T==0)for(var p=0;p<h.npart_s;p++)h.nb_s2[c][p]=h.nb_s1[c][p],h.nb_s1[c][p]=0}function Ze(h,c){for(var T=0;T<h.npart_l;T++)h.nb_2[c][T]=h.nb_1[c][T],h.nb_1[c][T]=0}function qe(h,c,T,p){var D=n.length-1,A=0,F=T[A]+T[A+1];if(F>0){var P=c[A];P<c[A+1]&&(P=c[A+1]),F=20*(P*2-F)/(F*(h.numlines_s[A]+h.numlines_s[A+1]-1));var H=0|F;H>D&&(H=D),p[A]=H}else p[A]=0;for(A=1;A<h.npart_s-1;A++)if(F=T[A-1]+T[A]+T[A+1],F>0){var P=c[A-1];P<c[A]&&(P=c[A]),P<c[A+1]&&(P=c[A+1]),F=20*(P*3-F)/(F*(h.numlines_s[A-1]+h.numlines_s[A]+h.numlines_s[A+1]-1));var H=0|F;H>D&&(H=D),p[A]=H}else p[A]=0;if(F=T[A-1]+T[A],F>0){var P=c[A-1];P<c[A]&&(P=c[A]),F=20*(P*2-F)/(F*(h.numlines_s[A-1]+h.numlines_s[A]-1));var H=0|F;H>D&&(H=D),p[A]=H}else p[A]=0}function Ye(h,c,T,p,D,A){var F=h.internal_flags,P=new float[l.CBANDS],H=K(l.CBANDS),e0,q,r0,b0=new int[l.CBANDS];for(r0=q=0;r0<F.npart_s;++r0){var O0=0,n0=0,H0=F.numlines_s[r0];for(e0=0;e0<H0;++e0,++q){var $=c[A][q];O0+=$,n0<$&&(n0=$)}T[r0]=O0,P[r0]=n0,H[r0]=O0/H0}for(;r0<l.CBANDS;++r0)P[r0]=0,H[r0]=0;for(qe(F,P,H,b0),q=r0=0;r0<F.npart_s;r0++){var B0=F.s3ind_s[r0][0],j0=F.s3ind_s[r0][1],l0,p0,o0,N0,ue;for(l0=b0[B0],p0=1,N0=F.s3_ss[q]*T[B0]*n[b0[B0]],++q,++B0;B0<=j0;)l0+=b0[B0],p0+=1,o0=F.s3_ss[q]*T[B0]*n[b0[B0]],N0=z(N0,o0,B0-r0),++q,++B0;l0=(1+2*l0)/(2*p0),ue=n[l0]*.5,N0*=ue,p[r0]=N0,F.nb_s2[D][r0]=F.nb_s1[D][r0],F.nb_s1[D][r0]=N0,o0=P[r0],o0*=F.minval_s[r0],o0*=ue,p[r0]>o0&&(p[r0]=o0),F.masking_lower>1&&(p[r0]*=F.masking_lower),p[r0]>T[r0]&&(p[r0]=T[r0]),F.masking_lower<1&&(p[r0]*=F.masking_lower)}for(;r0<l.CBANDS;++r0)T[r0]=0,p[r0]=0}function ze(h,c,T,p,D){var A=K(l.CBANDS),F=K(l.CBANDS),P=w0(l.CBANDS+2),H;I0(h,c,T,A,F),h0(h,A,F,P);var e0=0;for(H=0;H<h.npart_l;H++){var q,r0,b0,O0,n0=h.s3ind[H][0],H0=h.s3ind[H][1],$=0,B0=0;for($=P[n0],B0+=1,r0=h.s3_ll[e0]*T[n0]*n[P[n0]],++e0,++n0;n0<=H0;)$+=P[n0],B0+=1,q=h.s3_ll[e0]*T[n0]*n[P[n0]],O0=z(r0,q,n0-H),r0=O0,++e0,++n0;if($=(1+2*$)/(2*B0),b0=n[$]*.5,r0*=b0,h.blocktype_old[D&1]==l.SHORT_TYPE){var j0=Z*h.nb_1[D][H];j0>0?p[H]=Math.min(r0,j0):p[H]=Math.min(r0,T[H]*G)}else{var l0=k*h.nb_2[D][H],p0=Z*h.nb_1[D][H],j0;l0<=0&&(l0=r0),p0<=0&&(p0=r0),h.blocktype_old[D&1]==l.NORM_TYPE?j0=Math.min(p0,l0):j0=p0,p[H]=Math.min(r0,j0)}h.nb_2[D][H]=h.nb_1[D][H],h.nb_1[D][H]=r0,q=A[H],q*=h.minval_l[H],q*=b0,p[H]>q&&(p[H]=q),h.masking_lower>1&&(p[H]*=h.masking_lower),p[H]>T[H]&&(p[H]=T[H]),h.masking_lower<1&&(p[H]*=h.masking_lower)}for(;H<l.CBANDS;++H)T[H]=0,p[H]=0}function l1(h,c){var T=h.internal_flags;h.short_blocks==C0.short_block_coupled&&!(c[0]!=0&&c[1]!=0)&&(c[0]=c[1]=0);for(var p=0;p<T.channels_out;p++)h.short_blocks==C0.short_block_dispensed&&(c[p]=1),h.short_blocks==C0.short_block_forced&&(c[p]=0)}function _1(h,c,T){for(var p=h.internal_flags,D=0;D<p.channels_out;D++){var A=l.NORM_TYPE;c[D]!=0?p.blocktype_old[D]==l.SHORT_TYPE&&(A=l.STOP_TYPE):(A=l.SHORT_TYPE,p.blocktype_old[D]==l.NORM_TYPE&&(p.blocktype_old[D]=l.START_TYPE),p.blocktype_old[D]==l.STOP_TYPE&&(p.blocktype_old[D]=l.SHORT_TYPE)),T[D]=p.blocktype_old[D],p.blocktype_old[D]=A}}function $e(h,c,T,p,D,A,F){for(var P=A*2,H=A>0?Math.pow(10,D):1,e0,q,r0=0;r0<F;++r0){var b0=h[2][r0],O0=h[3][r0],n0=c[0][r0],H0=c[1][r0],$=c[2][r0],B0=c[3][r0];if(n0<=1.58*H0&&H0<=1.58*n0){var j0=T[r0]*O0,l0=T[r0]*b0;q=Math.max($,Math.min(B0,j0)),e0=Math.max(B0,Math.min($,l0))}else q=$,e0=B0;if(A>0){var p0,o0,N0=p[r0]*H;if(p0=Math.min(Math.max(n0,N0),Math.max(H0,N0)),$=Math.max(q,N0),B0=Math.max(e0,N0),o0=$+B0,o0>0&&p0*P<o0){var ue=p0*P/o0;$*=ue,B0*=ue}q=Math.min($,q),e0=Math.min(B0,e0)}q>b0&&(q=b0),e0>O0&&(e0=O0),c[2][r0]=q,c[3][r0]=e0}}this.L3psycho_anal_vbr=function(h,c,T,p,D,A,F,P,H,e0){var q=h.internal_flags,r0,b0,O0=K(l.HBLKSIZE),n0=T0([3,l.HBLKSIZE_s]),H0=T0([2,l.BLKSIZE]),$=T0([2,3,l.BLKSIZE_s]),B0=T0([4,l.CBANDS]),j0=T0([4,l.CBANDS]),l0=T0([4,3]),p0=.6,o0=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],N0=w0(2),ue=h.mode==$0.JOINT_STEREO?4:q.channels_out;Re(h,c,T,p,D,A,H,l0,o0,N0),l1(h,N0);{for(var d0=0;d0<ue;d0++){var q0=d0&1;r0=H0,Te(h,c,T,d0,p,O0,r0,q0),xe(h,p,d0,O0),N0[q0]!=0?ze(q,O0,B0[d0],j0[d0],d0):Ze(q,d0)}N0[0]+N0[1]==2&&h.mode==$0.JOINT_STEREO&&$e(B0,j0,q.mld_cb_l,q.ATH.cb_l,h.ATHlower*q.ATH.adjust,h.msfix,q.npart_l);for(var d0=0;d0<ue;d0++){var q0=d0&1;N0[q0]!=0&&s(q,B0[d0],j0[d0],d0)}}{for(var J0=0;J0<3;J0++){for(var d0=0;d0<ue;++d0){var q0=d0&1;N0[q0]!=0?Ce(q,d0,J0):(b0=$,oe(h,c,T,d0,J0,n0,b0,q0),Ye(h,n0,B0[d0],j0[d0],d0,J0))}N0[0]+N0[1]==0&&h.mode==$0.JOINT_STEREO&&$e(B0,j0,q.mld_cb_s,q.ATH.cb_s,h.ATHlower*q.ATH.adjust,h.msfix,q.npart_s);for(var d0=0;d0<ue;++d0){var q0=d0&1;N0[q0]==0&&r(q,B0[d0],j0[d0],d0,J0)}}for(var d0=0;d0<ue;d0++){var q0=d0&1;if(N0[q0]==0)for(var he=0;he<l.SBMAX_s;he++){for(var He=K(3),J0=0;J0<3;J0++){var Se=q.thm[d0].s[he][J0];if(Se*=w,o0[d0][J0]>=2||o0[d0][J0+1]==1){var ce=J0!=0?J0-1:2,Ie=u0(q.thm[d0].s[he][ce],Se,C*p0);Se=Math.min(Se,Ie)}else if(o0[d0][J0]==1){var ce=J0!=0?J0-1:2,Ie=u0(q.thm[d0].s[he][ce],Se,G*p0);Se=Math.min(Se,Ie)}else if(J0!=0&&o0[d0][J0-1]==3||J0==0&&q.nsPsy.lastAttacks[d0]==3){var ce=J0!=2?J0+1:0,Ie=u0(q.thm[d0].s[he][ce],Se,G*p0);Se=Math.min(Se,Ie)}Se*=l0[d0][J0],He[J0]=Se}for(var J0=0;J0<3;J0++)q.thm[d0].s[he][J0]=He[J0]}}}for(var d0=0;d0<ue;d0++)q.nsPsy.lastAttacks[d0]=o0[d0][2];_1(h,N0,e0);for(var d0=0;d0<ue;d0++){var Ne,De,Xe,Pe;d0>1?(Ne=P,De=-2,Xe=l.NORM_TYPE,(e0[0]==l.SHORT_TYPE||e0[1]==l.SHORT_TYPE)&&(Xe=l.SHORT_TYPE),Pe=A[p][d0-2]):(Ne=F,De=0,Xe=e0[d0],Pe=D[p][d0]),Xe==l.SHORT_TYPE?Ne[De+d0]=R0(Pe,q.masking_lower):Ne[De+d0]=D0(Pe,q.masking_lower),h.analysis&&(q.pinfo.pe[p][d0]=Ne[De+d0])}return 0};function Ge(h,c){var T=h,p;return T>=0?p=-T*27:p=T*c,p<=-72?0:Math.exp(p*X)}function f1(h){var c=0,T=0;{var p=0,D,A;for(p=0;Ge(p,h)>1e-20;p-=1);for(D=p,A=0;Math.abs(A-D)>1e-12;)p=(A+D)/2,Ge(p,h)>0?A=p:D=p;c=D}{var p=0,D,A;for(p=0;Ge(p,h)>1e-20;p+=1);for(D=0,A=p;Math.abs(A-D)>1e-12;)p=(A+D)/2,Ge(p,h)>0?D=p:A=p;T=A}{var F=0,P=1e3,H;for(H=0;H<=P;++H){var p=c+H*(T-c)/P,e0=Ge(p,h);F+=e0}{var q=(P+1)/(F*(T-c));return q}}}function C1(h){var c,T,p,D;return c=h,c>=0?c*=3:c*=1.5,c>=.5&&c<=2.5?(D=c-.5,T=8*(D*D-2*D)):T=0,c+=.474,p=15.811389+7.5*c-17.5*Math.sqrt(1+c*c),p<=-60?0:(c=Math.exp((T+p)*X),c/=.6609193,c)}function je(h){return h<0&&(h=0),h=h*.001,13*Math.atan(.76*h)+3.5*Math.atan(h*h/(7.5*7.5))}function M1(h,c,T,p,D,A,F,P,H,e0,q,r0){var b0=K(l.CBANDS+1),O0=P/(r0>15?2*576:2*192),n0=w0(l.HBLKSIZE),H0;P/=H;var $=0,B0=0;for(H0=0;H0<l.CBANDS;H0++){var j0,l0;for(j0=je(P*$),b0[H0]=P*$,l0=$;je(P*l0)-j0<J&&l0<=H/2;l0++);for(h[H0]=l0-$,B0=H0+1;$<l0;)n0[$++]=H0;if($>H/2){$=H/2,++H0;break}}b0[H0]=P*$;for(var p0=0;p0<r0;p0++){var o0,N0,ue,d0,q0;ue=e0[p0],d0=e0[p0+1],o0=0|Math.floor(.5+q*(ue-.5)),o0<0&&(o0=0),N0=0|Math.floor(.5+q*(d0-.5)),N0>H/2&&(N0=H/2),T[p0]=(n0[o0]+n0[N0])/2,c[p0]=n0[N0];var J0=O0*d0;F[p0]=(J0-b0[c[p0]])/(b0[c[p0]+1]-b0[c[p0]]),F[p0]<0?F[p0]=0:F[p0]>1&&(F[p0]=1),q0=je(P*e0[p0]*q),q0=Math.min(q0,15.5)/15.5,A[p0]=Math.pow(10,1.25*(1-Math.cos(Math.PI*q0))-2.5)}$=0;for(var he=0;he<B0;he++){var He=h[he],j0,Se;j0=je(P*$),Se=je(P*($+He-1)),p[he]=.5*(j0+Se),j0=je(P*($-.5)),Se=je(P*($+He-.5)),D[he]=Se-j0,$+=He}return B0}function A1(h,c,T,p,D,A){var F=T0([l.CBANDS,l.CBANDS]),P,H=0;if(A)for(var e0=0;e0<c;e0++)for(P=0;P<c;P++){var q=C1(T[e0]-T[P])*p[P];F[e0][P]=q*D[e0]}else for(P=0;P<c;P++)for(var r0=15+Math.min(21/T[P],12),b0=f1(r0),e0=0;e0<c;e0++){var q=b0*Ge(T[e0]-T[P],r0)*p[P];F[e0][P]=q*D[e0]}for(var e0=0;e0<c;e0++){for(P=0;P<c&&!(F[e0][P]>0);P++);for(h[e0][0]=P,P=c-1;P>0&&!(F[e0][P]>0);P--);h[e0][1]=P,H+=h[e0][1]-h[e0][0]+1}for(var O0=K(H),n0=0,e0=0;e0<c;e0++)for(P=h[e0][0];P<=h[e0][1];P++)O0[n0++]=F[e0][P];return O0}function R1(h){var c=je(h);return c=Math.min(c,15.5)/15.5,Math.pow(10,1.25*(1-Math.cos(Math.PI*c))-2.5)}this.psymodel_init=function(h){var c=h.internal_flags,T,p=!0,D=13,A=24,F=0,P=0,H=-8.25,e0=-4.5,q=K(l.CBANDS),r0=K(l.CBANDS),b0=K(l.CBANDS),O0=h.out_samplerate;switch(h.experimentalZ){default:case 0:p=!0;break;case 1:p=!(h.VBR==m0.vbr_mtrh||h.VBR==m0.vbr_mt);break;case 2:p=!1;break;case 3:D=8,F=-1.75,P=-.0125,H=-8.25,e0=-2.25;break}for(c.ms_ener_ratio_old=.25,c.blocktype_old[0]=c.blocktype_old[1]=l.NORM_TYPE,T=0;T<4;++T){for(var $=0;$<l.CBANDS;++$)c.nb_1[T][$]=1e20,c.nb_2[T][$]=1e20,c.nb_s1[T][$]=c.nb_s2[T][$]=1;for(var n0=0;n0<l.SBMAX_l;n0++)c.en[T].l[n0]=1e20,c.thm[T].l[n0]=1e20;for(var $=0;$<3;++$){for(var n0=0;n0<l.SBMAX_s;n0++)c.en[T].s[n0][$]=1e20,c.thm[T].s[n0][$]=1e20;c.nsPsy.lastAttacks[T]=0}for(var $=0;$<9;$++)c.nsPsy.last_en_subshort[T][$]=10}for(c.loudness_sq_save[0]=c.loudness_sq_save[1]=0,c.npart_l=M1(c.numlines_l,c.bo_l,c.bm_l,q,r0,c.mld_l,c.PSY.bo_l_weight,O0,l.BLKSIZE,c.scalefac_band.l,l.BLKSIZE/(2*576),l.SBMAX_l),T=0;T<c.npart_l;T++){var H0=F;q[T]>=D&&(H0=P*(q[T]-D)/(A-D)+F*(A-q[T])/(A-D)),b0[T]=Math.pow(10,H0/10),c.numlines_l[T]>0?c.rnumlines_l[T]=1/c.numlines_l[T]:c.rnumlines_l[T]=0}c.s3_ll=A1(c.s3ind,c.npart_l,q,r0,b0,p);var $=0;for(T=0;T<c.npart_l;T++){var B0;B0=F0.MAX_VALUE;for(var j0=0;j0<c.numlines_l[T];j0++,$++){var l0=O0*$/(1e3*l.BLKSIZE),p0;p0=this.ATHformula(l0*1e3,h)-20,p0=Math.pow(10,.1*p0),p0*=c.numlines_l[T],B0>p0&&(B0=p0)}c.ATH.cb_l[T]=B0,B0=-20+q[T]*20/10,B0>6&&(B0=100),B0<-15&&(B0=-15),B0-=8,c.minval_l[T]=Math.pow(10,B0/10)*c.numlines_l[T]}for(c.npart_s=M1(c.numlines_s,c.bo_s,c.bm_s,q,r0,c.mld_s,c.PSY.bo_s_weight,O0,l.BLKSIZE_s,c.scalefac_band.s,l.BLKSIZE_s/(2*192),l.SBMAX_s),$=0,T=0;T<c.npart_s;T++){var B0,H0=H;q[T]>=D&&(H0=e0*(q[T]-D)/(A-D)+H*(A-q[T])/(A-D)),b0[T]=Math.pow(10,H0/10),B0=F0.MAX_VALUE;for(var j0=0;j0<c.numlines_s[T];j0++,$++){var l0=O0*$/(1e3*l.BLKSIZE_s),p0;p0=this.ATHformula(l0*1e3,h)-20,p0=Math.pow(10,.1*p0),p0*=c.numlines_s[T],B0>p0&&(B0=p0)}c.ATH.cb_s[T]=B0,B0=-7+q[T]*7/12,q[T]>12&&(B0*=1+Math.log(1+B0)*3.1),q[T]<12&&(B0*=1+Math.log(1-B0)*2.3),B0<-15&&(B0=-15),B0-=8,c.minval_s[T]=Math.pow(10,B0/10)*c.numlines_s[T]}c.s3_ss=A1(c.s3ind_s,c.npart_s,q,r0,b0,p),e(),m.init_fft(c),c.decay=Math.exp(-1*V/(v0*O0/192));{var o0;o0=E,h.exp_nspsytune&2&&(o0=1),Math.abs(h.msfix)>0&&(o0=h.msfix),h.msfix=o0;for(var N0=0;N0<c.npart_l;N0++)c.s3ind[N0][1]>c.npart_l-1&&(c.s3ind[N0][1]=c.npart_l-1)}var ue=576*c.mode_gr/O0;if(c.ATH.decay=Math.pow(10,-12/10*ue),c.ATH.adjust=.01,c.ATH.adjustLimit=1,h.ATHtype!=-1){var l0,d0=h.out_samplerate/l.BLKSIZE,q0=0;for(l0=0,T=0;T<l.BLKSIZE/2;++T)l0+=d0,c.ATH.eql_w[T]=1/Math.pow(10,this.ATHformula(l0,h)/10),q0+=c.ATH.eql_w[T];for(q0=1/q0,T=l.BLKSIZE/2;--T>=0;)c.ATH.eql_w[T]*=q0}{for(var N0=$=0;N0<c.npart_s;++N0)for(T=0;T<c.numlines_s[N0];++T)++$;for(var N0=$=0;N0<c.npart_l;++N0)for(T=0;T<c.numlines_l[N0];++T)++$}for($=0,T=0;T<c.npart_l;T++){var l0=O0*($+c.numlines_l[T]/2)/(1*l.BLKSIZE);c.mld_cb_l[T]=R1(l0),$+=c.numlines_l[T]}for(;T<l.CBANDS;++T)c.mld_cb_l[T]=1;for($=0,T=0;T<c.npart_s;T++){var l0=O0*($+c.numlines_s[T]/2)/(1*l.BLKSIZE_s);c.mld_cb_s[T]=R1(l0),$+=c.numlines_s[T]}for(;T<l.CBANDS;++T)c.mld_cb_s[T]=1;return 0};function ge(h,c){h<-.3&&(h=3410),h/=1e3,h=Math.max(.1,h);var T=3.64*Math.pow(h,-.8)-6.8*Math.exp(-.6*Math.pow(h-3.4,2))+6*Math.exp(-.15*Math.pow(h-8.7,2))+(.6+.04*c)*.001*Math.pow(h,4);return T}this.ATHformula=function(h,c){var T;switch(c.ATHtype){case 0:T=ge(h,9);break;case 1:T=ge(h,-1);break;case 2:T=ge(h,0);break;case 3:T=ge(h,1)+6;break;case 4:T=ge(h,c.ATHcurve);break;default:T=ge(h,0);break}return T}}function S0(){var m=this,V=128*1024;S0.V9=410,S0.V8=420,S0.V7=430,S0.V6=440,S0.V5=450,S0.V4=460,S0.V3=470,S0.V2=480,S0.V1=490,S0.V0=500,S0.R3MIX=1e3,S0.STANDARD=1001,S0.EXTREME=1002,S0.INSANE=1003,S0.STANDARD_FAST=1004,S0.EXTREME_FAST=1005,S0.MEDIUM=1006,S0.MEDIUM_FAST=1007;var Z=16384+V;S0.LAME_MAXMP3BUFFER=Z;var k,i0,N,J,s0,v0=new fe,w,C,G,E;this.enc=new l,this.setModules=function(r,s,g,a0,u0,A0,R0,E0,D0){k=r,i0=s,N=g,J=a0,s0=u0,w=A0,C=R0,G=E0,E=D0,this.enc.setModules(i0,v0,J,w)};function L(){this.mask_adjust=0,this.mask_adjust_short=0,this.bo_l_weight=K(l.SBMAX_l),this.bo_s_weight=K(l.SBMAX_s)}function a(){this.lowerlimit=0}function M(r,s){this.lowpass=s}var X=4294479419;function B(r){var s;return r.class_id=X,s=r.internal_flags=new y0,r.mode=$0.NOT_SET,r.original=1,r.in_samplerate=44100,r.num_channels=2,r.num_samples=-1,r.bWriteVbrTag=!0,r.quality=-1,r.short_blocks=null,s.subblock_gain=-1,r.lowpassfreq=0,r.highpassfreq=0,r.lowpasswidth=-1,r.highpasswidth=-1,r.VBR=m0.vbr_off,r.VBR_q=4,r.ATHcurve=-1,r.VBR_mean_bitrate_kbps=128,r.VBR_min_bitrate_kbps=0,r.VBR_max_bitrate_kbps=0,r.VBR_hard_min=0,s.VBR_min_bitrate=1,s.VBR_max_bitrate=13,r.quant_comp=-1,r.quant_comp_short=-1,r.msfix=-1,s.resample_ratio=1,s.OldValue[0]=180,s.OldValue[1]=180,s.CurrentStep[0]=4,s.CurrentStep[1]=4,s.masking_lower=1,s.nsPsy.attackthre=-1,s.nsPsy.attackthre_s=-1,r.scale=-1,r.athaa_type=-1,r.ATHtype=-1,r.athaa_loudapprox=-1,r.athaa_sensitivity=0,r.useTemporal=null,r.interChRatio=-1,s.mf_samples_to_encode=l.ENCDELAY+l.POSTDELAY,r.encoder_padding=0,s.mf_size=l.ENCDELAY-l.MDCTDELAY,r.findReplayGain=!1,r.decode_on_the_fly=!1,s.decode_on_the_fly=!1,s.findReplayGain=!1,s.findPeakSample=!1,s.RadioGain=0,s.AudiophileGain=0,s.noclipGainChange=0,s.noclipScale=-1,r.preset=0,r.write_id3tag_automatic=!0,0}this.lame_init=function(){var r=new Q,s=B(r);return s!=0?null:(r.lame_allocated_gfp=1,r)};function _(r){return r>1?0:r<=0?1:Math.cos(Math.PI/2*r)}this.nearestBitrateFullIndex=function(r){var s=[8,16,24,32,40,48,56,64,80,96,112,128,160,192,224,256,320],g=0,a0=0,u0=0,A0=0;A0=s[16],u0=16,a0=s[16],g=16;for(var R0=0;R0<16;R0++)if(Math.max(r,s[R0+1])!=r){A0=s[R0+1],u0=R0+1,a0=s[R0],g=R0;break}return A0-r>r-a0?g:u0};function S(r,s){var g=44100;return s>=48e3?g=48e3:s>=44100?g=44100:s>=32e3?g=32e3:s>=24e3?g=24e3:s>=22050?g=22050:s>=16e3?g=16e3:s>=12e3?g=12e3:s>=11025?g=11025:s>=8e3&&(g=8e3),r==-1?g:(r<=15960&&(g=44100),r<=15250&&(g=32e3),r<=11220&&(g=24e3),r<=9970&&(g=22050),r<=7230&&(g=16e3),r<=5420&&(g=12e3),r<=4510&&(g=11025),r<=3970&&(g=8e3),s<g?s>44100?48e3:s>32e3?44100:s>24e3?32e3:s>22050?24e3:s>16e3?22050:s>12e3?16e3:s>11025?12e3:s>8e3?11025:8e3:g)}function u(r,s){switch(r){case 44100:return s.version=1,0;case 48e3:return s.version=1,1;case 32e3:return s.version=1,2;case 22050:return s.version=0,0;case 24e3:return s.version=0,1;case 16e3:return s.version=0,2;case 11025:return s.version=0,0;case 12e3:return s.version=0,1;case 8e3:return s.version=0,2;default:return s.version=0,-1}}function x(r,s,g){g<16e3&&(s=2);for(var a0=j.bitrate_table[s][1],u0=2;u0<=14;u0++)j.bitrate_table[s][u0]>0&&Math.abs(j.bitrate_table[s][u0]-r)<Math.abs(a0-r)&&(a0=j.bitrate_table[s][u0]);return a0}function R(r,s,g){g<16e3&&(s=2);for(var a0=0;a0<=14;a0++)if(j.bitrate_table[s][a0]>0&&j.bitrate_table[s][a0]==r)return a0;return-1}function t(r,s){var g=[new M(8,2e3),new M(16,3700),new M(24,3900),new M(32,5500),new M(40,7e3),new M(48,7500),new M(56,1e4),new M(64,11e3),new M(80,13500),new M(96,15100),new M(112,15600),new M(128,17e3),new M(160,17500),new M(192,18600),new M(224,19400),new M(256,19700),new M(320,20500)],a0=m.nearestBitrateFullIndex(s);r.lowerlimit=g[a0].lowpass}function y(r){var s=r.internal_flags,g=32,a0=-1;if(s.lowpass1>0){for(var u0=999,A0=0;A0<=31;A0++){var R0=A0/31;R0>=s.lowpass2&&(g=Math.min(g,A0)),s.lowpass1<R0&&R0<s.lowpass2&&(u0=Math.min(u0,A0))}u0==999?s.lowpass1=(g-.75)/31:s.lowpass1=(u0-.75)/31,s.lowpass2=g/31}if(s.highpass2>0&&s.highpass2<.9*(.75/31)&&(s.highpass1=0,s.highpass2=0,k0.err.println(`Warning: highpass filter disabled.  highpass frequency too small
`)),s.highpass2>0){for(var E0=-1,A0=0;A0<=31;A0++){var R0=A0/31;R0<=s.highpass1&&(a0=Math.max(a0,A0)),s.highpass1<R0&&R0<s.highpass2&&(E0=Math.max(E0,A0))}s.highpass1=a0/31,E0==-1?s.highpass2=(a0+.75)/31:s.highpass2=(E0+.75)/31}for(var A0=0;A0<32;A0++){var D0,I0,R0=A0/31;s.highpass2>s.highpass1?D0=_((s.highpass2-R0)/(s.highpass2-s.highpass1+1e-20)):D0=1,s.lowpass2>s.lowpass1?I0=_((R0-s.lowpass1)/(s.lowpass2-s.lowpass1+1e-20)):I0=1,s.amp_filter[A0]=D0*I0}}function o(r){var s=r.internal_flags;switch(r.quality){default:case 9:s.psymodel=0,s.noise_shaping=0,s.noise_shaping_amp=0,s.noise_shaping_stop=0,s.use_best_huffman=0,s.full_outer_loop=0;break;case 8:r.quality=7;case 7:s.psymodel=1,s.noise_shaping=0,s.noise_shaping_amp=0,s.noise_shaping_stop=0,s.use_best_huffman=0,s.full_outer_loop=0;break;case 6:s.psymodel=1,s.noise_shaping==0&&(s.noise_shaping=1),s.noise_shaping_amp=0,s.noise_shaping_stop=0,s.subblock_gain==-1&&(s.subblock_gain=1),s.use_best_huffman=0,s.full_outer_loop=0;break;case 5:s.psymodel=1,s.noise_shaping==0&&(s.noise_shaping=1),s.noise_shaping_amp=0,s.noise_shaping_stop=0,s.subblock_gain==-1&&(s.subblock_gain=1),s.use_best_huffman=0,s.full_outer_loop=0;break;case 4:s.psymodel=1,s.noise_shaping==0&&(s.noise_shaping=1),s.noise_shaping_amp=0,s.noise_shaping_stop=0,s.subblock_gain==-1&&(s.subblock_gain=1),s.use_best_huffman=1,s.full_outer_loop=0;break;case 3:s.psymodel=1,s.noise_shaping==0&&(s.noise_shaping=1),s.noise_shaping_amp=1,s.noise_shaping_stop=1,s.subblock_gain==-1&&(s.subblock_gain=1),s.use_best_huffman=1,s.full_outer_loop=0;break;case 2:s.psymodel=1,s.noise_shaping==0&&(s.noise_shaping=1),s.substep_shaping==0&&(s.substep_shaping=2),s.noise_shaping_amp=1,s.noise_shaping_stop=1,s.subblock_gain==-1&&(s.subblock_gain=1),s.use_best_huffman=1,s.full_outer_loop=0;break;case 1:s.psymodel=1,s.noise_shaping==0&&(s.noise_shaping=1),s.substep_shaping==0&&(s.substep_shaping=2),s.noise_shaping_amp=2,s.noise_shaping_stop=1,s.subblock_gain==-1&&(s.subblock_gain=1),s.use_best_huffman=1,s.full_outer_loop=0;break;case 0:s.psymodel=1,s.noise_shaping==0&&(s.noise_shaping=1),s.substep_shaping==0&&(s.substep_shaping=2),s.noise_shaping_amp=2,s.noise_shaping_stop=1,s.subblock_gain==-1&&(s.subblock_gain=1),s.use_best_huffman=1,s.full_outer_loop=0;break}}function n(r){var s=r.internal_flags;r.frameNum=0,r.write_id3tag_automatic&&G.id3tag_write_v2(r),s.bitrate_stereoMode_Hist=X0([16,4+1]),s.bitrate_blockType_Hist=X0([16,4+1+1]),s.PeakSample=0,r.bWriteVbrTag&&w.InitVbrTag(r)}this.lame_init_params=function(r){var s=r.internal_flags;if(s.Class_ID=0,s.ATH==null&&(s.ATH=new Y),s.PSY==null&&(s.PSY=new L),s.rgdata==null&&(s.rgdata=new W),s.channels_in=r.num_channels,s.channels_in==1&&(r.mode=$0.MONO),s.channels_out=r.mode==$0.MONO?1:2,s.mode_ext=l.MPG_MD_MS_LR,r.mode==$0.MONO&&(r.force_ms=!1),r.VBR==m0.vbr_off&&r.VBR_mean_bitrate_kbps!=128&&r.brate==0&&(r.brate=r.VBR_mean_bitrate_kbps),r.VBR==m0.vbr_off||r.VBR==m0.vbr_mtrh||r.VBR==m0.vbr_mt||(r.free_format=!1),r.VBR==m0.vbr_off&&r.brate==0&&be.EQ(r.compression_ratio,0)&&(r.compression_ratio=11.025),r.VBR==m0.vbr_off&&r.compression_ratio>0&&(r.out_samplerate==0&&(r.out_samplerate=map2MP3Frequency(int(.97*r.in_samplerate))),r.brate=0|r.out_samplerate*16*s.channels_out/(1e3*r.compression_ratio),s.samplerate_index=u(r.out_samplerate,r),r.free_format||(r.brate=x(r.brate,r.version,r.out_samplerate))),r.out_samplerate!=0&&(r.out_samplerate<16e3?(r.VBR_mean_bitrate_kbps=Math.max(r.VBR_mean_bitrate_kbps,8),r.VBR_mean_bitrate_kbps=Math.min(r.VBR_mean_bitrate_kbps,64)):r.out_samplerate<32e3?(r.VBR_mean_bitrate_kbps=Math.max(r.VBR_mean_bitrate_kbps,8),r.VBR_mean_bitrate_kbps=Math.min(r.VBR_mean_bitrate_kbps,160)):(r.VBR_mean_bitrate_kbps=Math.max(r.VBR_mean_bitrate_kbps,32),r.VBR_mean_bitrate_kbps=Math.min(r.VBR_mean_bitrate_kbps,320))),r.lowpassfreq==0){var g=16e3;switch(r.VBR){case m0.vbr_off:{var a0=new a;t(a0,r.brate),g=a0.lowerlimit;break}case m0.vbr_abr:{var a0=new a;t(a0,r.VBR_mean_bitrate_kbps),g=a0.lowerlimit;break}case m0.vbr_rh:{var u0=[19500,19e3,18600,18e3,17500,16e3,15600,14900,12500,1e4,3950];if(0<=r.VBR_q&&r.VBR_q<=9){var A0=u0[r.VBR_q],R0=u0[r.VBR_q+1],E0=r.VBR_q_frac;g=linear_int(A0,R0,E0)}else g=19500;break}default:{var u0=[19500,19e3,18500,18e3,17500,16500,15500,14500,12500,9500,3950];if(0<=r.VBR_q&&r.VBR_q<=9){var A0=u0[r.VBR_q],R0=u0[r.VBR_q+1],E0=r.VBR_q_frac;g=linear_int(A0,R0,E0)}else g=19500}}r.mode==$0.MONO&&(r.VBR==m0.vbr_off||r.VBR==m0.vbr_abr)&&(g*=1.5),r.lowpassfreq=g|0}if(r.out_samplerate==0&&(2*r.lowpassfreq>r.in_samplerate&&(r.lowpassfreq=r.in_samplerate/2),r.out_samplerate=S(r.lowpassfreq|0,r.in_samplerate)),r.lowpassfreq=Math.min(20500,r.lowpassfreq),r.lowpassfreq=Math.min(r.out_samplerate/2,r.lowpassfreq),r.VBR==m0.vbr_off&&(r.compression_ratio=r.out_samplerate*16*s.channels_out/(1e3*r.brate)),r.VBR==m0.vbr_abr&&(r.compression_ratio=r.out_samplerate*16*s.channels_out/(1e3*r.VBR_mean_bitrate_kbps)),r.bWriteVbrTag||(r.findReplayGain=!1,r.decode_on_the_fly=!1,s.findPeakSample=!1),s.findReplayGain=r.findReplayGain,s.decode_on_the_fly=r.decode_on_the_fly,s.decode_on_the_fly&&(s.findPeakSample=!0),s.findReplayGain&&k.InitGainAnalysis(s.rgdata,r.out_samplerate)==K0.INIT_GAIN_ANALYSIS_ERROR)return r.internal_flags=null,-6;switch(s.decode_on_the_fly&&!r.decode_only&&(s.hip!=null&&E.hip_decode_exit(s.hip),s.hip=E.hip_decode_init()),s.mode_gr=r.out_samplerate<=24e3?1:2,r.framesize=576*s.mode_gr,r.encoder_delay=l.ENCDELAY,s.resample_ratio=r.in_samplerate/r.out_samplerate,r.VBR){case m0.vbr_mt:case m0.vbr_rh:case m0.vbr_mtrh:{var D0=[5.7,6.5,7.3,8.2,10,11.9,13,14,15,16.5];r.compression_ratio=D0[r.VBR_q]}break;case m0.vbr_abr:r.compression_ratio=r.out_samplerate*16*s.channels_out/(1e3*r.VBR_mean_bitrate_kbps);break;default:r.compression_ratio=r.out_samplerate*16*s.channels_out/(1e3*r.brate);break}if(r.mode==$0.NOT_SET&&(r.mode=$0.JOINT_STEREO),r.highpassfreq>0?(s.highpass1=2*r.highpassfreq,r.highpasswidth>=0?s.highpass2=2*(r.highpassfreq+r.highpasswidth):s.highpass2=(1+0)*2*r.highpassfreq,s.highpass1/=r.out_samplerate,s.highpass2/=r.out_samplerate):(s.highpass1=0,s.highpass2=0),r.lowpassfreq>0?(s.lowpass2=2*r.lowpassfreq,r.lowpasswidth>=0?(s.lowpass1=2*(r.lowpassfreq-r.lowpasswidth),s.lowpass1<0&&(s.lowpass1=0)):s.lowpass1=(1-0)*2*r.lowpassfreq,s.lowpass1/=r.out_samplerate,s.lowpass2/=r.out_samplerate):(s.lowpass1=0,s.lowpass2=0),y(r),s.samplerate_index=u(r.out_samplerate,r),s.samplerate_index<0)return r.internal_flags=null,-1;if(r.VBR==m0.vbr_off){if(r.free_format)s.bitrate_index=0;else if(r.brate=x(r.brate,r.version,r.out_samplerate),s.bitrate_index=R(r.brate,r.version,r.out_samplerate),s.bitrate_index<=0)return r.internal_flags=null,-1}else s.bitrate_index=1;r.analysis&&(r.bWriteVbrTag=!1),s.pinfo!=null&&(r.bWriteVbrTag=!1),i0.init_bit_stream_w(s);for(var I0=s.samplerate_index+3*r.version+6*(r.out_samplerate<16e3?1:0),h0=0;h0<l.SBMAX_l+1;h0++)s.scalefac_band.l[h0]=J.sfBandIndex[I0].l[h0];for(var h0=0;h0<l.PSFB21+1;h0++){var le=(s.scalefac_band.l[22]-s.scalefac_band.l[21])/l.PSFB21,Te=s.scalefac_band.l[21]+h0*le;s.scalefac_band.psfb21[h0]=Te}s.scalefac_band.psfb21[l.PSFB21]=576;for(var h0=0;h0<l.SBMAX_s+1;h0++)s.scalefac_band.s[h0]=J.sfBandIndex[I0].s[h0];for(var h0=0;h0<l.PSFB12+1;h0++){var le=(s.scalefac_band.s[13]-s.scalefac_band.s[12])/l.PSFB12,Te=s.scalefac_band.s[12]+h0*le;s.scalefac_band.psfb12[h0]=Te}s.scalefac_band.psfb12[l.PSFB12]=192,r.version==1?s.sideinfo_len=s.channels_out==1?4+17:4+32:s.sideinfo_len=s.channels_out==1?4+9:4+17,r.error_protection&&(s.sideinfo_len+=2),n(r),s.Class_ID=X;{var oe;for(oe=0;oe<19;oe++)s.nsPsy.pefirbuf[oe]=700*s.mode_gr*s.channels_out;r.ATHtype==-1&&(r.ATHtype=4)}switch(r.VBR){case m0.vbr_mt:r.VBR=m0.vbr_mtrh;case m0.vbr_mtrh:{r.useTemporal==null&&(r.useTemporal=!1),N.apply_preset(r,500-r.VBR_q*10,0),r.quality<0&&(r.quality=LAME_DEFAULT_QUALITY),r.quality<5&&(r.quality=0),r.quality>5&&(r.quality=5),s.PSY.mask_adjust=r.maskingadjust,s.PSY.mask_adjust_short=r.maskingadjust_short,r.experimentalY?s.sfb21_extra=!1:s.sfb21_extra=r.out_samplerate>44e3,s.iteration_loop=new VBRNewIterationLoop(s0);break}case m0.vbr_rh:{N.apply_preset(r,500-r.VBR_q*10,0),s.PSY.mask_adjust=r.maskingadjust,s.PSY.mask_adjust_short=r.maskingadjust_short,r.experimentalY?s.sfb21_extra=!1:s.sfb21_extra=r.out_samplerate>44e3,r.quality>6&&(r.quality=6),r.quality<0&&(r.quality=LAME_DEFAULT_QUALITY),s.iteration_loop=new VBROldIterationLoop(s0);break}default:{var xe;s.sfb21_extra=!1,r.quality<0&&(r.quality=LAME_DEFAULT_QUALITY),xe=r.VBR,xe==m0.vbr_off&&(r.VBR_mean_bitrate_kbps=r.brate),N.apply_preset(r,r.VBR_mean_bitrate_kbps,0),r.VBR=xe,s.PSY.mask_adjust=r.maskingadjust,s.PSY.mask_adjust_short=r.maskingadjust_short,xe==m0.vbr_off?s.iteration_loop=new O(s0):s.iteration_loop=new ABRIterationLoop(s0);break}}if(r.VBR!=m0.vbr_off){if(s.VBR_min_bitrate=1,s.VBR_max_bitrate=14,r.out_samplerate<16e3&&(s.VBR_max_bitrate=8),r.VBR_min_bitrate_kbps!=0&&(r.VBR_min_bitrate_kbps=x(r.VBR_min_bitrate_kbps,r.version,r.out_samplerate),s.VBR_min_bitrate=R(r.VBR_min_bitrate_kbps,r.version,r.out_samplerate),s.VBR_min_bitrate<0)||r.VBR_max_bitrate_kbps!=0&&(r.VBR_max_bitrate_kbps=x(r.VBR_max_bitrate_kbps,r.version,r.out_samplerate),s.VBR_max_bitrate=R(r.VBR_max_bitrate_kbps,r.version,r.out_samplerate),s.VBR_max_bitrate<0))return-1;r.VBR_min_bitrate_kbps=j.bitrate_table[r.version][s.VBR_min_bitrate],r.VBR_max_bitrate_kbps=j.bitrate_table[r.version][s.VBR_max_bitrate],r.VBR_mean_bitrate_kbps=Math.min(j.bitrate_table[r.version][s.VBR_max_bitrate],r.VBR_mean_bitrate_kbps),r.VBR_mean_bitrate_kbps=Math.max(j.bitrate_table[r.version][s.VBR_min_bitrate],r.VBR_mean_bitrate_kbps)}return r.tune&&(s.PSY.mask_adjust+=r.tune_value_a,s.PSY.mask_adjust_short+=r.tune_value_a),o(r),r.athaa_type<0?s.ATH.useAdjust=3:s.ATH.useAdjust=r.athaa_type,s.ATH.aaSensitivityP=Math.pow(10,r.athaa_sensitivity/-10),r.short_blocks==null&&(r.short_blocks=C0.short_block_allowed),r.short_blocks==C0.short_block_allowed&&(r.mode==$0.JOINT_STEREO||r.mode==$0.STEREO)&&(r.short_blocks=C0.short_block_coupled),r.quant_comp<0&&(r.quant_comp=1),r.quant_comp_short<0&&(r.quant_comp_short=0),r.msfix<0&&(r.msfix=0),r.exp_nspsytune=r.exp_nspsytune|1,r.internal_flags.nsPsy.attackthre<0&&(r.internal_flags.nsPsy.attackthre=fe.NSATTACKTHRE),r.internal_flags.nsPsy.attackthre_s<0&&(r.internal_flags.nsPsy.attackthre_s=fe.NSATTACKTHRE_S),r.scale<0&&(r.scale=1),r.ATHtype<0&&(r.ATHtype=4),r.ATHcurve<0&&(r.ATHcurve=4),r.athaa_loudapprox<0&&(r.athaa_loudapprox=2),r.interChRatio<0&&(r.interChRatio=0),r.useTemporal==null&&(r.useTemporal=!0),s.slot_lag=s.frac_SpF=0,r.VBR==m0.vbr_off&&(s.slot_lag=s.frac_SpF=(r.version+1)*72e3*r.brate%r.out_samplerate|0),J.iteration_init(r),v0.psymodel_init(r),0};function e(r,s){(r.in_buffer_0==null||r.in_buffer_nsamples<s)&&(r.in_buffer_0=K(s),r.in_buffer_1=K(s),r.in_buffer_nsamples=s)}this.lame_encode_flush=function(r,s,g,a0){var u0=r.internal_flags,A0=Z0([2,1152]),R0=0,E0,D0,I0,h0,le=u0.mf_samples_to_encode-l.POSTDELAY,Te=i(r);if(u0.mf_samples_to_encode<1)return 0;for(E0=0,r.in_samplerate!=r.out_samplerate&&(le+=16*r.out_samplerate/r.in_samplerate),I0=r.framesize-le%r.framesize,I0<576&&(I0+=r.framesize),r.encoder_padding=I0,h0=(le+I0)/r.framesize;h0>0&&R0>=0;){var oe=Te-u0.mf_size,xe=r.frameNum;oe*=r.in_samplerate,oe/=r.out_samplerate,oe>1152&&(oe=1152),oe<1&&(oe=1),D0=a0-E0,a0==0&&(D0=0),R0=this.lame_encode_buffer(r,A0[0],A0[1],oe,s,g,D0),g+=R0,E0+=R0,h0-=xe!=r.frameNum?1:0}if(u0.mf_samples_to_encode=0,R0<0||(D0=a0-E0,a0==0&&(D0=0),i0.flush_bitstream(r),R0=i0.copy_buffer(u0,s,g,D0,1),R0<0))return R0;if(g+=R0,E0+=R0,D0=a0-E0,a0==0&&(D0=0),r.write_id3tag_automatic){if(G.id3tag_write_v1(r),R0=i0.copy_buffer(u0,s,g,D0,0),R0<0)return R0;E0+=R0}return E0},this.lame_encode_buffer=function(r,s,g,a0,u0,A0,R0){var E0=r.internal_flags,D0=[null,null];if(E0.Class_ID!=X)return-3;if(a0==0)return 0;e(E0,a0),D0[0]=E0.in_buffer_0,D0[1]=E0.in_buffer_1;for(var I0=0;I0<a0;I0++)D0[0][I0]=s[I0],E0.channels_in>1&&(D0[1][I0]=g[I0]);return v(r,D0[0],D0[1],a0,u0,A0,R0)};function i(r){var s=l.BLKSIZE+r.framesize-l.FFTOFFSET;return s=Math.max(s,512+r.framesize-32),s}function v(r,s,g,a0,u0,A0,R0){var E0=r.internal_flags,D0=0,I0,h0,le,Te,oe,xe=[null,null],Ae=[null,null];if(E0.Class_ID!=X)return-3;if(a0==0)return 0;if(oe=i0.copy_buffer(E0,u0,A0,R0,0),oe<0)return oe;if(A0+=oe,D0+=oe,Ae[0]=s,Ae[1]=g,be.NEQ(r.scale,0)&&be.NEQ(r.scale,1))for(h0=0;h0<a0;++h0)Ae[0][h0]*=r.scale,E0.channels_out==2&&(Ae[1][h0]*=r.scale);if(be.NEQ(r.scale_left,0)&&be.NEQ(r.scale_left,1))for(h0=0;h0<a0;++h0)Ae[0][h0]*=r.scale_left;if(be.NEQ(r.scale_right,0)&&be.NEQ(r.scale_right,1))for(h0=0;h0<a0;++h0)Ae[1][h0]*=r.scale_right;if(r.num_channels==2&&E0.channels_out==1)for(h0=0;h0<a0;++h0)Ae[0][h0]=.5*(Ae[0][h0]+Ae[1][h0]),Ae[1][h0]=0;Te=i(r),xe[0]=E0.mfbuf[0],xe[1]=E0.mfbuf[1];for(var Re=0;a0>0;){var Ce=[null,null],Ze=0,qe=0;Ce[0]=Ae[0],Ce[1]=Ae[1];var Ye=new d;if(_0(r,xe,Ce,Re,a0,Ye),Ze=Ye.n_in,qe=Ye.n_out,E0.findReplayGain&&!E0.decode_on_the_fly&&k.AnalyzeSamples(E0.rgdata,xe[0],E0.mf_size,xe[1],E0.mf_size,qe,E0.channels_out)==K0.GAIN_ANALYSIS_ERROR)return-6;if(a0-=Ze,Re+=Ze,E0.channels_out==2,E0.mf_size+=qe,E0.mf_samples_to_encode<1&&(E0.mf_samples_to_encode=l.ENCDELAY+l.POSTDELAY),E0.mf_samples_to_encode+=qe,E0.mf_size>=Te){var ze=R0-D0;if(R0==0&&(ze=0),I0=f(r,xe[0],xe[1],u0,A0,ze),I0<0)return I0;for(A0+=I0,D0+=I0,E0.mf_size-=r.framesize,E0.mf_samples_to_encode-=r.framesize,le=0;le<E0.channels_out;le++)for(h0=0;h0<E0.mf_size;h0++)xe[le][h0]=xe[le][h0+r.framesize]}}return D0}function f(r,s,g,a0,u0,A0){var R0=m.enc.lame_encode_mp3_frame(r,s,g,a0,u0,A0);return r.frameNum++,R0}function d(){this.n_in=0,this.n_out=0}function b(){this.num_used=0}function z(r,s){return s!=0?z(s,r%s):r}function I(r,s,g){var a0=Math.PI*s;r/=g,r<0&&(r=0),r>1&&(r=1);var u0=r-.5,A0=.42-.5*Math.cos(2*r*Math.PI)+.08*Math.cos(4*r*Math.PI);return Math.abs(u0)<1e-9?a0/Math.PI:A0*Math.sin(g*a0*u0)/(Math.PI*g*u0)}function U(r,s,g,a0,u0,A0,R0,E0,D0){var I0=r.internal_flags,h0,le=0,Te,oe=r.out_samplerate/z(r.out_samplerate,r.in_samplerate);oe>y0.BPC&&(oe=y0.BPC);var xe=Math.abs(I0.resample_ratio-Math.floor(.5+I0.resample_ratio))<1e-4?1:0,Ae=1/I0.resample_ratio;Ae>1&&(Ae=1);var Re=31;Re%2==0&&--Re,Re+=xe;var Ce=Re+1;if(I0.fill_buffer_resample_init==0){for(I0.inbuf_old[0]=K(Ce),I0.inbuf_old[1]=K(Ce),h0=0;h0<=2*oe;++h0)I0.blackfilt[h0]=K(Ce);for(I0.itime[0]=0,I0.itime[1]=0,le=0;le<=2*oe;le++){var Ze=0,qe=(le-oe)/(2*oe);for(h0=0;h0<=Re;h0++)Ze+=I0.blackfilt[le][h0]=I(h0-qe,Ae,Re);for(h0=0;h0<=Re;h0++)I0.blackfilt[le][h0]/=Ze}I0.fill_buffer_resample_init=1}var Ye=I0.inbuf_old[D0];for(Te=0;Te<a0;Te++){var ze,l1;if(ze=Te*I0.resample_ratio,le=0|Math.floor(ze-I0.itime[D0]),Re+le-Re/2>=R0)break;var qe=ze-I0.itime[D0]-(le+.5*(Re%2));l1=0|Math.floor(qe*2*oe+oe+.5);var _1=0;for(h0=0;h0<=Re;++h0){var $e=h0+le-Re/2,Ge;Ge=$e<0?Ye[Ce+$e]:u0[A0+$e],_1+=Ge*I0.blackfilt[l1][h0]}s[g+Te]=_1}if(E0.num_used=Math.min(R0,Re+le-Re/2),I0.itime[D0]+=E0.num_used-Te*I0.resample_ratio,E0.num_used>=Ce)for(h0=0;h0<Ce;h0++)Ye[h0]=u0[A0+E0.num_used+h0-Ce];else{var f1=Ce-E0.num_used;for(h0=0;h0<f1;++h0)Ye[h0]=Ye[h0+E0.num_used];for(le=0;h0<Ce;++h0,++le)Ye[h0]=u0[A0+le]}return Te}function _0(r,s,g,a0,u0,A0){var R0=r.internal_flags;if(R0.resample_ratio<.9999||R0.resample_ratio>1.0001)for(var E0=0;E0<R0.channels_out;E0++){var D0=new b;A0.n_out=U(r,s[E0],R0.mf_size,r.framesize,g[E0],a0,u0,D0,E0),A0.n_in=D0.num_used}else{A0.n_out=Math.min(r.framesize,u0),A0.n_in=A0.n_out;for(var I0=0;I0<A0.n_out;++I0)s[0][R0.mf_size+I0]=g[0][a0+I0],R0.channels_out==2&&(s[1][R0.mf_size+I0]=g[1][a0+I0])}}}function Y0(){var m,V;this.setModules=function(Z,k){m=Z,V=k}}function ne(){var m,V,Z;this.setModules=function(k,i0,N){m=k,V=i0,Z=N}}function re(){}function _e(){var m,V;this.setModules=function(Z,k){m=Z,V=k}}function ie(m,V,Z){arguments.length!=3&&(console.error("WARN: Mp3Encoder(channels, samplerate, kbps) not specified"),m=1,V=44100,Z=128);var k=new S0,i0=new Y0,N=new K0,J=new be,s0=new Ke,v0=new x0,w=new Q0,C=new Ue,G=new Ve,E=new _e,L=new a1,a=new Oe,M=new ne,X=new re;k.setModules(N,J,s0,v0,w,C,G,E,X),J.setModules(N,X,G,C),E.setModules(J,G),s0.setModules(k),w.setModules(J,L,v0,a),v0.setModules(a,L,k.enc.psy),L.setModules(J),a.setModules(v0),C.setModules(k,J,G),i0.setModules(M,X),M.setModules(G,E,s0);var B=k.lame_init();B.num_channels=m,B.in_samplerate=V,B.out_samplerate=V,B.brate=Z,B.mode=$0.STEREO,B.quality=3,B.bWriteVbrTag=!1,B.disable_reservoir=!0,B.write_id3tag_automatic=!1;var _=k.lame_init_params(B),S=1152,u=0|1.25*S+7200,x=we(u);this.encodeBuffer=function(R,t){m==1&&(t=R),R.length>S&&(S=R.length,u=0|1.25*S+7200,x=we(u));var y=k.lame_encode_buffer(B,R,t,R.length,x,0,u);return new Int8Array(x.subarray(0,y))},this.flush=function(){var R=k.lame_encode_flush(B,x,0,u);return new Int8Array(x.subarray(0,R))}}M0.SFBMAX=l.SBMAX_s*3,se.Mp3Encoder=ie}se(),Recorder.lamejs=se})()},14074:function(){(function(){"use strict";Recorder.prototype.enc_mp3={stable:!0,testmsg:"\u91C7\u6837\u7387\u8303\u56F448000, 44100, 32000, 24000, 22050, 16000, 12000, 11025, 8000"},Recorder.prototype.mp3=function(K,t0,T0){var X0=this,Z0=X0.set,V0=K.length,G0=X0.mp3_start(Z0);if(G0){X0.mp3_encode(G0,K),X0.mp3_complete(G0,t0,T0,1);return}var k0=new Recorder.lamejs.Mp3Encoder(1,Z0.sampleRate,Z0.bitRate),c0=57600,C0=[],F0=0,m0=0,Be=function(){if(F0<V0){var de=k0.encodeBuffer(K.subarray(F0,F0+c0));de.length>0&&(m0+=de.buffer.byteLength,C0.push(de.buffer)),F0+=c0,setTimeout(Be)}else{var de=k0.flush();de.length>0&&(m0+=de.buffer.byteLength,C0.push(de.buffer));var $0=pe.fn(C0,m0,V0,Z0.sampleRate);w0($0,Z0),t0(new Blob(C0,{type:"audio/mp3"}))}};Be()};var se;Recorder.BindDestroy("mp3Worker",function(){Recorder.CLog("mp3Worker Destroy"),se&&se.terminate(),se=null}),Recorder.prototype.mp3_envCheck=function(K,t0){var T0="";return t0.takeoffEncodeChunk&&(K.canProcess?we()||(T0="\u5F53\u524D\u6D4F\u89C8\u5668\u7248\u672C\u592A\u4F4E\uFF0C\u65E0\u6CD5\u5B9E\u65F6\u5904\u7406"):T0=K.envName+"\u73AF\u5883\u4E0D\u652F\u6301\u5B9E\u65F6\u5904\u7406"),T0},Recorder.prototype.mp3_start=function(K){return we(K)};var Me={id:0},we=function(K){var t0=se;try{if(!t0){var T0=function(k0){var c0=k0.data,C0=wk_ctxs[c0.id];if(c0.action=="init")wk_ctxs[c0.id]={sampleRate:c0.sampleRate,bitRate:c0.bitRate,takeoff:c0.takeoff,mp3Size:0,pcmSize:0,encArr:[],encObj:new wk_lame.Mp3Encoder(1,c0.sampleRate,c0.bitRate)};else if(!C0)return;switch(c0.action){case"stop":C0.encObj=null,delete wk_ctxs[c0.id];break;case"encode":C0.pcmSize+=c0.pcm.length;var F0=C0.encObj.encodeBuffer(c0.pcm);F0.length>0&&(C0.takeoff?self.postMessage({action:"takeoff",id:c0.id,chunk:F0}):(C0.mp3Size+=F0.buffer.byteLength,C0.encArr.push(F0.buffer)));break;case"complete":var F0=C0.encObj.flush();F0.length>0&&(C0.takeoff?self.postMessage({action:"takeoff",id:c0.id,chunk:F0}):(C0.mp3Size+=F0.buffer.byteLength,C0.encArr.push(F0.buffer)));var m0=wk_mp3TrimFix.fn(C0.encArr,C0.mp3Size,C0.pcmSize,C0.sampleRate);self.postMessage({action:c0.action,id:c0.id,blob:new Blob(C0.encArr,{type:"audio/mp3"}),meta:m0});break}},X0=");wk_lame();var wk_ctxs={};self.onmessage="+T0;X0+=";var wk_mp3TrimFix={rm:"+pe.rm+",fn:"+pe.fn+"}";var Z0=Recorder.lamejs.toString(),V0=(window.URL||webkitURL).createObjectURL(new Blob(["var wk_lame=(",Z0,X0],{type:"text/javascript"}));t0=new Worker(V0),setTimeout(function(){(window.URL||webkitURL).revokeObjectURL(V0)},1e4),t0.onmessage=function(k0){var c0=k0.data,C0=Me[c0.id];C0&&(c0.action=="takeoff"?C0.set.takeoffEncodeChunk(new Uint8Array(c0.chunk.buffer)):(C0.call&&C0.call(c0),C0.call=null))}}var G0={worker:t0,set:K,takeoffQueue:[]};return K?(G0.id=++Me.id,Me[G0.id]=G0,t0.postMessage({action:"init",id:G0.id,sampleRate:K.sampleRate,bitRate:K.bitRate,takeoff:!!K.takeoffEncodeChunk,x:new Int16Array(5)})):t0.postMessage({x:new Int16Array(5)}),se=t0,G0}catch(k0){return t0&&t0.terminate(),console.error(k0),null}};Recorder.prototype.mp3_stop=function(K){if(K&&K.worker){K.worker.postMessage({action:"stop",id:K.id}),K.worker=null,delete Me[K.id];var t0=-1;for(var T0 in Me)t0++;t0&&Recorder.CLog("mp3 worker\u5269"+t0+"\u4E2A\u5728\u4E32\u884C\u7B49\u5F85",3)}},Recorder.prototype.mp3_encode=function(K,t0){K&&K.worker&&K.worker.postMessage({action:"encode",id:K.id,pcm:t0})},Recorder.prototype.mp3_complete=function(K,t0,T0,X0){var Z0=this;K&&K.worker?(K.call=function(V0){w0(V0.meta,K.set),t0(V0.blob),X0&&Z0.mp3_stop(K)},K.worker.postMessage({action:"complete",id:K.id})):T0("mp3\u7F16\u7801\u5668\u672A\u6253\u5F00")},Recorder.mp3ReadMeta=function(K,t0){var T0=typeof window=="object"?window.parseInt:self.parseInt,X0=new Uint8Array(K[0]||[]);if(X0.length<4)return null;var Z0=function(P0,j){return("0000000"+((j||X0)[P0]||0).toString(2)).substr(-8)},V0=Z0(0)+Z0(1),G0=Z0(2)+Z0(3);if(!/^1{11}/.test(V0))return null;var k0={"00":2.5,10:2,11:1}[V0.substr(11,2)],c0={"01":3}[V0.substr(13,2)],C0={1:[44100,48e3,32e3],2:[22050,24e3,16e3],"2.5":[11025,12e3,8e3]}[k0];C0&&(C0=C0[T0(G0.substr(4,2),2)]);var F0=[[0,8,16,24,32,40,48,56,64,80,96,112,128,144,160],[0,32,40,48,56,64,80,96,112,128,160,192,224,256,320]][k0==1?1:0][T0(G0.substr(0,4),2)];if(!k0||!c0||!F0||!C0)return null;for(var m0=Math.round(t0*8/F0),Be=c0==1?384:c0==2||k0==1?1152:576,de=Be/C0*1e3,$0=Math.floor(Be*F0/8/C0*1e3),Ve=0,Oe=0,K0=0;K0<K.length;K0++){var Ke=K[K0];if(Oe+=Ke.byteLength,Oe>=$0+3){var a1=new Uint8Array(Ke),Ue=Ke.byteLength-(Oe-($0+3)+1),be=Z0(Ue,a1);Ve=be.charAt(6)=="1";break}}return Ve&&$0++,{version:k0,layer:c0,sampleRate:C0,bitRate:F0,duration:m0,size:t0,hasPadding:Ve,frameSize:$0,frameDurationFloat:de}};var pe={rm:Recorder.mp3ReadMeta,fn:function(K,t0,T0,X0){var Z0=this.rm(K,t0);if(!Z0)return{err:"mp3\u975E\u9884\u5B9A\u683C\u5F0F"};var V0=Math.round(T0/X0*1e3),G0=Math.floor((Z0.duration-V0)/Z0.frameDurationFloat);if(G0>0){var k0=G0*Z0.frameSize-(Z0.hasPadding?1:0);t0-=k0;for(var c0=0,C0=[],F0=0;F0<K.length;F0++){var m0=K[F0];if(k0<=0)break;k0>=m0.byteLength?(k0-=m0.byteLength,C0.push(m0),K.splice(F0,1),F0--):(K[F0]=m0.slice(k0),c0=m0,k0=0)}var Be=this.rm(K,t0);if(!Be){c0&&(K[0]=c0);for(var F0=0;F0<C0.length;F0++)K.splice(F0,0,C0[F0]);Z0.err="fix\u540E\u6570\u636E\u9519\u8BEF\uFF0C\u5DF2\u8FD8\u539F\uFF0C\u9519\u8BEF\u539F\u56E0\u4E0D\u660E"}var de=Z0.trimFix={};de.remove=G0,de.removeDuration=Math.round(G0*Z0.frameDurationFloat),de.duration=Math.round(t0*8/Z0.bitRate)}return Z0}},w0=function(K,t0){var T0="MP3\u4FE1\u606F ";(K.sampleRate&&K.sampleRate!=t0.sampleRate||K.bitRate&&K.bitRate!=t0.bitRate)&&(Recorder.CLog(T0+"\u548C\u8BBE\u7F6E\u7684\u4E0D\u5339\u914Dset:"+t0.bitRate+"kbps "+t0.sampleRate+"hz\uFF0C\u5DF2\u66F4\u65B0set:"+K.bitRate+"kbps "+K.sampleRate+"hz",3,t0),t0.sampleRate=K.sampleRate,t0.bitRate=K.bitRate);var X0=K.trimFix;X0?(T0+="Fix\u79FB\u9664"+X0.remove+"\u5E27"+X0.removeDuration+"ms -> "+X0.duration+"ms",X0.remove>2&&(K.err=(K.err?K.err+", ":"")+"\u79FB\u9664\u5E27\u6570\u8FC7\u591A")):T0+=(K.duration||"-")+"ms",K.err?Recorder.CLog(T0,1,K.err,K):Recorder.CLog(T0,K)}})()},10884:function(){(function(){"use strict";Recorder.prototype.enc_pcm={stable:!0,fast:!0,testmsg:"pcm\u4E3A\u672A\u5C01\u88C5\u7684\u539F\u59CB\u97F3\u9891\u6570\u636E\uFF0Cpcm\u97F3\u9891\u6587\u4EF6\u65E0\u6CD5\u76F4\u63A5\u64AD\u653E\uFF0C\u53EF\u7528Recorder.pcm2wav()\u8F6C\u7801\u6210wav\u64AD\u653E\uFF1B\u652F\u6301\u4F4D\u65708\u4F4D\u300116\u4F4D\uFF08\u586B\u5728\u6BD4\u7279\u7387\u91CC\u9762\uFF09\uFF0C\u91C7\u6837\u7387\u53D6\u503C\u65E0\u9650\u5236"},Recorder.prototype.pcm=function(se,Me,we){var pe=this,w0=pe.set,K=se.length,t0=w0.bitRate==8?8:16,T0=new ArrayBuffer(K*(t0/8)),X0=new DataView(T0),Z0=0;if(t0==8)for(var V0=0;V0<K;V0++,Z0++){var G0=(se[V0]>>8)+128;X0.setInt8(Z0,G0,!0)}else for(var V0=0;V0<K;V0++,Z0+=2)X0.setInt16(Z0,se[V0],!0);Me(new Blob([X0.buffer],{type:"audio/pcm"}))},Recorder.pcm2wav=function(se,Me,we){se.slice&&se.type!=null&&(se={blob:se});var pe=se.sampleRate||16e3,w0=se.bitRate||16;if((!se.sampleRate||!se.bitRate)&&console.warn("pcm2wav\u5FC5\u987B\u63D0\u4F9BsampleRate\u548CbitRate"),!Recorder.prototype.wav){we("pcm2wav\u5FC5\u987B\u5148\u52A0\u8F7Dwav\u7F16\u7801\u5668wav.js");return}var K=new FileReader;K.onloadend=function(){var t0;if(w0==8){var T0=new Uint8Array(K.result);t0=new Int16Array(T0.length);for(var X0=0;X0<T0.length;X0++)t0[X0]=T0[X0]-128<<8}else t0=new Int16Array(K.result);Recorder({type:"wav",sampleRate:pe,bitRate:w0}).mock(t0,pe).stop(function(Z0,V0){Me(Z0,V0)},we)},K.readAsArrayBuffer(se.blob)}})()},31568:function(){(function(){"use strict";Recorder.prototype.enc_wav={stable:!0,fast:!0,testmsg:"\u652F\u6301\u4F4D\u65708\u4F4D\u300116\u4F4D\uFF08\u586B\u5728\u6BD4\u7279\u7387\u91CC\u9762\uFF09\uFF0C\u91C7\u6837\u7387\u53D6\u503C\u65E0\u9650\u5236\uFF1B\u6B64\u7F16\u7801\u5668\u4EC5\u5728pcm\u6570\u636E\u524D\u52A0\u4E86\u4E00\u4E2A44\u5B57\u8282\u7684wav\u5934\uFF0C\u7F16\u7801\u51FA\u6765\u768416\u4F4Dwav\u6587\u4EF6\u53BB\u6389\u5F00\u5934\u768444\u5B57\u8282\u5373\u53EF\u5F97\u5230pcm\uFF08\u6CE8\uFF1A\u5176\u4ED6wav\u7F16\u7801\u5668\u53EF\u80FD\u4E0D\u662F44\u5B57\u8282\uFF09"},Recorder.prototype.wav=function(se,Me,we){var pe=this,w0=pe.set,K=se.length,t0=w0.sampleRate,T0=w0.bitRate==8?8:16,X0=K*(T0/8),Z0=new ArrayBuffer(44+X0),V0=new DataView(Z0),G0=0,k0=function(Be){for(var de=0;de<Be.length;de++,G0++)V0.setUint8(G0,Be.charCodeAt(de))},c0=function(Be){V0.setUint16(G0,Be,!0),G0+=2},C0=function(Be){V0.setUint32(G0,Be,!0),G0+=4};if(k0("RIFF"),C0(36+X0),k0("WAVE"),k0("fmt "),C0(16),c0(1),c0(1),C0(t0),C0(t0*(T0/8)),c0(T0/8),c0(T0),k0("data"),C0(X0),T0==8)for(var F0=0;F0<K;F0++,G0++){var m0=(se[F0]>>8)+128;V0.setInt8(G0,m0,!0)}else for(var F0=0;F0<K;F0++,G0+=2)V0.setInt16(G0,se[F0],!0);Me(new Blob([V0.buffer],{type:"audio/wav"}))}})()},57584:function(se,Me,we){var pe;(function(w0){w0(window),pe=function(){return Recorder}.call(Me,we,Me,se),pe!==void 0&&(se.exports=pe),se.exports&&(se.exports=Recorder)})(function(w0){"use strict";var K=function(){},t0=function(Y){return new Ue(Y)};t0.LM="2023-07-01 20:46";var T0="Recorder",X0="getUserMedia",Z0="srcSampleRate",V0="sampleRate",G0="catch";t0.IsOpen=function(){var Y=t0.Stream;if(Y){var Q=Y.getTracks&&Y.getTracks()||Y.audioTracks||[],O=Q[0];if(O){var W=O.readyState;return W=="live"||W==O.LIVE}}return!1},t0.BufferSize=4096,t0.Destroy=function(){K0(T0+" Destroy"),Ve();for(var Y in k0)k0[Y]()};var k0={};t0.BindDestroy=function(Y,Q){k0[Y]=Q},t0.Support=function(){var Y=navigator.mediaDevices||{};return Y[X0]||(Y=navigator,Y[X0]||(Y[X0]=Y.webkitGetUserMedia||Y.mozGetUserMedia||Y.msGetUserMedia)),!(!Y[X0]||(t0.Scope=Y,!t0.GetContext()))},t0.GetContext=function(Y){var Q=w0.AudioContext;if(Q||(Q=w0.webkitAudioContext),!Q)return null;var O=t0.Ctx;if((!O||O.state=="closed")&&(O=t0.Ctx=new Q,t0.NewCtxs=t0.NewCtxs||[],t0.BindDestroy("Ctx",function(){var W=t0.Ctx;W&&W.close&&(W.close(),t0.Ctx=0);var f0=t0.NewCtxs;t0.NewCtxs=[];for(var x0=0;x0<f0.length;x0++)f0[x0].close()})),Y&&O.close)try{O=new Q,t0.NewCtxs.push(O)}catch(W){K0("GetContext tryNew\u5F02\u5E38",1,W)}return O},t0.CloseNewCtx=function(Y){if(Y&&Y!=t0.Ctx){Y.close&&Y.close();for(var Q=t0.NewCtxs||[],O=Q.length,W=0;W<Q.length;W++)if(Q[W]==Y){Q.splice(W,1);break}K0("\u5269"+O+"-1="+Q.length+"\u4E2AGetContext\u672Aclose",Q.length?3:0)}};var c0=function(Y){var Q=Y.state,O="ctx.state="+Q;return Q=="suspended"&&(O+="\uFF08\u6CE8\u610F\uFF1Actx\u4E0D\u662Frunning\u72B6\u6001\uFF0Crec.open\u548Cstart\u81F3\u5C11\u8981\u6709\u4E00\u4E2A\u5728\u7528\u6237\u64CD\u4F5C(\u89E6\u6478\u3001\u70B9\u51FB\u7B49)\u65F6\u8FDB\u884C\u8C03\u7528\uFF0C\u5426\u5219\u5C06\u5728rec.start\u65F6\u5C1D\u8BD5\u8FDB\u884Cctx.resume\uFF0C\u53EF\u80FD\u4F1A\u4EA7\u751F\u517C\u5BB9\u6027\u95EE\u9898(\u4EC5iOS)\uFF0C\u8BF7\u53C2\u9605\u6587\u6863\u4E2DrunningContext\u914D\u7F6E\uFF09"),O},C0="ConnectEnableWebM";t0[C0]=!0;var F0="ConnectEnableWorklet";t0[F0]=!1;var m0=function(Y,Q){var O=Y.BufferSize||t0.BufferSize,W=Y.Stream,f0=W._RC||W._c||t0.GetContext(!0);W._c=f0;var x0=function(re){var _e=W._m=f0.createMediaStreamSource(W),ie=f0.destination,m="createMediaStreamDestination";f0[m]&&(ie=W._d=f0[m]()),_e.connect(re),re.connect(ie)},L0,g0,M0,Q0="",ve=W._call,ae=function(re){for(var _e in ve){for(var ie=re.length,m=new Int16Array(ie),V=0,Z=0;Z<ie;Z++){var k=Math.max(-1,Math.min(1,re[Z]));k=k<0?k*32768:k*32767,m[Z]=k,V+=Math.abs(k)}for(var i0 in ve)ve[i0](m,V);return}},l="ScriptProcessor",ee="audioWorklet",z0=T0+" "+ee,U0="RecProc",te="MediaRecorder",y0=te+".WebM.PCM",W0=f0.createScriptProcessor||f0.createJavaScriptNode,fe="\u3002\u7531\u4E8E"+ee+"\u5185\u90E81\u79D2375\u6B21\u56DE\u8C03\uFF0C\u5728\u79FB\u52A8\u7AEF\u53EF\u80FD\u4F1A\u6709\u6027\u80FD\u95EE\u9898\u5BFC\u81F4\u56DE\u8C03\u4E22\u5931\u5F55\u97F3\u53D8\u77ED\uFF0CPC\u7AEF\u65E0\u5F71\u54CD\uFF0C\u6682\u4E0D\u5EFA\u8BAE\u5F00\u542F"+ee+"\u3002",S0=function(){g0=W.isWorklet=!1,de(W),K0("Connect\u91C7\u7528\u8001\u7684"+l+"\uFF0C"+(t0[F0]?"\u4F46\u5DF2":"\u53EF")+"\u8BBE\u7F6E"+T0+"."+F0+"=true\u5C1D\u8BD5\u542F\u7528"+ee+Q0+fe,3);var re=W._p=W0.call(f0,O,1,1);x0(re),re.onaudioprocess=function(_e){var ie=_e.inputBuffer.getChannelData(0);ae(ie)}},Y0=function(){L0=W.isWebM=!1,$0(W),g0=W.isWorklet=!W0||t0[F0];var re=w0.AudioWorkletNode;if(!(g0&&f0[ee]&&re)){S0();return}var _e=function(){var Z=function(i0){return i0.toString().replace(/^function|DEL_/g,"").replace(/\$RA/g,z0)},k="class "+U0+" extends AudioWorkletProcessor{";return k+="constructor "+Z(function(i0){DEL_super(i0);var N=this,J=i0.processorOptions.bufferSize;N.bufferSize=J,N.buffer=new Float32Array(J*2),N.pos=0,N.port.onmessage=function(s0){s0.data.kill&&(N.kill=!0,$C.log("$RA kill call"))},$C.log("$RA .ctor call",i0)}),k+="process "+Z(function(i0,N,J){var s0=this,v0=s0.bufferSize,w=s0.buffer,C=s0.pos;if(i0=(i0[0]||[])[0]||[],i0.length){w.set(i0,C),C+=i0.length;var G=~~(C/v0)*v0;if(G){this.port.postMessage({val:w.slice(0,G)});var E=w.subarray(G,C);w=new Float32Array(v0*2),w.set(E),C=E.length,s0.buffer=w}s0.pos=C}return!s0.kill}),k+='}try{registerProcessor("'+U0+'", '+U0+')}catch(e){$C.error("'+z0+'\u6CE8\u518C\u5931\u8D25",e)}',k=k.replace(/\$C\./g,"console."),"data:text/javascript;base64,"+btoa(unescape(encodeURIComponent(k)))},ie=function(){return g0&&W._na},m=W._na=function(){M0!==""&&(clearTimeout(M0),M0=setTimeout(function(){M0=0,ie()&&(K0(ee+"\u672A\u8FD4\u56DE\u4EFB\u4F55\u97F3\u9891\uFF0C\u6062\u590D\u4F7F\u7528"+l,3),W0&&S0())},500))},V=function(){if(ie()){var Z=W._n=new re(f0,U0,{processorOptions:{bufferSize:O}});x0(Z),Z.port.onmessage=function(k){M0&&(clearTimeout(M0),M0=""),ie()?ae(k.data.val):g0||K0(ee+"\u591A\u4F59\u56DE\u8C03",3)},K0("Connect\u91C7\u7528"+ee+"\uFF0C\u8BBE\u7F6E"+T0+"."+F0+"=false\u53EF\u6062\u590D\u8001\u5F0F"+l+Q0+fe,3)}};f0.resume()[ve&&"finally"](function(){if(ie()){if(f0[U0]){V();return}var Z=_e();f0[ee].addModule(Z).then(function(k){ie()&&(f0[U0]=1,V(),M0&&m())})[G0](function(k){K0(ee+".addModule\u5931\u8D25",1,k),ie()&&S0()})}})},ne=function(){var re=w0[te],_e="ondataavailable",ie="audio/webm; codecs=pcm";L0=W.isWebM=t0[C0];var m=re&&_e in re.prototype&&re.isTypeSupported(ie);if(Q0=m?"":"\uFF08\u6B64\u6D4F\u89C8\u5668\u4E0D\u652F\u6301"+y0+"\uFF09",!Q||!L0||!m){Y0();return}var V=function(){return L0&&W._ra},Z=W._ra=function(){M0!==""&&(clearTimeout(M0),M0=setTimeout(function(){V()&&(K0(te+"\u672A\u8FD4\u56DE\u4EFB\u4F55\u97F3\u9891\uFF0C\u964D\u7EA7\u4F7F\u7528"+ee,3),Y0())},500))},k=Object.assign({mimeType:ie},t0.ConnectWebMOptions),i0=W._r=new re(W,k),N=W._rd={sampleRate:f0[V0]};i0[_e]=function(J){var s0=new FileReader;s0.onloadend=function(){if(V()){var v0=be(new Uint8Array(s0.result),N);if(!v0)return;if(v0==-1){Y0();return}M0&&(clearTimeout(M0),M0=""),ae(v0)}else L0||K0(te+"\u591A\u4F59\u56DE\u8C03",3)},s0.readAsArrayBuffer(J.data)},i0.start(~~(O/48)),K0("Connect\u91C7\u7528"+y0+"\uFF0C\u8BBE\u7F6E"+T0+"."+C0+"=false\u53EF\u6062\u590D\u4F7F\u7528"+ee+"\u6216\u8001\u5F0F"+l)};ne()},Be=function(Y){Y._na&&Y._na(),Y._ra&&Y._ra()},de=function(Y){Y._na=null,Y._n&&(Y._n.port.postMessage({kill:!0}),Y._n.disconnect(),Y._n=null)},$0=function(Y){Y._ra=null,Y._r&&(Y._r.stop(),Y._r=null)},Ve=function(Y){Y=Y||t0;var Q=Y==t0,O=Y.Stream;O&&(O._m&&(O._m.disconnect(),O._m=null),!O._RC&&O._c&&t0.CloseNewCtx(O._c),O._RC=null,O._c=null,O._d&&(Oe(O._d.stream),O._d=null),O._p&&(O._p.disconnect(),O._p.onaudioprocess=O._p=null),de(O),$0(O),Q&&Oe(O)),Y.Stream=0},Oe=t0.StopS_=function(Y){for(var Q=Y.getTracks&&Y.getTracks()||Y.audioTracks||[],O=0;O<Q.length;O++){var W=Q[O];W.stop&&W.stop()}Y.stop&&Y.stop()};t0.SampleData=function(Y,Q,O,W,f0){var x0="SampleData";W||(W={});var L0=W.index||0,g0=W.offset||0,M0=W.filter;if(M0&&M0.fn&&M0.sr!=Q&&(M0=null,K0(x0+"\u7684filter\u91C7\u6837\u7387\u53D8\u4E86\uFF0C\u91CD\u8BBE\u6EE4\u6CE2",3)),!M0){var Q0=O>Q*3/4?0:O/2*3/4;M0={fn:Q0?t0.IIRFilter(!0,Q,Q0):0}}M0.sr=Q;var ve=M0.fn,ae=W.frameNext||[];f0||(f0={});var l=f0.frameSize||1;f0.frameType&&(l=f0.frameType=="mp3"?1152:1);var ee=Y.length;L0>ee+1&&K0(x0+"\u4F3C\u4E4E\u4F20\u5165\u4E86\u672A\u91CD\u7F6Echunk "+L0+">"+ee,3);for(var z0=0,U0=L0;U0<ee;U0++)z0+=Y[U0].length;z0=Math.max(0,z0-Math.floor(g0));var te=Q/O;te>1?z0=Math.floor(z0/te):(te=1,O=Q),z0+=ae.length;for(var y0=new Int16Array(z0),W0=0,U0=0;U0<ae.length;U0++)y0[W0]=ae[U0],W0++;for(;L0<ee;L0++){for(var fe=Y[L0],U0=g0,S0=fe.length,Y0=ve&&ve.Embed,ne=0,re=0,_e=0,ie=0,m=0,V=0;m<S0;m++,V++){if(V<S0&&(Y0?(_e=fe[V],ie=Y0.b0*_e+Y0.b1*Y0.x1+Y0.b0*Y0.x2-Y0.a1*Y0.y1-Y0.a2*Y0.y2,Y0.x2=Y0.x1,Y0.x1=_e,Y0.y2=Y0.y1,Y0.y1=ie):ie=ve?ve(fe[V]):fe[V]),ne=re,re=ie,V==0){m--;continue}var Z=Math.floor(U0);if(m==Z){var k=Math.ceil(U0),i0=U0-Z,N=ne,J=k<S0?re:N;y0[W0]=N+(J-N)*i0,W0++,U0+=te}}g0=Math.max(0,U0-S0)}ae=null;var s0=y0.length%l;if(s0>0){var v0=(y0.length-s0)*2;ae=new Int16Array(y0.buffer.slice(v0)),y0=new Int16Array(y0.buffer.slice(0,v0))}return{index:L0,offset:g0,filter:M0,frameNext:ae,sampleRate:O,data:y0}},t0.IIRFilter=function(Y,Q,O){var W=2*Math.PI*O/Q,f0=Math.sin(W),x0=Math.cos(W),L0=f0/2,g0=1+L0,M0=-2*x0/g0,Q0=(1-L0)/g0;if(Y)var ve=(1-x0)/2/g0,ae=(1-x0)/g0;else var ve=(1+x0)/2/g0,ae=-(1+x0)/g0;var l=0,ee=0,z0=0,U0=0,te=0,y0=function(W0){return z0=ve*W0+ae*l+ve*ee-M0*U0-Q0*te,ee=l,l=W0,te=U0,U0=z0,z0};return y0.Embed={x1:0,x2:0,y1:0,y2:0,b0:ve,b1:ae,a1:M0,a2:Q0},y0},t0.PowerLevel=function(Y,Q){var O=Y/Q||0,W;return O<1251?W=Math.round(O/1250*10):W=Math.round(Math.min(100,Math.max(0,(1+Math.log(O/1e4)/Math.log(10))*100))),W},t0.PowerDBFS=function(Y){var Q=Math.max(.1,Y||0),O=32767;return Q=Math.min(Q,O),Q=20*Math.log(Q/O)/Math.log(10),Math.max(-100,Math.round(Q))},t0.CLog=function(Y,Q){var O=new Date,W=("0"+O.getMinutes()).substr(-2)+":"+("0"+O.getSeconds()).substr(-2)+"."+("00"+O.getMilliseconds()).substr(-3),f0=this&&this.envIn&&this.envCheck&&this.id,x0=["["+W+" "+T0+(f0?":"+f0:"")+"]"+Y],L0=arguments,g0=w0.console||{},M0=2,Q0=g0.log;for(typeof Q=="number"?Q0=Q==1?g0.error:Q==3?g0.warn:Q0:M0=1;M0<L0.length;M0++)x0.push(L0[M0]);Ke?Q0&&Q0("[IsLoser]"+x0[0],x0.length>1?x0:""):Q0.apply(g0,x0)};var K0=function(){t0.CLog.apply(this,arguments)},Ke=!0;try{Ke=!console.log.apply}catch(Y){}var a1=0;function Ue(Y){this.id=++a1,s1();var Q={type:"mp3",bitRate:16,sampleRate:16e3,onProcess:K};for(var O in Y)Q[O]=Y[O];this.set=Q,this._S=9,this.Sync={O:9,C:9}}t0.Sync={O:9,C:9},t0.prototype=Ue.prototype={CLog:K0,_streamStore:function(){return this.set.sourceStream?this:t0},_streamCtx:function(){var Y=this._streamStore().Stream;return Y&&Y._c},open:function(Y,Q){var O=this,W=O.set,f0=O._streamStore(),x0=0;Y=Y||K;var L0=function(Y0,ne){ne=!!ne,O.CLog("\u5F55\u97F3open\u5931\u8D25\uFF1A"+Y0+",isUserNotAllow:"+ne,1),x0&&t0.CloseNewCtx(x0),Q&&Q(Y0,ne)},g0=function(){O.CLog("open ok id:"+O.id),Y(),O._SO=0},M0=f0.Sync,Q0=++M0.O,ve=M0.C;O._O=O._O_=Q0,O._SO=O._S;var ae=function(){if(ve!=M0.C||!O._O){var Y0="open\u88AB\u53D6\u6D88";return Q0==M0.O?O.close():Y0="open\u88AB\u4E2D\u65AD",L0(Y0),!0}},l=O.envCheck({envName:"H5",canProcess:!0});if(l){L0("\u4E0D\u80FD\u5F55\u97F3\uFF1A"+l);return}if(W.sourceStream){if(!t0.GetContext()){L0("\u4E0D\u652F\u6301\u6B64\u6D4F\u89C8\u5668\u4ECE\u6D41\u4E2D\u83B7\u53D6\u5F55\u97F3");return}Ve(f0);var ee=O.Stream=W.sourceStream;ee._RC=W.runningContext,ee._call={};try{m0(f0)}catch(Y0){Ve(f0),L0("\u4ECE\u6D41\u4E2D\u6253\u5F00\u5F55\u97F3\u5931\u8D25\uFF1A"+Y0.message);return}g0();return}var z0=function(Y0,ne){try{w0.top.a}catch(re){L0('\u65E0\u6743\u5F55\u97F3(\u8DE8\u57DF\uFF0C\u8BF7\u5C1D\u8BD5\u7ED9iframe\u6DFB\u52A0\u9EA6\u514B\u98CE\u8BBF\u95EE\u7B56\u7565\uFF0C\u5982allow="camera;microphone")');return}/Permission|Allow/i.test(Y0)?L0("\u7528\u6237\u62D2\u7EDD\u4E86\u5F55\u97F3\u6743\u9650",!0):w0.isSecureContext===!1?L0("\u6D4F\u89C8\u5668\u7981\u6B62\u4E0D\u5B89\u5168\u9875\u9762\u5F55\u97F3\uFF0C\u53EF\u5F00\u542Fhttps\u89E3\u51B3"):/Found/i.test(Y0)?L0(ne+"\uFF0C\u65E0\u53EF\u7528\u9EA6\u514B\u98CE"):L0(ne)};if(t0.IsOpen()){g0();return}if(!t0.Support()){z0("","\u6B64\u6D4F\u89C8\u5668\u4E0D\u652F\u6301\u5F55\u97F3");return}var U0=W.runningContext;U0||(U0=x0=t0.GetContext(!0));var te=function(Y0){setTimeout(function(){Y0._call={};var ne=t0.Stream;ne&&(Ve(),Y0._call=ne._call),t0.Stream=Y0,Y0._c=U0,Y0._RC=W.runningContext,!ae()&&(t0.IsOpen()?(ne&&O.CLog("\u53D1\u73B0\u540C\u65F6\u591A\u6B21\u8C03\u7528open",1),m0(f0,1),g0()):L0("\u5F55\u97F3\u529F\u80FD\u65E0\u6548\uFF1A\u65E0\u97F3\u9891\u6D41"))},100)},y0=function(Y0){var ne=Y0.name||Y0.message||Y0.code+":"+Y0;O.CLog("\u8BF7\u6C42\u5F55\u97F3\u6743\u9650\u9519\u8BEF",1,Y0),z0(ne,"\u65E0\u6CD5\u5F55\u97F3\uFF1A"+ne)},W0=W.audioTrackSet||{};W0[V0]=U0[V0];var fe={audio:W0};try{var S0=t0.Scope[X0](fe,te,y0)}catch(Y0){O.CLog(X0,3,Y0),fe={audio:!0},S0=t0.Scope[X0](fe,te,y0)}O.CLog(X0+"("+JSON.stringify(fe)+") "+c0(U0)+"\uFF0C\u4E00\u822C\u9ED8\u8BA4\u4F1A\u964D\u566A\u548C\u56DE\u58F0\u6D88\u9664\uFF0C\u79FB\u52A8\u7AEF\u53EF\u80FD\u4F1A\u964D\u4F4E\u7CFB\u7EDF\u64AD\u653E\u97F3\u91CF\uFF0C\u8BF7\u53C2\u9605\u6587\u6863\u4E2DaudioTrackSet\u914D\u7F6E"),S0&&S0.then&&S0.then(te)[G0](y0)},close:function(Y){Y=Y||K;var Q=this,O=Q._streamStore();Q._stop();var W=O.Sync;if(Q._O=0,Q._O_!=W.O){Q.CLog("close\u88AB\u5FFD\u7565\uFF08\u56E0\u4E3A\u540C\u65F6open\u4E86\u591A\u4E2Arec\uFF0C\u53EA\u6709\u6700\u540E\u4E00\u4E2A\u4F1A\u771F\u6B63close\uFF09",3),Y();return}W.C++,Ve(O),Q.CLog("close"),Y()},mock:function(Y,Q){var O=this;return O._stop(),O.isMock=1,O.mockEnvInfo=null,O.buffers=[Y],O.recSize=Y.length,O[Z0]=Q,O},envCheck:function(Y){var Q,O=this,W=O.set,f0="CPU_BE";if(!Q&&!t0[f0]&&w0.Int8Array&&!new Int8Array(new Int32Array([1]).buffer)[0]&&(s1(f0),Q="\u4E0D\u652F\u6301"+f0+"\u67B6\u6784"),!Q){var x0=W.type;O[x0+"_envCheck"]?Q=O[x0+"_envCheck"](Y,W):W.takeoffEncodeChunk&&(Q=x0+"\u7C7B\u578B"+(O[x0]?"":"(\u672A\u52A0\u8F7D\u7F16\u7801\u5668)")+"\u4E0D\u652F\u6301\u8BBE\u7F6EtakeoffEncodeChunk")}return Q||""},envStart:function(Y,Q){var O=this,W=O.set;O.isMock=Y?1:0,O.mockEnvInfo=Y,O.buffers=[],O.recSize=0,O.envInLast=0,O.envInFirst=0,O.envInFix=0,O.envInFixTs=[];var f0=W[V0];if(f0>Q?W[V0]=Q:f0=0,O[Z0]=Q,O.CLog(Z0+": "+Q+" set."+V0+": "+W[V0]+(f0?" \u5FFD\u7565"+f0:""),f0?3:0),O.engineCtx=0,O[W.type+"_start"]){var x0=O.engineCtx=O[W.type+"_start"](W);x0&&(x0.pcmDatas=[],x0.pcmSize=0)}},envResume:function(){this.envInFixTs=[]},envIn:function(Y,Q){var O=this,W=O.set,f0=O.engineCtx,x0=O[Z0],L0=Y.length,g0=t0.PowerLevel(Q,L0),M0=O.buffers,Q0=M0.length;M0.push(Y);var ve=M0,ae=Q0,l=Date.now(),ee=Math.round(L0/x0*1e3);O.envInLast=l,O.buffers.length==1&&(O.envInFirst=l-ee);var z0=O.envInFixTs;z0.splice(0,0,{t:l,d:ee});for(var U0=l,te=0,y0=0;y0<z0.length;y0++){var W0=z0[y0];if(l-W0.t>3e3){z0.length=y0;break}U0=W0.t,te+=W0.d}var fe=z0[1],S0=l-U0,Y0=S0-te;if(Y0>S0/3&&(fe&&S0>1e3||z0.length>=6)){var ne=l-fe.t-ee;if(ne>ee/5){var re=!W.disableEnvInFix;if(O.CLog("["+l+"]"+(re?"":"\u672A")+"\u8865\u507F"+ne+"ms",3),O.envInFix+=ne,re){var _e=new Int16Array(ne*x0/1e3);L0+=_e.length,M0.push(_e)}}}var ie=O.recSize,m=L0,V=ie+m;if(O.recSize=V,f0){var Z=t0.SampleData(M0,x0,W[V0],f0.chunkInfo);f0.chunkInfo=Z,ie=f0.pcmSize,m=Z.data.length,V=ie+m,f0.pcmSize=V,M0=f0.pcmDatas,Q0=M0.length,M0.push(Z.data),x0=Z[V0]}var k=Math.round(V/x0*1e3),i0=M0.length,N=ve.length,J=function(){for(var G=s0?0:-m,E=M0[0]==null,L=Q0;L<i0;L++){var a=M0[L];a==null?E=1:(G+=a.length,f0&&a.length&&O[W.type+"_encode"](f0,a))}if(E&&f0){var L=ae;for(ve[0]&&(L=0);L<N;L++)ve[L]=null}E&&(G=s0?m:0,M0[0]=null),f0?f0.pcmSize+=G:O.recSize+=G},s0=0,v0="rec.set.onProcess";try{s0=W.onProcess(M0,g0,k,x0,Q0,J)}catch(G){console.error(v0+"\u56DE\u8C03\u51FA\u9519\u662F\u4E0D\u5141\u8BB8\u7684\uFF0C\u9700\u4FDD\u8BC1\u4E0D\u4F1A\u629B\u5F02\u5E38",G)}var w=Date.now()-l;if(w>10&&O.envInFirst-l>1e3&&O.CLog(v0+"\u4F4E\u6027\u80FD\uFF0C\u8017\u65F6"+w+"ms",3),s0===!0){for(var C=0,y0=Q0;y0<i0;y0++)M0[y0]==null?C=1:M0[y0]=new Int16Array(0);C?O.CLog("\u672A\u8FDB\u5165\u5F02\u6B65\u524D\u4E0D\u80FD\u6E05\u9664buffers",3):f0?f0.pcmSize-=m:O.recSize-=m}else J()},start:function(){var Y=this,Q=1;if(Y.set.sourceStream?Y.Stream||(Q=0):t0.IsOpen()||(Q=0),!Q){Y.CLog("\u672Aopen",1);return}var O=Y._streamCtx();if(Y.CLog("start \u5F00\u59CB\u5F55\u97F3 "+c0(O)),Y._stop(),Y.state=3,Y.envStart(null,O[V0]),Y._SO&&Y._SO+1!=Y._S){Y.CLog("start\u88AB\u4E2D\u65AD",3);return}Y._SO=0;var W=function(){Y.state==3&&(Y.state=1,Y.resume())};if(O.state=="suspended"){var f0="AudioContext resume: ";Y.CLog(f0+"wait..."),O.resume().then(function(){Y.CLog(f0+O.state),W()})[G0](function(x0){Y.CLog(f0+O.state+" \u53EF\u80FD\u65E0\u6CD5\u5F55\u97F3\uFF1A"+x0.message,1,x0),W()})}else W()},pause:function(){var Y=this;Y.state&&(Y.state=2,Y.CLog("pause"),delete Y._streamStore().Stream._call[Y.id])},resume:function(){var Y=this;if(Y.state){Y.state=1,Y.CLog("resume"),Y.envResume();var Q=Y._streamStore().Stream;Q._call[Y.id]=function(O,W){Y.state==1&&Y.envIn(O,W)},Be(Q)}},_stop:function(Y){var Q=this,O=Q.set;Q.isMock||Q._S++,Q.state&&(Q.pause(),Q.state=0),!Y&&Q[O.type+"_stop"]&&(Q[O.type+"_stop"](Q.engineCtx),Q.engineCtx=0)},stop:function(Y,Q,O){var W=this,f0=W.set,x0,L0=W.envInLast-W.envInFirst,g0=L0&&W.buffers.length;W.CLog("stop \u548Cstart\u65F6\u5DEE"+(L0?L0+"ms \u8865\u507F"+W.envInFix+"ms envIn:"+g0+" fps:"+(g0/L0*1e3).toFixed(1):"-")+" LM:"+t0.LM);var M0=function(){W._stop(),O&&W.close()},Q0=function(W0){W.CLog("\u7ED3\u675F\u5F55\u97F3\u5931\u8D25\uFF1A"+W0,1),Q&&Q(W0),M0()},ve=function(W0,fe){if(W.CLog("\u7ED3\u675F\u5F55\u97F3 \u7F16\u7801\u82B1"+(Date.now()-x0)+"ms \u97F3\u9891\u65F6\u957F"+fe+"ms \u6587\u4EF6\u5927\u5C0F"+W0.size+"b"),f0.takeoffEncodeChunk)W.CLog("\u542F\u7528takeoffEncodeChunk\u540Estop\u8FD4\u56DE\u7684blob\u957F\u5EA6\u4E3A0\u4E0D\u63D0\u4F9B\u97F3\u9891\u6570\u636E",3);else if(W0.size<Math.max(100,fe/2)){Q0("\u751F\u6210\u7684"+f0.type+"\u65E0\u6548");return}Y&&Y(W0,fe),M0()};if(!W.isMock){var ae=W.state==3;if(!W.state||ae){Q0("\u672A\u5F00\u59CB\u5F55\u97F3"+(ae?"\uFF0C\u5F00\u59CB\u5F55\u97F3\u524D\u65E0\u7528\u6237\u4EA4\u4E92\u5BFC\u81F4AudioContext\u672A\u8FD0\u884C":""));return}W._stop(!0)}var l=W.recSize;if(!l){Q0("\u672A\u91C7\u96C6\u5230\u5F55\u97F3");return}if(!W.buffers[0]){Q0("\u97F3\u9891buffers\u88AB\u91CA\u653E");return}if(!W[f0.type]){Q0("\u672A\u52A0\u8F7D"+f0.type+"\u7F16\u7801\u5668");return}if(W.isMock){var ee=W.envCheck(W.mockEnvInfo||{envName:"mock",canProcess:!1});if(ee){Q0("\u5F55\u97F3\u9519\u8BEF\uFF1A"+ee);return}}var z0=W.engineCtx;if(W[f0.type+"_complete"]&&z0){var y0=Math.round(z0.pcmSize/f0[V0]*1e3);x0=Date.now(),W[f0.type+"_complete"](z0,function(fe){ve(fe,y0)},Q0);return}x0=Date.now();var U0=t0.SampleData(W.buffers,W[Z0],f0[V0]);f0[V0]=U0[V0];var te=U0.data,y0=Math.round(te.length/f0[V0]*1e3);W.CLog("\u91C7\u6837"+l+"->"+te.length+" \u82B1:"+(Date.now()-x0)+"ms"),setTimeout(function(){x0=Date.now(),W[f0.type](te,function(W0){ve(W0,y0)},function(W0){Q0(W0)})})}},w0[T0]&&(K0("\u91CD\u590D\u5F15\u5165"+T0,3),w0[T0].Destroy()),w0[T0]=t0;var be=function(Y,Q){Q.pos||(Q.pos=[0],Q.tracks={},Q.bytes=[]);var O=Q.tracks,W=[Q.pos[0]],f0=function(){Q.pos[0]=W[0]},x0=Q.bytes.length,L0=new Uint8Array(x0+Y.length);if(L0.set(Q.bytes),L0.set(Y,x0),Q.bytes=L0,!Q._ht){if(ye(L0,W),Fe(L0,W),!P0(ye(L0,W),[24,83,128,103]))return;for(ye(L0,W);W[0]<L0.length;){var g0=ye(L0,W),M0=Fe(L0,W),Q0=[0],ve=0;if(!M0)return;if(P0(g0,[22,84,174,107])){for(;Q0[0]<M0.length;){var ae=ye(M0,Q0),l=Fe(M0,Q0),ee=[0],z0={channels:0,sampleRate:0};if(P0(ae,[174]))for(;ee[0]<l.length;){var U0=ye(l,ee),te=Fe(l,ee),y0=[0];if(P0(U0,[215])){var W0=j(te);z0.number=W0,O[W0]=z0}else if(P0(U0,[131])){var W0=j(te);W0==1?z0.type="video":W0==2?(z0.type="audio",ve||(Q.track0=z0),z0.idx=ve++):z0.type="Type-"+W0}else if(P0(U0,[134])){for(var fe="",S0=0;S0<te.length;S0++)fe+=String.fromCharCode(te[S0]);z0.codec=fe}else if(P0(U0,[225]))for(;y0[0]<te.length;){var Y0=ye(te,y0),ne=Fe(te,y0);if(P0(Y0,[181])){var W0=0,re=new Uint8Array(ne.reverse()).buffer;ne.length==4?W0=new Float32Array(re)[0]:ne.length==8?W0=new Float64Array(re)[0]:K0("WebM Track !Float",1,ne),z0[V0]=Math.round(W0)}else P0(Y0,[98,100])?z0.bitDepth=j(ne):P0(Y0,[159])&&(z0.channels=j(ne))}}}Q._ht=1,K0("WebM Tracks",O),f0();break}}}var _e=Q.track0;if(_e){if(_e.bitDepth==16&&/FLOAT/i.test(_e.codec)&&(_e.bitDepth=32,K0("WebM 16\u653932\u4F4D",3)),_e[V0]!=Q[V0]||_e.bitDepth!=32||_e.channels<1||!/(\b|_)PCM\b/i.test(_e.codec))return Q.bytes=[],Q.bad||K0("WebM Track\u975E\u9884\u671F",3,Q),Q.bad=1,-1;for(var ie=[],m=0;W[0]<L0.length;){var ae=ye(L0,W),l=Fe(L0,W);if(!l)break;if(P0(ae,[163])){var V=l[0]&15,z0=O[V];if(!z0)K0("WebM !Track"+V,1,O);else if(z0.idx===0){for(var Z=new Uint8Array(l.length-4),S0=4;S0<l.length;S0++)Z[S0-4]=l[S0];ie.push(Z),m+=Z.length}}f0()}if(m){var k=new Uint8Array(L0.length-Q.pos[0]);k.set(L0.subarray(Q.pos[0])),Q.bytes=k,Q.pos[0]=0;for(var Z=new Uint8Array(m),S0=0,i0=0;S0<ie.length;S0++)Z.set(ie[S0],i0),i0+=ie[S0].length;var re=new Float32Array(Z.buffer);if(_e.channels>1){for(var N=[],S0=0;S0<re.length;)N.push(re[S0]),S0+=_e.channels;re=new Float32Array(N)}return re}}},P0=function(Y,Q){if(!Y||Y.length!=Q.length)return!1;if(Y.length==1)return Y[0]==Q[0];for(var O=0;O<Y.length;O++)if(Y[O]!=Q[O])return!1;return!0},j=function(Y){for(var Q="",O=0;O<Y.length;O++){var W=Y[O];Q+=(W<16?"0":"")+W.toString(16)}return parseInt(Q,16)||0},ye=function(Y,Q,O){var W=Q[0];if(!(W>=Y.length)){var f0=Y[W],x0=("0000000"+f0.toString(2)).substr(-8),L0=/^(0*1)(\d*)$/.exec(x0);if(L0){var g0=L0[1].length,M0=[];if(!(W+g0>Y.length)){for(var Q0=0;Q0<g0;Q0++)M0[Q0]=Y[W],W++;return O&&(M0[0]=parseInt(L0[2]||"0",2)),Q[0]=W,M0}}}},Fe=function(Y,Q){var O=ye(Y,Q,1);if(O){var W=j(O),f0=Q[0],x0=[];if(W<2147483647){if(f0+W>Y.length)return;for(var L0=0;L0<W;L0++)x0[L0]=Y[f0],f0++}return Q[0]=f0,x0}};t0.TrafficImgUrl="//ia.51.la/go1?id=20469973&pvFlag=1";var s1=t0.Traffic=function(Y){Y=Y?"/"+T0+"/Report/"+Y:"";var Q=t0.TrafficImgUrl;if(Q){var O=t0.Traffic,W=/^(https?:..[^\/#]*\/?)[^#]*/i.exec(location.href)||[],f0=W[1]||"http://file/",x0=(W[0]||f0)+Y;if(Q.indexOf("//")==0&&(/^https:/i.test(x0)?Q="https:"+Q:Q="http:"+Q),Y&&(Q=Q+"&cu="+encodeURIComponent(f0+Y)),!O[x0]){O[x0]=1;var L0=new Image;L0.src=Q,K0("Traffic Analysis Image: "+(Y||T0+".TrafficImgUrl="+t0.TrafficImgUrl))}}}})}}]);
