"use strict";(self.webpackChunk_chao_libs=self.webpackChunk_chao_libs||[]).push([[433],{42372:function(N,h,e){e.r(h);var B=e(17061),o=e.n(B),A=e(17156),d=e.n(A),T=e(27424),M=e.n(T),U=e(65043),a=e(45360),L=e(42075),E=e(83622),u=e(67294),p=e(57584),m=e.n(p),I=e(14074),z=e.n(I),K=e(65129),H=e.n(K),W=e(10884),J=e.n(W),y=e(31568),Q=e.n(y),s=e(85893),j=function(){var b=(0,u.useState)(!1),v=M()(b,2),c=v[0],P=v[1],n=(0,u.useRef)(),k=(0,u.useRef)(null),Z=(0,u.useState)(),R=M()(Z,2),l=R[0],S=R[1],F=function(){var t=d()(o()().mark(function _(){var r;return o()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return r=m()({type:"mp3",bitRate:16,sampleRate:16e3,onProcess:function(D,O,f,G){console.log(D,O,f,G)}}),i.abrupt("return",new Promise(function(C,D){r.open(function(){console.log("newRec",r),n.current=r,C(!0)},function(O,f){D((f?"UserNotAllow\uFF0C":"")+"\u65E0\u6CD5\u5F55\u97F3:"+O)})}));case 2:case"end":return i.stop()}},_)}));return function(){return t.apply(this,arguments)}}(),$=(0,U.Z)(d()(o()().mark(function t(){return o()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,F();case 3:n.current&&m().IsOpen()&&(P(!0),a.ZP.info("\u5F00\u59CB\u5F55\u5236"),n.current.start()),r.next=10;break;case 6:r.prev=6,r.t0=r.catch(0),P(!1),a.ZP.error(r.t0);case 10:case"end":return r.stop()}},t,null,[[0,6]])}))),w=function(){try{if(!n.current){console.error("\u672A\u6253\u5F00\u5F55\u97F3");return}n.current.stop(function(_,r){if(console.log("\u5F55\u97F3\u6210\u529F",_,"\u65F6\u957F:"+r+"ms"),_){var g=new FormData;g.append("audio",_),S(_)}a.ZP.success("\u5F55\u5236\u6210\u529F"),n.current.close(),n.current=null})}catch(_){console.error("\u7ED3\u675F\u5F55\u97F3\u51FA\u9519\uFF1A"+_),n.current.close(),n.current=null}finally{P(!1)}};return(0,s.jsxs)("div",{children:[(0,s.jsxs)(L.Z,{children:[(0,s.jsx)(E.ZP,{disabled:c,onClick:$,type:c?"default":"primary",children:"\u5F00\u59CB\u5F55\u97F3"}),(0,s.jsx)(E.ZP,{disabled:!c,type:c?"primary":"default",onClick:w,children:"\u505C\u6B62\u5F55\u97F3"}),(0,s.jsx)(E.ZP,{disabled:!l,type:"primary",onClick:d()(o()().mark(function t(){return o()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:k.current&&l&&(a.ZP.info("\u5F00\u59CB\u64AD\u653E"),console.log("recBlob",l),k.current.src=URL.createObjectURL(l),k.current.play());case 1:case"end":return r.stop()}},t)})),children:"\u64AD\u653E"})]}),(0,s.jsx)("audio",{ref:k})]})};h.default=j}}]);
